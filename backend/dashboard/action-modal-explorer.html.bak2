<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Action & Modal Explorer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #2d1b4e 30%, #4a1942 60%, #1f1f3a 100%);
            min-height: 100vh;
            padding: 20px;
            color: #fff;
        }

        .dashboard-container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .dashboard-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px 30px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-content h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .header-content p {
            opacity: 0.8;
            font-size: 14px;
        }

        .header-actions {
            display: flex;
            gap: 12px;
        }

        .button-secondary {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .button-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        .dashboard-content {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .action-grid {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 20px;
        }

        .action-row {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .action-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .action-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(52, 199, 89, 0.4);
            transform: translateY(-2px);
        }

        .action-item.no-modal {
            opacity: 0.5;
            cursor: default;
        }

        .action-item.no-modal:hover {
            transform: none;
            border-color: rgba(255, 255, 255, 0.1);
        }

        .action-item.has-flow {
            border-color: rgba(52, 199, 89, 0.3);
        }

        .action-item.active {
            border-color: rgba(52, 199, 89, 0.6);
            background: rgba(52, 199, 89, 0.1);
        }

        .inline-flow-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
        }

        .inline-flow-container.expanded {
            max-height: 800px;
            transition: max-height 0.5s ease-in;
        }

        .inline-flow-content {
            padding: 24px;
        }

        .inline-flow-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .inline-flow-title {
            font-size: 18px;
            font-weight: 700;
            color: white;
        }

        .collapse-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .collapse-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .action-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }

        .action-name {
            font-size: 16px;
            font-weight: 600;
            color: white;
        }

        .action-badge {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-has-flow {
            background: rgba(52, 199, 89, 0.2);
            color: rgba(52, 199, 89, 1);
        }

        .badge-pending {
            background: rgba(255, 149, 0, 0.2);
            color: rgba(255, 149, 0, 1);
        }

        .badge-no-modal {
            background: rgba(142, 142, 147, 0.2);
            color: rgba(142, 142, 147, 1);
        }

        .action-id {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.5);
            font-family: 'SF Mono', Monaco, monospace;
        }

        .action-modal {
            font-size: 12px;
            color: rgba(100, 149, 237, 1);
            margin-top: 8px;
        }

        .modal-preview {
            margin-top: 30px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 24px;
        }

        .modal-preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-preview-title {
            font-size: 20px;
            font-weight: 700;
            color: white;
        }

        .close-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .stats-bar {
            display: flex;
            gap: 24px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .stat-item {
            flex: 1;
            text-align: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: white;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.6);
        }

        /* Modal flow styles from zero-sequence-live */
        .modal-flow-horizontal {
            display: flex;
            align-items: center;
            gap: 16px;
            overflow-x: auto;
            padding: 20px 0;
        }

        .modal-flow-step {
            min-width: 200px;
            max-width: 200px;
        }

        .modal-flow-label {
            font-size: 12px;
            font-weight: 600;
            color: rgba(255,255,255,0.7);
            margin-bottom: 12px;
            text-align: center;
        }

        .modal-flow-arrow {
            font-size: 24px;
            color: rgba(52, 199, 89, 0.6);
            flex-shrink: 0;
        }

        .modal-email-card, .modal-preview-card, .modal-success-state {
            background: rgba(28, 28, 30, 0.95);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 16px;
            padding: 16px;
            color: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .modal-success-state {
            background: rgba(52, 199, 89, 0.15);
            border-color: rgba(52, 199, 89, 0.4);
            text-align: center;
            padding: 24px;
        }

        .modal-success-icon {
            width: 48px;
            height: 48px;
            background: rgba(52, 199, 89, 1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: 700;
            margin: 0 auto 16px;
        }

        .filter-bar {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .filter-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }

        .filter-btn:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .filter-btn.active {
            background: rgba(52, 199, 89, 0.2);
            border-color: rgba(52, 199, 89, 0.4);
            color: rgba(52, 199, 89, 1);
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="dashboard-header">
            <div class="header-content">
                <h1>üì± Action & Modal Explorer</h1>
                <p>Browse all actions and their modal flows</p>
            </div>
            <div class="header-actions">
                <a href="index.html" class="button-secondary">‚Üê Dashboard</a>
            </div>
        </div>

        <div class="dashboard-content">
            <div class="stats-bar">
                <div class="stat-item">
                    <div class="stat-value" id="total-actions">‚Äî</div>
                    <div class="stat-label">Total Actions</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="with-modals">‚Äî</div>
                    <div class="stat-label">With Modals</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="with-flows">‚Äî</div>
                    <div class="stat-label">With Flows</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="pending-flows">‚Äî</div>
                    <div class="stat-label">Flows Pending</div>
                </div>
            </div>

            <!-- Compound Action Flows Section -->
            <div style="margin-bottom: 32px;">
                <h2 style="font-size: 20px; font-weight: 700; margin-bottom: 16px; color: #fff;">
                    üåÄ Compound Action Flows
                </h2>
                <div id="compound-flows-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px;">
                    <!-- Compound flows will be inserted here -->
                </div>
            </div>

            <div style="border-top: 2px solid rgba(255,255,255,0.1); margin: 32px 0; padding-top: 32px;">
                <h2 style="font-size: 20px; font-weight: 700; margin-bottom: 16px; color: #fff;">
                    ‚ö° Individual Actions
                </h2>
            </div>

            <div class="filter-bar">
                <button class="filter-btn active" data-filter="all">All Actions</button>
                <button class="filter-btn" data-filter="has-flow">Has Flow</button>
                <button class="filter-btn" data-filter="pending">Flow Pending</button>
                <button class="filter-btn" data-filter="no-modal">No Modal</button>
            </div>

            <div class="action-grid" id="action-grid">
                <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.5);">
                    Loading actions...
                </div>
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script>
        // Modal flows copied from zero-sequence-live.html
        const MODAL_FLOWS = {
            'sign_form': {
                title: '‚úçÔ∏è Sign Form',
                steps: [
                    {
                        label: '1. Form Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Permission Form</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Signature required</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úçÔ∏è</span> Sign</div>
                        </div>`
                    },
                    {
                        label: '2. Draw Signature',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úçÔ∏è Sign Form</div>
                            <div style="background: rgba(255,255,255,0.95); height: 80px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #999; font-style: italic;">
                                Draw your signature
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Confirm',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úçÔ∏è Confirm Signature</div>
                            <div style="background: rgba(147, 51, 234, 0.15); border: 2px solid rgba(147, 51, 234, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Field Trip Permission Form</div>
                                <div style="font-size: 14px; opacity: 0.8;">Ready to send with your signature</div>
                            </div>
                            <div style="background: rgba(147, 51, 234, 0.3); padding: 14px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Send Signed Form
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Signed',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Form Signed!</div>
                            <div style="opacity: 0.8;">Reply sent with signature</div>
                        </div>`
                    }
                ]
            },
            'pay_invoice': {
                title: 'üí∞ Pay Invoice',
                steps: [
                    {
                        label: '1. Invoice Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Invoice #INV-2025-1234</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$599.00</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Due: Oct 30, 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üí≥</span> Pay Now</div>
                        </div>`
                    },
                    {
                        label: '2. Payment Method',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí≥ Pay Invoice</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="opacity: 0.7; font-size: 12px;">Amount Due</div>
                                <div style="font-size: 28px; font-weight: 700; color: #FFD700;">$599.00</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Pay with Apple Pay
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Processing',
                        html: `<div class="modal-preview-card" style="background: rgba(59, 130, 246, 0.15); border-color: rgba(59, 130, 246, 0.4);">
                            <div style="width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.2); border-top-color: #3B82F6; border-radius: 50%; margin: 0 auto 16px; animation: spin 1s linear infinite;"></div>
                            <div style="text-align: center; font-weight: 600;">Processing Payment...</div>
                        </div>`
                    },
                    {
                        label: '4. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Payment Sent!</div>
                            <div style="opacity: 0.8;">$599.00 paid to Acme Corp</div>
                        </div>`
                    }
                ]
            },
            'track_package': {
                title: 'üì¶ Track Package',
                steps: [
                    {
                        label: '1. Shipping Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your order has shipped</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">UPS ‚Ä¢ Arrives Friday</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üì¶</span> Track</div>
                        </div>`
                    },
                    {
                        label: '2. Tracking Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì¶ Package Tracking</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 10px;">
                                <div style="font-size: 12px; opacity: 0.7;">Status</div>
                                <div style="font-weight: 600; color: #FFD700;">Out for Delivery</div>
                            </div>
                            <div style="display: flex; gap: 8px; margin-top: 12px;">
                                <div style="flex: 1; height: 4px; background: rgba(52, 199, 89, 0.8); border-radius: 2px;"></div>
                                <div style="flex: 1; height: 4px; background: rgba(52, 199, 89, 0.8); border-radius: 2px;"></div>
                                <div style="flex: 1; height: 4px; background: rgba(255,255,255,0.2); border-radius: 2px;"></div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Live Updates',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Tracking Active</div>
                            <div style="opacity: 0.8;">Push notifications enabled</div>
                        </div>`
                    }
                ]
            },
            'check_in_flight': {
                title: '‚úàÔ∏è Check In Flight',
                steps: [
                    {
                        label: '1. Check-in Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">UA 1234 Ready for Check-in</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">SFO ‚Üí JFK ‚Ä¢ Tomorrow 9:00 AM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(59, 130, 246, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úàÔ∏è</span> Check In</div>
                        </div>`
                    },
                    {
                        label: '2. Seat Selection',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úàÔ∏è Check In</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 10px;">
                                <div style="font-weight: 600;">Flight UA 1234</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-top: 4px;">Seat 12A</div>
                            </div>
                            <div style="background: rgba(59, 130, 246, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Confirm Check-in
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Boarding Pass',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Checked In!</div>
                            <div style="opacity: 0.8;">Pass added to Wallet</div>
                        </div>`
                    }
                ]
            },
            'schedule_purchase': {
                title: 'üìÖ Scheduled Purchase',
                steps: [
                    {
                        label: '1. Product',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Monthly Coffee Subscription</div>
                            <div style="font-size: 20px; font-weight: 700; margin: 10px 0;">$24.99/mo</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÖ</span> Schedule Purchase</div>
                        </div>`
                    },
                    {
                        label: '2. Schedule',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìÖ Schedule Recurring</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 10px;">
                                <div style="opacity: 0.7; font-size: 12px;">Frequency</div>
                                <div style="font-weight: 600;">Monthly</div>
                            </div>
                            <div style="background: rgba(147, 51, 234, 0.2); border: 2px solid rgba(147, 51, 234, 0.6); padding: 12px; border-radius: 10px;">
                                <div style="opacity: 0.7; font-size: 12px;">Next Charge</div>
                                <div style="font-weight: 600;">Nov 29, 2025</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Scheduled',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Subscription Active!</div>
                            <div style="opacity: 0.8;">$24.99 charged monthly</div>
                        </div>`
                    }
                ]
            },
            'add_to_calendar': {
                title: 'üìÖ Add to Calendar',
                steps: [
                    {
                        label: '1. Event Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Field Trip - Oct 25th</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Science Museum Visit</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÖ</span> Add to Calendar</div>
                        </div>`
                    },
                    {
                        label: '2. Event Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìÖ Calendar Event</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 10px;">
                                <div style="font-weight: 600;">Field Trip</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-top: 4px;">October 25, 2025 at 9:00 AM</div>
                            </div>
                            <div style="background: rgba(0, 122, 255, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Add to Calendar
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Added',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Event Added!</div>
                            <div style="opacity: 0.8;">Reminder set for 1 day before</div>
                        </div>`
                    }
                ]
            },
            'pay_form_fee': {
                title: 'üí≥ Pay Form Fee',
                steps: [
                    {
                        label: '1. Fee Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Field Trip Fee</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$15.00</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Per student</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üí≥</span> Pay Now</div>
                        </div>`
                    },
                    {
                        label: '2. Payment',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí≥ Pay Fee</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="opacity: 0.7; font-size: 12px;">Amount</div>
                                <div style="font-size: 28px; font-weight: 700; color: #FFD700;">$15.00</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Pay with Apple Pay
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Payment Sent!</div>
                            <div style="opacity: 0.8;">$15.00 paid</div>
                        </div>`
                    }
                ]
            },
            'view_order': {
                title: 'üì¶ View Order',
                steps: [
                    {
                        label: '1. Order Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Order #112-8493829</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">3 items</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üì¶</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Order Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì¶ Order Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 10px;">
                                <div style="font-weight: 600;">Order #112-8493829</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-top: 4px;">Placed: Oct 20, 2025</div>
                                <div style="font-size: 13px; opacity: 0.7;">Total: $89.97</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'view_invoice': {
                title: 'üìÑ View Invoice',
                steps: [
                    {
                        label: '1. Invoice Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Invoice #INV-2025-1234</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$599.00</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Due: Oct 30, 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÑ</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Invoice Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìÑ Invoice Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span>Invoice #</span>
                                    <span style="font-weight: 600;">INV-2025-1234</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span>Amount</span>
                                    <span style="font-weight: 600; color: #FFD700;">$599.00</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Due Date</span>
                                    <span style="font-weight: 600;">Oct 30, 2025</span>
                                </div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Pay Now
                            </div>
                        </div>`
                    }
                ]
            },
            'set_payment_reminder': {
                title: '‚è∞ Set Payment Reminder',
                steps: [
                    {
                        label: '1. Invoice',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Invoice Due Oct 30</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$599.00</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>‚è∞</span> Remind Me</div>
                        </div>`
                    },
                    {
                        label: '2. Set Reminder',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚è∞ Payment Reminder</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 10px;">
                                <div style="opacity: 0.7; font-size: 12px;">Remind me</div>
                                <div style="font-weight: 600;">2 days before due date</div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Set Reminder
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Reminder Set',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reminder Set!</div>
                            <div style="opacity: 0.8;">You'll be notified on Oct 28</div>
                        </div>`
                    }
                ]
            },
            'contact_support': {
                title: 'üí¨ Contact Support',
                steps: [
                    {
                        label: '1. Support Request',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Need Help?</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Get support for your order</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üí¨</span> Contact</div>
                        </div>`
                    },
                    {
                        label: '2. Send Message',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí¨ Contact Support</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 10px; text-align: center;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Message sent</div>
                                <div style="font-size: 13px; opacity: 0.7;">Expected response: 24 hours</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'add_to_wallet': {
                title: 'üì≤ Add to Wallet',
                steps: [
                    {
                        label: '1. Boarding Pass',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Flight UA 1234</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">SFO ‚Üí JFK</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üì≤</span> Add to Wallet</div>
                        </div>`
                    },
                    {
                        label: '2. Pass Added',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Added to Wallet!</div>
                            <div style="opacity: 0.8;">Boarding pass ready</div>
                        </div>`
                    }
                ]
            },
            'view_itinerary': {
                title: '‚úàÔ∏è View Itinerary',
                steps: [
                    {
                        label: '1. Flight Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Flight UA 1234</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">SFO ‚Üí JFK ‚Ä¢ Tomorrow 9:00 AM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úàÔ∏è</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Itinerary',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úàÔ∏è Flight Itinerary</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 10px;">
                                <div style="font-weight: 600;">UA 1234</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-top: 4px;">SFO Departure: 9:00 AM</div>
                                <div style="font-size: 13px; opacity: 0.7;">JFK Arrival: 5:30 PM</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'quick_reply': {
                title: 'üí¨ Quick Reply',
                steps: [
                    {
                        label: '1. Email Card',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Email Thread</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Reply requested</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üí¨</span> Reply</div>
                        </div>`
                    },
                    {
                        label: '2. Compose Reply',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí¨ Quick Reply</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px; min-height: 80px; color: rgba(255,255,255,0.5); font-style: italic;">
                                Type your reply...
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Send Reply
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Sent',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reply Sent!</div>
                            <div style="opacity: 0.8;">Message delivered</div>
                        </div>`
                    }
                ]
            },
            'confirm_appointment': {
                title: 'üè• Confirm Appointment',
                steps: [
                    {
                        label: '1. Appointment Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Dr. Martinez</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Annual Physical ‚Ä¢ Oct 30, 2pm</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úì</span> Confirm</div>
                        </div>`
                    },
                    {
                        label: '2. Confirmation',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üè• Confirm Appointment</div>
                            <div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Annual Physical</div>
                                <div style="font-size: 14px; opacity: 0.8; margin-bottom: 4px;">Dr. Martinez</div>
                                <div style="font-size: 14px; opacity: 0.8;">Oct 30, 2025 at 2:00 PM</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 14px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Confirm Appointment
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Confirmed',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Appointment Confirmed!</div>
                            <div style="opacity: 0.8;">Calendar updated</div>
                        </div>`
                    }
                ]
            },
            'reply_to_thread': {
                title: '‚Ü©Ô∏è Reply to Thread',
                steps: [
                    {
                        label: '1. Thread Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Re: Project Update</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">3 messages in thread</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>‚Ü©Ô∏è</span> Reply</div>
                        </div>`
                    },
                    {
                        label: '2. Compose Reply',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚Ü©Ô∏è Reply to Thread</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px; min-height: 80px; color: rgba(255,255,255,0.5); font-style: italic;">
                                Type your reply...
                            </div>
                            <div style="background: rgba(100, 149, 237, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Send to Thread
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Sent',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reply Sent!</div>
                            <div style="opacity: 0.8;">Added to thread</div>
                        </div>`
                    }
                ]
            },
            'save_for_later': {
                title: 'üìå Save for Later',
                steps: [
                    {
                        label: '1. Email Card',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Important Email</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Save to review later</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üìå</span> Save</div>
                        </div>`
                    },
                    {
                        label: '2. Saved',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Saved!</div>
                            <div style="opacity: 0.8;">Moved to Saved folder</div>
                        </div>`
                    }
                ]
            },
            'view_details': {
                title: 'üìÑ View Details',
                steps: [
                    {
                        label: '1. Email Card',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Email Summary</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Tap to view full details</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÑ</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Full Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìÑ Full Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Email Content</div>
                                <div style="font-size: 14px; opacity: 0.8; line-height: 1.5;">Full email body with all details, attachments, and metadata displayed here.</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'copy_promo_code': {
                title: 'üéüÔ∏è Copy Promo Code',
                steps: [
                    {
                        label: '1. Promo Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Special Offer!</div>
                            <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin: 10px 0;">SAVE25</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">25% off your order</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üìã</span> Copy Code</div>
                        </div>`
                    },
                    {
                        label: '2. Copied',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Code Copied!</div>
                            <div style="opacity: 0.8;">SAVE25 copied to clipboard</div>
                        </div>`
                    }
                ]
            },
            'cancel_subscription': {
                title: '‚ùå Cancel Subscription',
                steps: [
                    {
                        label: '1. Subscription Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Premium Subscription</div>
                            <div style="font-size: 20px; font-weight: 700; margin: 10px 0;">$9.99/mo</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 59, 48, 0.3); border-radius: 10px; font-size: 13px;"><span>‚ùå</span> Cancel</div>
                        </div>`
                    },
                    {
                        label: '2. Confirm Cancel',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚ùå Cancel Subscription</div>
                            <div style="background: rgba(255, 59, 48, 0.15); border: 2px solid rgba(255, 59, 48, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Are you sure?</div>
                                <div style="font-size: 14px; opacity: 0.8;">Your subscription will end on the current billing date</div>
                            </div>
                            <div style="background: rgba(255, 59, 48, 0.3); padding: 14px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Confirm Cancellation
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Cancelled',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Subscription Cancelled</div>
                            <div style="opacity: 0.8;">No future charges</div>
                        </div>`
                    }
                ]
            },
            'rsvp_yes': {
                title: '‚úÖ Accept Invitation',
                steps: [
                    {
                        label: '1. Invitation',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Event Invitation</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 15, 2025 at 6:00 PM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úÖ</span> Accept</div>
                        </div>`
                    },
                    {
                        label: '2. Accepted',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">RSVP Sent!</div>
                            <div style="opacity: 0.8;">Event added to calendar</div>
                        </div>`
                    }
                ]
            },
            'rsvp_no': {
                title: '‚ùå Decline Invitation',
                steps: [
                    {
                        label: '1. Invitation',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Event Invitation</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 15, 2025 at 6:00 PM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 59, 48, 0.3); border-radius: 10px; font-size: 13px;"><span>‚ùå</span> Decline</div>
                        </div>`
                    },
                    {
                        label: '2. Declined',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">RSVP Sent</div>
                            <div style="opacity: 0.8;">Organizer notified</div>
                        </div>`
                    }
                ]
            },
            'file_insurance_claim': {
                title: 'üè• File Insurance Claim',
                steps: [
                    {
                        label: '1. Medical Bill',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Medical Bill</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$450.00</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Submit to insurance</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üè•</span> File Claim</div>
                        </div>`
                    },
                    {
                        label: '2. Review Claim',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üè• Insurance Claim</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="opacity: 0.7; font-size: 12px;">Claim Amount</div>
                                <div style="font-size: 28px; font-weight: 700; color: #FFD700;">$450.00</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-top: 8px;">Provider: Dr. Martinez</div>
                            </div>
                            <div style="background: rgba(0, 122, 255, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Submit Claim
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Submitted',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Claim Submitted!</div>
                            <div style="opacity: 0.8;">Processing in 7-10 days</div>
                        </div>`
                    }
                ]
            },
            'view_pickup_details': {
                title: 'üíä View Pickup Details',
                steps: [
                    {
                        label: '1. Prescription Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Prescription Ready</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">CVS Pharmacy</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üíä</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Pickup Info',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üíä Pickup Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">CVS Pharmacy</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">123 Main St</div>
                                <div style="font-size: 13px; opacity: 0.7;">Ready for pickup</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'pickup_prescription': {
                title: 'üíä Pickup Prescription',
                steps: [
                    {
                        label: '1. Prescription Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Prescription Ready</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">CVS Pharmacy</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üíä</span> Pickup</div>
                        </div>`
                    },
                    {
                        label: '2. Pickup Confirmed',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Ready for Pickup!</div>
                            <div style="opacity: 0.8;">Directions added to Maps</div>
                        </div>`
                    }
                ]
            },
            'view_practice_details': {
                title: '‚öΩ View Practice Details',
                steps: [
                    {
                        label: '1. Practice Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Soccer Practice</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Saturday 10:00 AM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>‚öΩ</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Practice Info',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚öΩ Practice Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Soccer Practice</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Saturday, 10:00 AM</div>
                                <div style="font-size: 13px; opacity: 0.7;">Central Park Field 3</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'accept_school_event': {
                title: 'üéì Accept School Event',
                steps: [
                    {
                        label: '1. Event Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Parent-Teacher Conference</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 20, 2025 at 3:00 PM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úì</span> Accept</div>
                        </div>`
                    },
                    {
                        label: '2. Add to Calendar',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üéì Accept Event</div>
                            <div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Parent-Teacher Conference</div>
                                <div style="font-size: 14px; opacity: 0.8;">Nov 20, 2025 at 3:00 PM</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 14px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Accept & Add to Calendar
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Accepted',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Event Accepted!</div>
                            <div style="opacity: 0.8;">Added to your calendar</div>
                        </div>`
                    }
                ]
            },
            'view_team_announcement': {
                title: 'üì£ View Team Announcement',
                steps: [
                    {
                        label: '1. Announcement Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Team Announcement</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Important update from coach</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üì£</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Announcement',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì£ Team Announcement</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Game Schedule Update</div>
                                <div style="font-size: 14px; opacity: 0.8; line-height: 1.5;">Saturday's game has been rescheduled to 2:00 PM due to field availability.</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'write_review': {
                title: '‚≠ê Write Review',
                steps: [
                    {
                        label: '1. Review Request',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">How was your order?</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Share your feedback</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 204, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>‚≠ê</span> Write Review</div>
                        </div>`
                    },
                    {
                        label: '2. Rating & Review',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚≠ê Write Review</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="display: flex; gap: 8px; margin-bottom: 12px; justify-content: center;">
                                    <span style="font-size: 28px;">‚≠ê</span>
                                    <span style="font-size: 28px;">‚≠ê</span>
                                    <span style="font-size: 28px;">‚≠ê</span>
                                    <span style="font-size: 28px;">‚≠ê</span>
                                    <span style="font-size: 28px;">‚≠ê</span>
                                </div>
                                <div style="min-height: 60px; color: rgba(255,255,255,0.5); font-style: italic; text-align: center;">
                                    Write your review...
                                </div>
                            </div>
                            <div style="background: rgba(255, 204, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Submit Review
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Submitted',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Review Submitted!</div>
                            <div style="opacity: 0.8;">Thank you for your feedback</div>
                        </div>`
                    }
                ]
            },
            'rate_product': {
                title: '‚≠ê Rate Product',
                steps: [
                    {
                        label: '1. Rating Request',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Rate your purchase</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Quick star rating</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 204, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>‚≠ê</span> Rate</div>
                        </div>`
                    },
                    {
                        label: '2. Star Rating',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚≠ê Rate Product</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 24px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="display: flex; gap: 12px; justify-content: center;">
                                    <span style="font-size: 36px;">‚≠ê</span>
                                    <span style="font-size: 36px;">‚≠ê</span>
                                    <span style="font-size: 36px;">‚≠ê</span>
                                    <span style="font-size: 36px;">‚≠ê</span>
                                    <span style="font-size: 36px;">‚≠ê</span>
                                </div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Rated',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Rating Submitted!</div>
                            <div style="opacity: 0.8;">5 stars</div>
                        </div>`
                    }
                ]
            },
            'set_reminder': {
                title: '‚è∞ Set Reminder',
                steps: [
                    {
                        label: '1. Sale Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Flash Sale Tomorrow</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 1, 2025 at 9:00 AM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>‚è∞</span> Remind Me</div>
                        </div>`
                    },
                    {
                        label: '2. Reminder Set',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reminder Set!</div>
                            <div style="opacity: 0.8;">You'll be notified tomorrow at 9:00 AM</div>
                        </div>`
                    }
                ]
            },
            'set_price_alert': {
                title: 'üí∞ Set Price Alert',
                steps: [
                    {
                        label: '1. Product Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Product Price Tracker</div>
                            <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin: 10px 0;">$99.99</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üí∞</span> Set Alert</div>
                        </div>`
                    },
                    {
                        label: '2. Alert Set',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Price Alert Set!</div>
                            <div style="opacity: 0.8;">We'll notify you when price drops</div>
                        </div>`
                    }
                ]
            },
            'notify_restock': {
                title: 'üì¶ Restock Notification',
                steps: [
                    {
                        label: '1. Out of Stock',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Item Currently Unavailable</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Get notified when back in stock</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üîî</span> Notify Me</div>
                        </div>`
                    },
                    {
                        label: '2. Notification Set',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Notification Set!</div>
                            <div style="opacity: 0.8;">We'll email you when restocked</div>
                        </div>`
                    }
                ]
            },
            'reply_to_ticket': {
                title: 'üí¨ Reply to Ticket',
                steps: [
                    {
                        label: '1. Support Ticket',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Support Ticket #12345</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Reply from support team</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üí¨</span> Reply</div>
                        </div>`
                    },
                    {
                        label: '2. Compose Reply',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí¨ Reply to Ticket</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px; min-height: 80px; color: rgba(255,255,255,0.5); font-style: italic;">
                                Type your reply...
                            </div>
                            <div style="background: rgba(147, 51, 234, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Send Reply
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Sent',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reply Sent!</div>
                            <div style="opacity: 0.8;">Ticket updated</div>
                        </div>`
                    }
                ]
            },
            'contact_driver': {
                title: 'üöó Contact Driver',
                steps: [
                    {
                        label: '1. Delivery Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Out for Delivery</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Contact your driver</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üìû</span> Contact</div>
                        </div>`
                    },
                    {
                        label: '2. Driver Info',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üöó Contact Driver</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Driver: John</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">ETA: 10 minutes</div>
                            </div>
                            <div style="display: flex; gap: 12px;">
                                <div style="flex: 1; background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                    üìû Call
                                </div>
                                <div style="flex: 1; background: rgba(0, 122, 255, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                    üí¨ Message
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'view_introduction': {
                title: 'üëã View Introduction',
                steps: [
                    {
                        label: '1. Intro Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Introduction</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Someone wants to connect</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üëã</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Introduction',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üëã Introduction</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Sarah Johnson</div>
                                <div style="font-size: 14px; opacity: 0.8; line-height: 1.5;">Would like to connect with you regarding a potential collaboration opportunity.</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'schedule_payment': {
                title: 'üìÖ Schedule Payment',
                steps: [
                    {
                        label: '1. Bill Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Monthly Bill</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$125.00</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Due Nov 15, 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÖ</span> Schedule</div>
                        </div>`
                    },
                    {
                        label: '2. Set Date',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìÖ Schedule Payment</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="opacity: 0.7; font-size: 12px;">Amount</div>
                                <div style="font-size: 28px; font-weight: 700; color: #FFD700; margin-bottom: 12px;">$125.00</div>
                                <div style="opacity: 0.7; font-size: 12px;">Payment Date</div>
                                <div style="font-weight: 600;">Nov 15, 2025</div>
                            </div>
                            <div style="background: rgba(147, 51, 234, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Schedule Automatic Payment
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Scheduled',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Payment Scheduled!</div>
                            <div style="opacity: 0.8;">Auto-pay on Nov 15, 2025</div>
                        </div>`
                    }
                ]
            },
            'view_benefits': {
                title: 'üéÅ View Benefits',
                steps: [
                    {
                        label: '1. Subscription Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your Subscription Benefits</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">See what's included</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üéÅ</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Benefits List',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üéÅ Your Benefits</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="margin-bottom: 12px;">
                                    <div style="font-weight: 600; margin-bottom: 4px;">‚úì Free Shipping</div>
                                    <div style="font-size: 13px; opacity: 0.7;">On all orders</div>
                                </div>
                                <div style="margin-bottom: 12px;">
                                    <div style="font-weight: 600; margin-bottom: 4px;">‚úì Early Access</div>
                                    <div style="font-size: 13px; opacity: 0.7;">To new products</div>
                                </div>
                                <div>
                                    <div style="font-weight: 600; margin-bottom: 4px;">‚úì 20% Discount</div>
                                    <div style="font-size: 13px; opacity: 0.7;">On all purchases</div>
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'view_onboarding_info': {
                title: 'üëî View Onboarding Info',
                steps: [
                    {
                        label: '1. Onboarding Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Welcome to the Team!</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Your first day info</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üëî</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Onboarding Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üëî Onboarding Information</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">First Day: Nov 1, 2025</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Location: Building A, Floor 3</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Time: 9:00 AM</div>
                                <div style="font-size: 13px; opacity: 0.7;">Manager: Sarah Johnson</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'view_mortgage_details': {
                title: 'üè† View Mortgage Details',
                steps: [
                    {
                        label: '1. Mortgage Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Refinancing Offer</div>
                            <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin: 10px 0;">3.25% APR</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">See if you qualify</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üè†</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Mortgage Info',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üè† Mortgage Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span>Interest Rate</span>
                                    <span style="font-weight: 600; color: #FFD700;">3.25% APR</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span>Estimated Payment</span>
                                    <span style="font-weight: 600;">$1,850/mo</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Loan Term</span>
                                    <span style="font-weight: 600;">30 years</span>
                                </div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Check Eligibility
                            </div>
                        </div>`
                    }
                ]
            },
            'view_legal_document': {
                title: '‚öñÔ∏è View Legal Document',
                steps: [
                    {
                        label: '1. Document Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Legal Document Received</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Terms of Service Update</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÑ</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Document Preview',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚öñÔ∏è Legal Document</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Terms of Service Update</div>
                                <div style="font-size: 14px; opacity: 0.8; line-height: 1.5; margin-bottom: 12px;">We've updated our terms to better serve you...</div>
                                <div style="font-size: 12px; opacity: 0.6;">Last updated: Oct 31, 2025</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'view_newsletter_summary': {
                title: 'üì∞ Newsletter Summary',
                steps: [
                    {
                        label: '1. Newsletter Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Weekly Newsletter</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">AI-generated summary</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üì∞</span> View Summary</div>
                        </div>`
                    },
                    {
                        label: '2. AI Summary',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì∞ Newsletter Summary</div>
                            <div style="background: rgba(147, 51, 234, 0.15); border: 2px solid rgba(147, 51, 234, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                                    <span>‚ú®</span>
                                    <div style="font-weight: 600; font-size: 12px; text-transform: uppercase; opacity: 0.8;">AI Summary</div>
                                </div>
                                <div style="font-size: 14px; opacity: 0.9; line-height: 1.5;">
                                    ‚Ä¢ Top story: New product launch announced<br>
                                    ‚Ä¢ Industry update: Market trends analysis<br>
                                    ‚Ä¢ Expert tip: Best practices for growth
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'buy_again': {
                title: 'üõí Buy Again',
                steps: [
                    {
                        label: '1. Order Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your Recent Order</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Loved it? Order again!</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üõí</span> Buy Again</div>
                        </div>`
                    },
                    {
                        label: '2. Add to Cart',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üõí Reorder Items</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Previous Order #12345</div>
                                <div style="font-size: 13px; opacity: 0.7;">3 items</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üõí Add to Cart
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Order Placed',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Order Placed!</div>
                            <div style="opacity: 0.8;">Items added to cart</div>
                        </div>`
                    }
                ]
            },
            'reorder_item': {
                title: 'üîÑ Reorder Item',
                steps: [
                    {
                        label: '1. Restock Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Back in Stock!</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Your favorite item is available</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üîÑ</span> Reorder</div>
                        </div>`
                    },
                    {
                        label: '2. Confirm Order',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üîÑ Confirm Reorder</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Product Name</div>
                                <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin: 8px 0;">$29.99</div>
                                <div style="font-size: 13px; opacity: 0.7;">Qty: 1</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Confirm Reorder
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Ordered',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reorder Complete!</div>
                            <div style="opacity: 0.8;">Item ordered successfully</div>
                        </div>`
                    }
                ]
            },
            'return_item': {
                title: 'üì¶ Return Item',
                steps: [
                    {
                        label: '1. Order Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your Order</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Need to return something?</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üì¶</span> Return</div>
                        </div>`
                    },
                    {
                        label: '2. Select Reason',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì¶ Return Reason</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(255, 149, 0, 0.4);">
                                <div style="font-weight: 600;">Wrong size</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div>Changed my mind</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div>Damaged/Defective</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Print Label',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì¶ Return Label</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Return label generated</div>
                                <div style="font-size: 13px; opacity: 0.7;">Tracking: 1Z999AA10123456784</div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üñ®Ô∏è Print Label
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Return Initiated',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Return Initiated!</div>
                            <div style="opacity: 0.8;">Ship within 30 days</div>
                        </div>`
                    }
                ]
            },
            'complete_cart': {
                title: 'üõçÔ∏è Complete Cart',
                steps: [
                    {
                        label: '1. Cart Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Items in Your Cart</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Complete your purchase</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üõçÔ∏è</span> Checkout</div>
                        </div>`
                    },
                    {
                        label: '2. Review Cart',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üõçÔ∏è Review Order</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="margin-bottom: 8px;">
                                    <div style="font-weight: 600;">Subtotal</div>
                                    <div style="font-size: 20px; color: #FFD700;">$125.00</div>
                                </div>
                                <div style="font-size: 13px; opacity: 0.7;">3 items in cart</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üí≥ Proceed to Checkout
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Order Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Order Complete!</div>
                            <div style="opacity: 0.8;">Confirmation sent to email</div>
                        </div>`
                    }
                ]
            },
            'claim_deal': {
                title: 'üéÅ Claim Deal',
                steps: [
                    {
                        label: '1. Promo Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Special Offer!</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">50% OFF</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Limited time only</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 215, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üéÅ</span> Claim</div>
                        </div>`
                    },
                    {
                        label: '2. Confirm Claim',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üéÅ Claim Your Deal</div>
                            <div style="background: rgba(255, 215, 0, 0.15); border: 2px solid rgba(255, 215, 0, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">50% OFF Your Order</div>
                                <div style="font-size: 13px; opacity: 0.8;">Valid for 24 hours</div>
                            </div>
                            <div style="background: rgba(255, 215, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Activate Deal
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Code Received',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Deal Claimed!</div>
                            <div style="opacity: 0.8;">Code: SAVE50</div>
                        </div>`
                    }
                ]
            },
            'view_product': {
                title: 'üëÄ View Product',
                steps: [
                    {
                        label: '1. Product Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">New Arrival</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Check out this product</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üëÄ</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Product Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üëÄ Product Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Premium Wireless Headphones</div>
                                <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 8px 0;">$199.99</div>
                                <div style="font-size: 13px; opacity: 0.7;">‚≠ê 4.8/5 (2,341 reviews)</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'redeem_rewards': {
                title: 'üéâ Redeem Rewards',
                steps: [
                    {
                        label: '1. Rewards Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Rewards Available</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">5,000 points</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Ready to redeem</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 215, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üéâ</span> Redeem</div>
                        </div>`
                    },
                    {
                        label: '2. Select Reward',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üéâ Choose Reward</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(255, 215, 0, 0.4);">
                                <div style="font-weight: 600;">$50 Gift Card</div>
                                <div style="font-size: 12px; opacity: 0.7;">5,000 points</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">$25 Gift Card</div>
                                <div style="font-size: 12px; opacity: 0.7;">2,500 points</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Confirm Redemption',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üéâ Confirm</div>
                            <div style="background: rgba(255, 215, 0, 0.15); border: 2px solid rgba(255, 215, 0, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">$50 Gift Card</div>
                                <div style="font-size: 13px; opacity: 0.8;">Cost: 5,000 points</div>
                            </div>
                            <div style="background: rgba(255, 215, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Redeem Reward
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Redeemed',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Redeemed!</div>
                            <div style="opacity: 0.8;">Gift card sent to email</div>
                        </div>`
                    }
                ]
            },
            'view_announcement': {
                title: 'üì¢ View Announcement',
                steps: [
                    {
                        label: '1. Announcement Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Important Update</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">New features available</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üì¢</span> Read</div>
                        </div>`
                    },
                    {
                        label: '2. Announcement Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì¢ Brand Update</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">What's New</div>
                                <div style="font-size: 14px; opacity: 0.9; line-height: 1.5;">
                                    ‚Ä¢ New product features<br>
                                    ‚Ä¢ Improved performance<br>
                                    ‚Ä¢ Enhanced user experience
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'track_delivery': {
                title: 'üöö Track Delivery',
                steps: [
                    {
                        label: '1. Delivery Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Out for Delivery</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Arriving today</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üöö</span> Track</div>
                        </div>`
                    },
                    {
                        label: '2. Live Tracking',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üöö Live Tracking</div>
                            <div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Driver is 5 min away</div>
                                <div style="font-size: 13px; opacity: 0.8;">Order #12345</div>
                            </div>
                            <div style="text-align: center; opacity: 0.7; font-size: 12px;">üó∫Ô∏è Map view</div>
                        </div>`
                    },
                    {
                        label: '3. Delivery Status',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Arriving Soon!</div>
                            <div style="opacity: 0.8;">ETA: 3:45 PM</div>
                        </div>`
                    }
                ]
            },
            'track_return': {
                title: 'üì¶ Track Return',
                steps: [
                    {
                        label: '1. Return Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Return Shipped</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Track your return</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üì¶</span> Track</div>
                        </div>`
                    },
                    {
                        label: '2. Return Status',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì¶ Return Status</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">In Transit</div>
                                <div style="font-size: 13px; opacity: 0.7;">Tracking: 1Z999AA10123456784</div>
                                <div style="font-size: 13px; opacity: 0.7;">Expected: Nov 5, 2025</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Refund Timeline',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì¶ Refund Info</div>
                            <div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Refund Amount: $49.99</div>
                                <div style="font-size: 13px; opacity: 0.8;">Processing 3-5 business days after receipt</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'print_return_label': {
                title: 'üñ®Ô∏è Print Return Label',
                steps: [
                    {
                        label: '1. Return Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Return Approved</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Print your label</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üñ®Ô∏è</span> Print</div>
                        </div>`
                    },
                    {
                        label: '2. Generate Label',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üñ®Ô∏è Shipping Label</div>
                            <div style="background: rgba(255,255,255,0.95); padding: 16px; border-radius: 10px; margin-bottom: 12px; color: #000;">
                                <div style="font-weight: 600; margin-bottom: 4px;">USPS Priority Mail</div>
                                <div style="font-size: 11px; opacity: 0.7;">1Z999AA10123456784</div>
                                <div style="border: 1px dashed #ccc; padding: 8px; margin-top: 8px; font-size: 10px;">
                                    [Barcode]
                                </div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üñ®Ô∏è Print Label
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Ready to Ship',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Label Ready!</div>
                            <div style="opacity: 0.8;">Attach to package</div>
                        </div>`
                    }
                ]
            },
            'view_warranty': {
                title: 'üõ°Ô∏è View Warranty',
                steps: [
                    {
                        label: '1. Product Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Warranty Information</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Check coverage</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üõ°Ô∏è</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Warranty Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üõ°Ô∏è Warranty Coverage</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">2-Year Limited Warranty</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Expires: Nov 1, 2026</div>
                                <div style="font-size: 13px; opacity: 0.7;">Coverage: Parts & Labor</div>
                            </div>
                        </div>`
                    }
                ]
            }
            'download_receipt': {
                title: 'üì• Download Receipt',
                steps: [
                    {
                        label: '1. Payment Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Payment Received</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Download your receipt</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üì•</span> Download</div>
                        </div>`
                    },
                    {
                        label: '2. Receipt Preview',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì• Receipt</div>
                            <div style="background: rgba(255,255,255,0.95); padding: 16px; border-radius: 10px; margin-bottom: 12px; color: #000;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Receipt #R-2025-001</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Date: Nov 1, 2025</div>
                                <div style="font-size: 20px; font-weight: 700; color: #0066CC; margin-top: 8px;">$599.00</div>
                            </div>
                            <div style="background: rgba(100, 149, 237, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üì• Download PDF
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Downloaded',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Downloaded!</div>
                            <div style="opacity: 0.8;">Receipt saved</div>
                        </div>`
                    }
                ]
            },
            'view_statement': {
                title: 'üìä View Statement',
                steps: [
                    {
                        label: '1. Statement Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Monthly Statement</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">October 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìä</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Statement Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìä Account Statement</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="margin-bottom: 12px;">
                                    <div style="font-size: 12px; opacity: 0.7;">Previous Balance</div>
                                    <div style="font-weight: 600;">$1,234.56</div>
                                </div>
                                <div style="margin-bottom: 12px;">
                                    <div style="font-size: 12px; opacity: 0.7;">New Charges</div>
                                    <div style="font-weight: 600;">$567.89</div>
                                </div>
                                <div style="border-top: 1px solid rgba(255,255,255,0.2); padding-top: 12px;">
                                    <div style="font-size: 12px; opacity: 0.7;">Current Balance</div>
                                    <div style="font-size: 24px; font-weight: 700; color: #FFD700;">$1,802.45</div>
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'update_payment': {
                title: 'üí≥ Update Payment',
                steps: [
                    {
                        label: '1. Payment Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Update Payment Method</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Card ending in 1234 expires soon</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üí≥</span> Update</div>
                        </div>`
                    },
                    {
                        label: '2. Select Method',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí≥ Payment Method</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(100, 149, 237, 0.4);">
                                <div style="font-weight: 600;">üí≥ Credit Card</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">üè¶ Bank Account</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;"> Apple Pay</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Enter Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí≥ Card Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-size: 12px; opacity: 0.7; margin-bottom: 4px;">Card Number</div>
                                <div>‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 5678</div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 12px;">
                                <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px;">
                                    <div style="font-size: 12px; opacity: 0.7;">Expiry</div>
                                    <div>12/27</div>
                                </div>
                                <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px;">
                                    <div style="font-size: 12px; opacity: 0.7;">CVV</div>
                                    <div>‚Ä¢‚Ä¢‚Ä¢</div>
                                </div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Save Card
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Updated',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Payment Updated!</div>
                            <div style="opacity: 0.8;">Card saved successfully</div>
                        </div>`
                    }
                ]
            },
            'update_payment_method': {
                title: 'üí≥ Update Payment Method',
                steps: [
                    {
                        label: '1. Account Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Payment Method Expiring</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Update to continue service</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üí≥</span> Update</div>
                        </div>`
                    },
                    {
                        label: '2. Choose Method',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí≥ Choose Payment</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(52, 199, 89, 0.4);">
                                <div style="font-weight: 600;"> Apple Pay</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">üí≥ New Card</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Confirm',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí≥ Confirm Change</div>
                            <div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">New Default Payment</div>
                                <div style="font-size: 13px; opacity: 0.8;"> Apple Pay</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Confirm
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Updated',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Method Updated!</div>
                            <div style="opacity: 0.8;">Default payment changed</div>
                        </div>`
                    }
                ]
            },
            'dispute_transaction': {
                title: '‚ö†Ô∏è Dispute Transaction',
                steps: [
                    {
                        label: '1. Transaction Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Unrecognized Transaction</div>
                            <div style="font-size: 20px; font-weight: 700; color: #FF3B30; margin: 10px 0;">$234.56</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 1, 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 59, 48, 0.3); border-radius: 10px; font-size: 13px;"><span>‚ö†Ô∏è</span> Dispute</div>
                        </div>`
                    },
                    {
                        label: '2. Select Reason',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚ö†Ô∏è Dispute Reason</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(255, 59, 48, 0.4);">
                                <div style="font-weight: 600;">Fraudulent Charge</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">Not Received</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">Wrong Amount</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Submit Evidence',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚ö†Ô∏è Additional Info</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-size: 12px; opacity: 0.7; margin-bottom: 8px;">Description (optional)</div>
                                <div style="font-size: 14px;">I did not authorize this transaction...</div>
                            </div>
                            <div style="background: rgba(255, 59, 48, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üì§ Submit Dispute
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Filed',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Dispute Filed!</div>
                            <div style="opacity: 0.8;">Review in 5-7 days</div>
                        </div>`
                    }
                ]
            },
            'view_credit_report': {
                title: 'üìà View Credit Report',
                steps: [
                    {
                        label: '1. Report Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Credit Report Available</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Check your score</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üìà</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Verify Identity',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìà Verify Identity</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-size: 12px; opacity: 0.7; margin-bottom: 8px;">Last 4 of SSN</div>
                                <div>‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 1234</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Verify
                            </div>
                        </div>`
                    },
                    {
                        label: '3. View Report',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìà Credit Score</div>
                            <div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px; text-align: center;">
                                <div style="font-size: 48px; font-weight: 700; color: #34C759; margin-bottom: 8px;">750</div>
                                <div style="font-size: 14px; opacity: 0.8;">Good Credit</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'view_portfolio': {
                title: 'üíº View Portfolio',
                steps: [
                    {
                        label: '1. Portfolio Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Portfolio Update</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">October 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üíº</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Portfolio Dashboard',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üíº Portfolio</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="margin-bottom: 12px;">
                                    <div style="font-size: 12px; opacity: 0.7;">Total Value</div>
                                    <div style="font-size: 28px; font-weight: 700; color: #FFD700;">$52,341.89</div>
                                </div>
                                <div style="font-size: 13px; opacity: 0.7; color: #34C759;">
                                    ‚Üë +$2,450.32 (4.9%)
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'verify_transaction': {
                title: '‚úÖ Verify Transaction',
                steps: [
                    {
                        label: '1. Transaction Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Verify This Purchase?</div>
                            <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin: 10px 0;">$123.45</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 1, 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úÖ</span> Verify</div>
                        </div>`
                    },
                    {
                        label: '2. Confirm/Deny',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úÖ Was This You?</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Amazon.com</div>
                                <div style="font-size: 20px; color: #FFD700; margin: 8px 0;">$123.45</div>
                                <div style="font-size: 13px; opacity: 0.7;">Nov 1, 2025 3:42 PM</div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                                <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                    ‚úì Yes, It's Me
                                </div>
                                <div style="background: rgba(255, 59, 48, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                    ‚úó Not Me
                                </div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Verified',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Transaction Verified!</div>
                            <div style="opacity: 0.8;">Thank you for confirming</div>
                        </div>`
                    }
                ]
            },
            'view_refund_status': {
                title: 'üí∞ View Refund',
                steps: [
                    {
                        label: '1. Refund Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Refund Processing</div>
                            <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin: 10px 0;">$49.99</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Track status</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üí∞</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Refund Timeline',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí∞ Refund Status</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 12px;">Processing</div>
                                <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin-bottom: 8px;">$49.99</div>
                                <div style="font-size: 13px; opacity: 0.7;">Expected: 3-5 business days</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'pay_property_tax': {
                title: 'üè† Pay Property Tax',
                steps: [
                    {
                        label: '1. Tax Bill Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Property Tax Due</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$2,450.00</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Due: Dec 31, 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üè†</span> Pay</div>
                        </div>`
                    },
                    {
                        label: '2. Review Amount',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üè† Tax Payment</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">123 Main St, Anytown, CA</div>
                                <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 8px 0;">$2,450.00</div>
                                <div style="font-size: 13px; opacity: 0.7;">Tax Year: 2025</div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üí≥ Pay Now
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Payment Processing',
                        html: `<div class="modal-preview-card" style="background: rgba(59, 130, 246, 0.15); border-color: rgba(59, 130, 246, 0.4);">
                            <div style="width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.2); border-top-color: #3B82F6; border-radius: 50%; margin: 0 auto 16px; animation: spin 1s linear infinite;"></div>
                            <div style="text-align: center; font-weight: 600;">Processing Payment...</div>
                        </div>`
                    },
                    {
                        label: '4. Receipt',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Payment Complete!</div>
                            <div style="opacity: 0.8;">Receipt sent to email</div>
                        </div>`
                    }
                ]
            },
            'pay_utility_bill': {
                title: 'üí° Pay Utility Bill',
                steps: [
                    {
                        label: '1. Bill Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Utility Bill Due</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$145.67</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Due: Nov 15, 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üí°</span> Pay</div>
                        </div>`
                    },
                    {
                        label: '2. Confirm Amount',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí° Pay Bill</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Electric Service</div>
                                <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 8px 0;">$145.67</div>
                                <div style="font-size: 13px; opacity: 0.7;">Account: ****5678</div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üí≥ Pay with Apple Pay
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Processing',
                        html: `<div class="modal-preview-card" style="background: rgba(59, 130, 246, 0.15); border-color: rgba(59, 130, 246, 0.4);">
                            <div style="width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.2); border-top-color: #3B82F6; border-radius: 50%; margin: 0 auto 16px; animation: spin 1s linear infinite;"></div>
                            <div style="text-align: center; font-weight: 600;">Processing Payment...</div>
                        </div>`
                    },
                    {
                        label: '4. Paid',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Bill Paid!</div>
                            <div style="opacity: 0.8;">Confirmation sent</div>
                        </div>`
                    }
                ]
            },
            'download_tax_document': {
                title: 'üìë Download Tax Form',
                steps: [
                    {
                        label: '1. Tax Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Tax Documents Available</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">2024 Forms Ready</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìë</span> Download</div>
                        </div>`
                    },
                    {
                        label: '2. Select Form',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìë Tax Documents</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(100, 149, 237, 0.4);">
                                <div style="font-weight: 600;">Form 1099-INT</div>
                                <div style="font-size: 12px; opacity: 0.7;">Tax Year 2024</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">Form 1099-DIV</div>
                                <div style="font-size: 12px; opacity: 0.7;">Tax Year 2024</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Downloaded',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Downloaded!</div>
                            <div style="opacity: 0.8;">Form 1099-INT.pdf</div>
                        </div>`
                    }
                ]
            },
            'manage_subscription': {
                title: '‚öôÔ∏è Manage Subscription',
                steps: [
                    {
                        label: '1. Subscription Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your Subscription</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Manage settings</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>‚öôÔ∏è</span> Manage</div>
                        </div>`
                    },
                    {
                        label: '2. Subscription Settings',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚öôÔ∏è Subscription</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Premium Plan</div>
                                <div style="font-size: 20px; color: #FFD700; margin: 8px 0;">$9.99/mo</div>
                                <div style="font-size: 13px; opacity: 0.7;">Renews Dec 1, 2025</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">Change Plan</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">Update Payment</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Updated',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Settings Updated!</div>
                            <div style="opacity: 0.8;">Changes saved</div>
                        </div>`
                    }
                ]
            },
            'upgrade_subscription': {
                title: '‚≠ê Upgrade Subscription',
                steps: [
                    {
                        label: '1. Upgrade Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Unlock Premium Features</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Upgrade today!</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 215, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>‚≠ê</span> Upgrade</div>
                        </div>`
                    },
                    {
                        label: '2. Select Plan',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚≠ê Choose Plan</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">Pro Plan</div>
                                <div style="font-size: 20px; color: #FFD700; margin: 8px 0;">$19.99/mo</div>
                            </div>
                            <div style="background: rgba(255, 215, 0, 0.15); border: 2px solid rgba(255, 215, 0, 0.4); padding: 16px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">Premium Plan</div>
                                <div style="font-size: 20px; color: #FFD700; margin: 8px 0;">$29.99/mo</div>
                                <div style="font-size: 12px; opacity: 0.8;">‚úì All features</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Payment',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚≠ê Confirm Upgrade</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Premium Plan</div>
                                <div style="font-size: 24px; color: #FFD700; margin: 8px 0;">$29.99/mo</div>
                                <div style="font-size: 13px; opacity: 0.7;">Billed monthly</div>
                            </div>
                            <div style="background: rgba(255, 215, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üí≥ Upgrade Now
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Upgraded',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Upgraded!</div>
                            <div style="opacity: 0.8;">Welcome to Premium</div>
                        </div>`
                    }
                ]
            },        };

        // Compound Action Flows (Multi-Step Wizards)
        const COMPOUND_FLOWS = {
            'sign_form_with_payment': {
                title: '‚úçÔ∏èüí≥ Sign & Pay Permission Form',
                isPremium: true,
                requiresResponse: true,
                endBehavior: 'emailComposer',
                steps: [
                    {
                        label: '1. Permission Form',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Field Trip Permission & Fee</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 8px;">Fee: $45.00</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úçÔ∏èüí≥</span> Sign & Pay</div>
                        </div>`
                    },
                    {
                        label: '2. Draw Signature',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚úçÔ∏è Step 1 of 3</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Sign Permission Form</div>
                            <div style="background: rgba(255,255,255,0.95); height: 80px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #999; font-style: italic;">
                                Draw signature here
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Pay Fee',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üí≥ Step 2 of 3</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Pay Form Fee</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-size: 24px; font-weight: 700; color: #FFD700;">$45.00</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Pay with Apple Pay
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Email Confirmation',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚úâÔ∏è Step 3 of 3</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Send Confirmation</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-size: 12px; opacity: 0.7; margin-bottom: 4px;">To: teacher@school.edu</div>
                                <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">Re: Permission Form - Signed & Paid</div>
                                <div style="font-size: 13px; opacity: 0.8;">I've signed the permission form and completed the $45.00 payment via Apple Pay.</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '5. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">All Done!</div>
                            <div style="opacity: 0.8;">Form signed, paid & confirmed</div>
                        </div>`
                    }
                ]
            },
            'sign_form_with_calendar': {
                title: '‚úçÔ∏èüìÖ Sign Form & Add to Calendar',
                isPremium: true,
                requiresResponse: true,
                endBehavior: 'emailComposer',
                steps: [
                    {
                        label: '1. Permission Form',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Field Trip - Nov 15, 2025</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 8px;">Science Museum</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úçÔ∏èüìÖ</span> Sign & Calendar</div>
                        </div>`
                    },
                    {
                        label: '2. Sign Form',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚úçÔ∏è Step 1 of 3</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Sign Permission Form</div>
                            <div style="background: rgba(255,255,255,0.95); height: 60px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #999; font-style: italic;">
                                Signature applied
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Add to Calendar',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üìÖ Step 2 of 3</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Add Event to Calendar</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Field Trip - Science Museum</div>
                                <div style="font-size: 13px; opacity: 0.8;">Friday, Nov 15, 2025 ‚Ä¢ 9:00 AM</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Send Confirmation',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚úâÔ∏è Step 3 of 3</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Confirm with Teacher</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">Re: Field Trip - Signed & Calendar Updated</div>
                                <div style="font-size: 13px; opacity: 0.8;">I've signed the form and added the event to my calendar for Nov 15.</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '5. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">All Set!</div>
                            <div style="opacity: 0.8;">Signed, scheduled & confirmed</div>
                        </div>`
                    }
                ]
            },
            'pay_invoice_with_confirmation': {
                title: 'üí≥‚úâÔ∏è Pay Invoice & Send Confirmation',
                isPremium: true,
                requiresResponse: true,
                endBehavior: 'emailComposer',
                steps: [
                    {
                        label: '1. Invoice Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Invoice #INV-2025-1234</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700;">$1,299.00</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üí≥‚úâÔ∏è</span> Pay & Confirm</div>
                        </div>`
                    },
                    {
                        label: '2. Complete Payment',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üí≥ Step 1 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Pay Invoice</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-size: 28px; font-weight: 700; color: #FFD700;">$1,299.00</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Pay with Apple Pay
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Email Receipt',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚úâÔ∏è Step 2 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Send Payment Confirmation</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">Re: Invoice INV-2025-1234 - Payment Sent</div>
                                <div style="font-size: 13px; opacity: 0.8;">I've completed payment of $1,299.00 for invoice INV-2025-1234 via Apple Pay. Please confirm receipt.</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Payment Sent!</div>
                            <div style="opacity: 0.8;">Paid & confirmation sent</div>
                        </div>`
                    }
                ]
            },
            'track_with_calendar': {
                title: 'üì¶üìÖ Track Package & Schedule Delivery',
                isPremium: true,
                requiresResponse: false,
                endBehavior: 'returnToApp',
                steps: [
                    {
                        label: '1. Shipping Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your order has shipped</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 8px;">Delivers Friday, Nov 1</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üì¶üìÖ</span> Track & Schedule</div>
                        </div>`
                    },
                    {
                        label: '2. Track Package',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üì¶ Step 1 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Package Tracking</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Order #819-4873290-1892885</div>
                                <div style="font-size: 13px; opacity: 0.8;">üìç Out for delivery</div>
                                <div style="font-size: 13px; opacity: 0.8; margin-top: 8px;">üöö Arrives: Friday, Nov 1 by 8:00 PM</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Add to Calendar',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üìÖ Step 2 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Schedule Delivery</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Package Delivery</div>
                                <div style="font-size: 13px; opacity: 0.8;">Friday, Nov 1, 2025 ‚Ä¢ 8:00 PM</div>
                                <div style="font-size: 12px; opacity: 0.7; margin-top: 8px;">Reminder: 30 minutes before</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">All Set!</div>
                            <div style="opacity: 0.8;">Delivery scheduled in calendar</div>
                        </div>`
                    }
                ]
            },
            'check_in_with_wallet': {
                title: '‚úàÔ∏èüì≤ Check In & Add Boarding Pass',
                isPremium: true,
                requiresResponse: false,
                endBehavior: 'returnToApp',
                steps: [
                    {
                        label: '1. Check-In Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Check in now - Flight UA 123</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 8px;">Tomorrow at 9:00 AM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(59, 130, 246, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úàÔ∏èüì≤</span> Check In</div>
                        </div>`
                    },
                    {
                        label: '2. Check In Online',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚úàÔ∏è Step 1 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Check In for Flight</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">United Airlines UA 123</div>
                                <div style="font-size: 13px; opacity: 0.8;">SFO ‚Üí NYC</div>
                                <div style="font-size: 13px; opacity: 0.8;">Seat: 12A (Window)</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Add to Wallet',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üì≤ Step 2 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Add Boarding Pass to Wallet</div>
                            <div style="background: rgba(59, 130, 246, 0.15); border: 2px solid rgba(59, 130, 246, 0.4); padding: 16px; border-radius: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">üé´ Boarding Pass Added</div>
                                <div style="font-size: 13px; opacity: 0.8;">Ready in Apple Wallet</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Ready to Fly!</div>
                            <div style="opacity: 0.8;">Checked in & boarding pass saved</div>
                        </div>`
                    }
                ]
            },
            'cancel_with_confirmation': {
                title: '‚ùå‚úâÔ∏è Cancel Subscription & Confirm',
                isPremium: false,
                requiresResponse: true,
                endBehavior: 'emailComposer',
                steps: [
                    {
                        label: '1. Subscription Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your subscription renews soon</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 8px;">$29.99/month</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 59, 48, 0.3); border-radius: 10px; font-size: 13px;"><span>‚ùå</span> Cancel</div>
                        </div>`
                    },
                    {
                        label: '2. Confirm Cancellation',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚ùå Step 1 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Cancel Subscription</div>
                            <div style="background: rgba(255, 59, 48, 0.15); border: 2px solid rgba(255, 59, 48, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Cancel Premium Plan?</div>
                                <div style="font-size: 13px; opacity: 0.8;">You'll lose access after Nov 30</div>
                            </div>
                            <div style="background: rgba(255, 59, 48, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Confirm Cancellation
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Email Confirmation',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚úâÔ∏è Step 2 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Request Confirmation</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">Re: Subscription Cancellation Request</div>
                                <div style="font-size: 13px; opacity: 0.8;">I'd like to cancel my subscription as discussed. Please confirm the cancellation.</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Cancellation Requested</div>
                            <div style="opacity: 0.8;">Confirmation email sent</div>
                        </div>`
                    }
                ]
            },
            'schedule_purchase_with_reminder': {
                title: 'üõíüìÖ Schedule Purchase & Set Reminder',
                isPremium: true,
                requiresResponse: false,
                endBehavior: 'returnToApp',
                steps: [
                    {
                        label: '1. Promotion Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Black Friday Sale - Nov 24</div>
                            <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin-bottom: 8px;">60% OFF</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üõíüìÖ</span> Schedule & Remind</div>
                        </div>`
                    },
                    {
                        label: '2. Schedule Purchase',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üõí Step 1 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Schedule Shopping Time</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Black Friday Shopping</div>
                                <div style="font-size: 13px; opacity: 0.8;">Friday, Nov 24, 2025</div>
                                <div style="font-size: 13px; opacity: 0.8;">12:00 AM (Sale starts)</div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.2); border: 2px solid rgba(255, 149, 0, 0.4); padding: 12px; border-radius: 10px; text-align: center;">
                                <div style="font-weight: 600; font-size: 18px; color: #FFD700;">60% OFF</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Set Reminder',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚è∞ Step 2 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Set Sale Reminder</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">üîî Reminder Set</div>
                                <div style="font-size: 13px; opacity: 0.8;">Friday, Nov 24 at 12:00 AM</div>
                                <div style="font-size: 12px; opacity: 0.7; margin-top: 8px;">Alert: 15 minutes before sale</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">All Set!</div>
                            <div style="opacity: 0.8;">Sale scheduled & reminder set</div>
                        </div>`
                    }
                ]
            },
            'calendar_with_reminder': {
                title: 'üìÖ‚è∞ Add to Calendar & Set Reminder',
                isPremium: false,
                requiresResponse: false,
                endBehavior: 'returnToApp',
                steps: [
                    {
                        label: '1. Appointment Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Doctor Appointment Confirmed</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 8px;">Oct 30, 2025 at 2:00 PM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(59, 130, 246, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÖ‚è∞</span> Calendar & Reminder</div>
                        </div>`
                    },
                    {
                        label: '2. Add to Calendar',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üìÖ Step 1 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Add Appointment to Calendar</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Doctor's Appointment</div>
                                <div style="font-size: 13px; opacity: 0.8;">Wednesday, Oct 30, 2025</div>
                                <div style="font-size: 13px; opacity: 0.8;">2:00 PM - 3:00 PM</div>
                                <div style="font-size: 12px; opacity: 0.7; margin-top: 8px;">üìç 123 Medical Plaza</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Set Reminder',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚è∞ Step 2 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Set Appointment Reminder</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">üîî Reminder Set</div>
                                <div style="font-size: 13px; opacity: 0.8;">1 hour before appointment</div>
                                <div style="font-size: 12px; opacity: 0.7; margin-top: 8px;">Alert: Oct 30 at 1:00 PM</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">All Set!</div>
                            <div style="opacity: 0.8;">Event added & reminder set</div>
                        </div>`
                    }
                ]
            }
        };

        let allActions = [];
        let currentFilter = 'all';

        // Fetch actions from API
        async function loadActions() {
            try {
                const response = await fetch(`${DashboardConfig.services.actions}/api/actions/catalog`);
                const data = await response.json();

                allActions = Object.values(data.actions);
                updateStats();
                renderActions();
            } catch (error) {
                console.error('Error loading actions:', error);
                document.getElementById('action-grid').innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: rgba(255,69,0,0.8);">
                        Error loading actions. Make sure the Actions service is running.
                    </div>
                `;
            }
        }

        function updateStats() {
            const withModals = allActions.filter(a => a.modalComponent).length;
            const withFlows = allActions.filter(a => a.modalComponent && MODAL_FLOWS[a.actionId]).length;
            const pendingFlows = allActions.filter(a => a.modalComponent && !MODAL_FLOWS[a.actionId]).length;

            document.getElementById('total-actions').textContent = allActions.length;
            document.getElementById('with-modals').textContent = withModals;
            document.getElementById('with-flows').textContent = withFlows;
            document.getElementById('pending-flows').textContent = pendingFlows;
        }

        function renderActions() {
            const grid = document.getElementById('action-grid');

            let filtered = allActions;
            if (currentFilter === 'has-flow') {
                filtered = allActions.filter(a => a.modalComponent && MODAL_FLOWS[a.actionId]);
            } else if (currentFilter === 'pending') {
                filtered = allActions.filter(a => a.modalComponent && !MODAL_FLOWS[a.actionId]);
            } else if (currentFilter === 'no-modal') {
                filtered = allActions.filter(a => !a.modalComponent);
            }

            if (filtered.length === 0) {
                grid.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.5);">
                        No actions match this filter
                    </div>
                `;
                return;
            }

            grid.innerHTML = filtered.map(action => {
                const hasModal = !!action.modalComponent;
                const hasFlow = hasModal && !!MODAL_FLOWS[action.actionId];

                let badgeClass = 'badge-no-modal';
                let badgeText = 'No Modal';
                let itemClass = 'no-modal';

                if (hasModal && hasFlow) {
                    badgeClass = 'badge-has-flow';
                    badgeText = 'Has Flow';
                    itemClass = 'has-flow';
                } else if (hasModal && !hasFlow) {
                    badgeClass = 'badge-pending';
                    badgeText = 'Flow Pending';
                    itemClass = '';
                }

                const onclick = hasFlow ? `onclick="toggleInlineFlow('${action.actionId}')"` : '';

                // Generate inline flow content
                let inlineFlowHTML = '';
                if (hasFlow) {
                    const flow = MODAL_FLOWS[action.actionId];
                    let stepsHTML = '';
                    flow.steps.forEach((step, index) => {
                        stepsHTML += `
                            <div class="modal-flow-step">
                                <div class="modal-flow-label">${step.label}</div>
                                ${step.html}
                            </div>
                        `;
                        if (index < flow.steps.length - 1) {
                            stepsHTML += '<div class="modal-flow-arrow">‚Üí</div>';
                        }
                    });

                    inlineFlowHTML = `
                        <div class="inline-flow-container" id="flow-${action.actionId}">
                            <div class="inline-flow-content">
                                <div class="inline-flow-header">
                                    <div class="inline-flow-title">${flow.title}</div>
                                    <button class="collapse-btn" onclick="event.stopPropagation(); toggleInlineFlow('${action.actionId}')">Collapse</button>
                                </div>
                                <div class="modal-flow-horizontal">
                                    ${stepsHTML}
                                </div>
                            </div>
                        </div>
                    `;
                }

                return `
                    <div class="action-row">
                        <div class="action-item ${itemClass}" id="action-${action.actionId}" ${onclick}>
                            <div class="action-header">
                                <div class="action-name">${action.displayName}</div>
                                <div class="action-badge ${badgeClass}">${badgeText}</div>
                            </div>
                            <div class="action-id">${action.actionId}</div>
                            ${hasModal ? `<div class="action-modal">Modal: ${action.modalComponent}</div>` : ''}
                        </div>
                        ${inlineFlowHTML}
                    </div>
                `;
            }).join('');
        }

        let currentExpandedFlow = null;

        function toggleInlineFlow(actionId) {
            const flowContainer = document.getElementById(`flow-${actionId}`);
            const actionCard = document.getElementById(`action-${actionId}`);

            if (!flowContainer || !actionCard) return;

            // If clicking the same action, collapse it
            if (currentExpandedFlow === actionId) {
                flowContainer.classList.remove('expanded');
                actionCard.classList.remove('active');
                currentExpandedFlow = null;
                return;
            }

            // Collapse any currently expanded flow
            if (currentExpandedFlow) {
                const prevFlow = document.getElementById(`flow-${currentExpandedFlow}`);
                const prevAction = document.getElementById(`action-${currentExpandedFlow}`);
                if (prevFlow) prevFlow.classList.remove('expanded');
                if (prevAction) prevAction.classList.remove('active');
            }

            // Expand the new flow
            flowContainer.classList.add('expanded');
            actionCard.classList.add('active');
            currentExpandedFlow = actionId;

            // Scroll to show the expanded flow
            setTimeout(() => {
                flowContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }

        // Filter buttons
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.dataset.filter;
                renderActions();
            });
        });

        // Render compound flows
        function renderCompoundFlows() {
            const grid = document.getElementById('compound-flows-grid');
            const compoundFlowIds = Object.keys(COMPOUND_FLOWS);

            grid.innerHTML = compoundFlowIds.map(flowId => {
                const flow = COMPOUND_FLOWS[flowId];
                const premiumBadge = flow.isPremium
                    ? '<span style="background: linear-gradient(135deg, #FFD700, #FFA500); color: #1a1a2e; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 700; margin-left: 8px;">PREMIUM</span>'
                    : '<span style="background: rgba(52, 199, 89, 0.3); color: #34C759; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 700; margin-left: 8px;">FREE</span>';

                const endBehaviorIcon = flow.requiresResponse ? '‚úâÔ∏è' : '‚Ü©Ô∏è';
                const endBehaviorText = flow.requiresResponse ? 'Email Response' : 'Return to App';

                return `
                    <div style="background: rgba(255,255,255,0.08); border: 2px solid rgba(255,255,255,0.15); border-radius: 12px; padding: 20px; cursor: pointer; transition: all 0.2s;"
                         onmouseover="this.style.background='rgba(255,255,255,0.12)'; this.style.borderColor='rgba(255,255,255,0.25)'; this.style.transform='translateY(-2px)'"
                         onmouseout="this.style.background='rgba(255,255,255,0.08)'; this.style.borderColor='rgba(255,255,255,0.15)'; this.style.transform='translateY(0)'"
                         onclick="alert('Flow: ${flowId}\\nSteps: ${flow.steps.length}\\nEnd Behavior: ${endBehaviorText}')">
                        <div style="font-size: 18px; font-weight: 700; margin-bottom: 8px; display: flex; align-items: center;">
                            ${flow.title}
                            ${premiumBadge}
                        </div>
                        <div style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;">
                            ${flow.steps.length} Steps ‚Ä¢ ${endBehaviorIcon} ${endBehaviorText}
                        </div>
                        <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                            ${flow.steps.map((step, i) => `
                                <span style="background: rgba(255,255,255,0.1); padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 600;">
                                    ${i + 1}. ${step.label.replace(/^\d+\.\s*/, '')}
                                </span>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Load on page load
        renderCompoundFlows();
        loadActions();
    </script>
</body>
</html>
