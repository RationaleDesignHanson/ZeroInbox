<!DOCTYPE html>
<!--
    ‚ö†Ô∏è IMPORTANT: This page MUST be served via HTTP (not file://)

    The intent dropdown loads data/comprehensive-corpus.json via fetch(),
    which is blocked by CORS when opened directly with file:// protocol.

    To run this page:
    1. Start a local web server in the dashboard directory:
       cd /Users/matthanson/Zer0_Inbox/backend/dashboard
       python3 -m http.server 8088

    2. Open in browser:
       http://localhost:8088/action-modal-explorer.html

    Symptoms if opened with file://:
    - Intent dropdown only shows "All Intents" (no other options)
    - Console shows CORS error for comprehensive-corpus.json
    - Console shows "emailsByIntent has 0 intents"
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Action & Modal Explorer</title>

    <!-- Password Protection -->
    <script>
      (function() {
        const CORRECT_PASSWORD = 'ZERO2025';
        const isAuthenticated = sessionStorage.getItem('dashboardAuth') === 'true';
        if (!isAuthenticated) {
          document.addEventListener('DOMContentLoaded', function() {
            document.body.style.display = 'none';
            const gate = document.createElement('div');
            gate.id = 'password-gate';
            gate.innerHTML = `<style>#password-gate{position:fixed;inset:0;background:linear-gradient(135deg,#1a1a2e 0%,#2d1b4e 30%,#4a1942 60%,#1f1f3a 100%);display:flex;align-items:center;justify-center;z-index:99999;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif}#password-gate .gate-container{background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.2);border-radius:24px;padding:48px;max-width:400px;width:90%;text-align:center}#password-gate h2{color:white;font-size:32px;margin-bottom:12px;background:linear-gradient(135deg,#667eea 0%,#764ba2 50%,#f093fb 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent}#password-gate p{color:rgba(255,255,255,0.7);margin-bottom:32px;font-size:14px}#password-gate input{width:100%;padding:16px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);border-radius:12px;color:white;font-size:16px;margin-bottom:16px;text-align:center}#password-gate input::placeholder{color:rgba(255,255,255,0.4)}#password-gate input:focus{outline:none;border-color:#667eea;background:rgba(255,255,255,0.15)}#password-gate button{width:100%;padding:16px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border:none;border-radius:12px;color:white;font-size:16px;font-weight:600;cursor:pointer;transition:transform 0.2s,box-shadow 0.2s}#password-gate button:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(102,126,234,0.4)}#password-gate .error{color:#ff3b30;font-size:14px;margin-top:12px;display:none}#password-gate .hint{color:rgba(255,255,255,0.5);font-size:12px;margin-top:24px}</style><div class="gate-container"><h2>üîí Beta Testers Only</h2><p>Enter the password from your TestFlight instructions</p><input type="password" id="password-input" placeholder="Enter password"><button onclick="checkPassword()">Access Dashboard</button><div class="error" id="error-message">Incorrect password</div><div class="hint">Find the password in your TestFlight welcome email</div></div>`;
            document.body.appendChild(gate);
            document.body.style.display = 'block';
            window.checkPassword = function() {
              const input = document.getElementById('password-input');
              const error = document.getElementById('error-message');
              if (input.value === CORRECT_PASSWORD) {
                sessionStorage.setItem('dashboardAuth', 'true');
                document.getElementById('password-gate').remove();
                location.reload();
              } else {
                error.style.display = 'block';
                input.value = '';
                input.focus();
              }
            };
            document.getElementById('password-input').addEventListener('keypress', function(e) {
              if (e.key === 'Enter') checkPassword();
            });
            document.getElementById('password-input').focus();
          });
        }
      })();
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* iOS Safari tap fix - make all clickable elements tappable */
        [onclick], button, [role="button"], .clickable {
            -webkit-tap-highlight-color: rgba(255, 255, 255, 0.2);
            -webkit-touch-callout: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #2d1b4e 30%, #4a1942 60%, #1f1f3a 100%);
            min-height: 100vh;
            padding: 110px 20px 20px 20px;
            color: #fff;
        }

        /* Custom Scrollbar - Holographic Glassmorphic Design */
        /* Firefox */
        * {
            scrollbar-width: thin;
            scrollbar-color: rgba(139, 92, 246, 0.4) rgba(255, 255, 255, 0.05);
        }

        /* Webkit browsers (Chrome, Safari, Edge) */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            margin: 4px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(
                135deg,
                rgba(6, 182, 212, 0.5) 0%,
                rgba(59, 130, 246, 0.5) 25%,
                rgba(139, 92, 246, 0.5) 50%,
                rgba(236, 72, 153, 0.5) 75%,
                rgba(6, 182, 212, 0.5) 100%
            );
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            box-shadow:
                0 0 10px rgba(139, 92, 246, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(
                135deg,
                rgba(6, 182, 212, 0.7) 0%,
                rgba(59, 130, 246, 0.7) 25%,
                rgba(139, 92, 246, 0.7) 50%,
                rgba(236, 72, 153, 0.7) 75%,
                rgba(6, 182, 212, 0.7) 100%
            );
            box-shadow:
                0 0 15px rgba(139, 92, 246, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        ::-webkit-scrollbar-thumb:active {
            background: linear-gradient(
                135deg,
                rgba(6, 182, 212, 0.8) 0%,
                rgba(59, 130, 246, 0.8) 25%,
                rgba(139, 92, 246, 0.8) 50%,
                rgba(236, 72, 153, 0.8) 75%,
                rgba(6, 182, 212, 0.8) 100%
            );
        }

        /* Horizontal scrollbar corners */
        ::-webkit-scrollbar-corner {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
        }

        .dashboard-container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .dashboard-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px 30px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-content h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .header-content p {
            opacity: 0.8;
            font-size: 14px;
        }

        .header-actions {
            display: flex;
            gap: 12px;
        }

        .button-secondary {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .button-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        .dashboard-content {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .action-grid {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 20px;
        }

        .action-row {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .action-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s;
            -webkit-tap-highlight-color: rgba(52, 199, 89, 0.2);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        .action-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(52, 199, 89, 0.4);
            transform: translateY(-2px);
        }

        .action-item.no-modal {
            border-color: rgba(100, 149, 237, 0.3);
            cursor: pointer;
        }

        .action-item.no-modal:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(100, 149, 237, 0.5);
            transform: translateY(-2px);
        }

        .action-item.has-flow {
            border-color: rgba(52, 199, 89, 0.3);
        }

        .action-item.active {
            border-color: rgba(52, 199, 89, 0.6);
            background: rgba(52, 199, 89, 0.1);
        }

        .inline-flow-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
        }

        .inline-flow-container.expanded {
            max-height: 800px;
            transition: max-height 0.5s ease-in;
        }

        .inline-flow-content {
            padding: 24px;
        }

        .inline-flow-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .inline-flow-title {
            font-size: 18px;
            font-weight: 700;
            color: white;
        }

        .collapse-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
            -webkit-tap-highlight-color: rgba(255, 255, 255, 0.2);
            -webkit-touch-callout: none;
        }

        .collapse-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .action-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }

        .action-name {
            font-size: 16px;
            font-weight: 600;
            color: white;
        }

        .action-badge {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-has-flow {
            background: rgba(52, 199, 89, 0.2);
            color: rgba(52, 199, 89, 1);
        }

        .badge-pending {
            background: rgba(255, 149, 0, 0.2);
            color: rgba(255, 149, 0, 1);
        }

        .badge-no-modal {
            background: rgba(100, 149, 237, 0.2);
            color: rgba(100, 149, 237, 1);
        }

        .action-id {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.5);
            font-family: 'SF Mono', Monaco, monospace;
        }

        .action-modal {
            font-size: 12px;
            color: rgba(100, 149, 237, 1);
            margin-top: 8px;
        }

        .modal-preview {
            margin-top: 30px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 24px;
        }

        .modal-preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-preview-title {
            font-size: 20px;
            font-weight: 700;
            color: white;
        }

        .close-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .stats-bar {
            display: flex;
            gap: 24px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .stat-item {
            flex: 1;
            text-align: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: white;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.6);
        }

        /* Modal flow styles from zero-sequence-live */
        .modal-flow-horizontal {
            display: flex;
            align-items: center;
            gap: 16px;
            overflow-x: auto;
            overflow-y: hidden;
            padding: 20px 0;
            flex-wrap: nowrap;
            scrollbar-width: thin;
            scrollbar-color: rgba(139, 92, 246, 0.4) rgba(255, 255, 255, 0.05);
        }

        .modal-flow-horizontal::-webkit-scrollbar {
            height: 8px;
        }

        .modal-flow-horizontal::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .modal-flow-horizontal::-webkit-scrollbar-thumb {
            background: linear-gradient(
                90deg,
                rgba(6, 182, 212, 0.5) 0%,
                rgba(139, 92, 246, 0.5) 50%,
                rgba(236, 72, 153, 0.5) 100%
            );
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .modal-flow-horizontal::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(
                90deg,
                rgba(6, 182, 212, 0.7) 0%,
                rgba(139, 92, 246, 0.7) 50%,
                rgba(236, 72, 153, 0.7) 100%
            );
        }

        .modal-flow-step {
            min-width: 250px;
            max-width: 250px;
            flex-shrink: 0;
        }

        .modal-flow-label {
            font-size: 12px;
            font-weight: 600;
            color: rgba(255,255,255,0.7);
            margin-bottom: 12px;
            text-align: center;
        }

        .modal-flow-arrow {
            font-size: 24px;
            color: rgba(52, 199, 89, 0.6);
            flex-shrink: 0;
        }

        .modal-email-card, .modal-preview-card, .modal-success-state {
            background: rgba(28, 28, 30, 0.95);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 16px;
            padding: 16px;
            color: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .modal-success-state {
            background: rgba(52, 199, 89, 0.15);
            border-color: rgba(52, 199, 89, 0.4);
            text-align: center;
            padding: 24px;
        }

        .modal-success-icon {
            width: 48px;
            height: 48px;
            background: rgba(52, 199, 89, 1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: 700;
            margin: 0 auto 16px;
        }

        .filter-bar {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }

        .compound-toggle {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            -webkit-tap-highlight-color: rgba(255, 255, 255, 0.2);
            -webkit-touch-callout: none;
        }

        .compound-toggle:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .compound-toggle.active {
            background: rgba(255, 215, 0, 0.15);
            border-color: rgba(255, 215, 0, 0.5);
            color: rgba(255, 215, 0, 1);
            box-shadow: 0 0 12px rgba(255, 215, 0, 0.2);
        }

        .intent-dropdown {
            position: relative;
            flex: 1;
            max-width: 300px;
        }

        .intent-select {
            width: 100%;
            padding: 10px 16px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #fff;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23fff' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            padding-right: 36px;
        }

        .intent-select:hover {
            background-color: rgba(255, 255, 255, 0.12);
            border-color: rgba(52, 199, 89, 0.4);
        }

        .intent-select:focus {
            outline: none;
            border-color: rgba(52, 199, 89, 0.6);
            box-shadow: 0 0 0 3px rgba(52, 199, 89, 0.1);
        }

        .intent-select option {
            background: #1a1a2e;
            color: #fff;
            padding: 8px;
        }

        .search-box {
            width: 100%;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #fff;
            font-size: 15px;
            font-family: inherit;
            transition: all 0.2s;
            margin-bottom: 16px;
        }

        .search-box::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .search-box:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(52, 199, 89, 0.5);
            box-shadow: 0 0 0 3px rgba(52, 199, 89, 0.1);
        }

        .load-more-container {
            text-align: center;
            margin-top: 24px;
            padding: 20px;
        }

        .load-more-btn {
            padding: 14px 32px;
            background: rgba(52, 199, 89, 0.2);
            border: 2px solid rgba(52, 199, 89, 0.4);
            border-radius: 10px;
            color: rgba(52, 199, 89, 1);
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            -webkit-tap-highlight-color: rgba(52, 199, 89, 0.3);
            -webkit-touch-callout: none;
        }

        .load-more-btn:hover {
            background: rgba(52, 199, 89, 0.3);
            border-color: rgba(52, 199, 89, 0.6);
            transform: translateY(-2px);
        }

        .load-more-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    
        /* Beta Banner - Fixed Top */
        .beta-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg,
                rgba(26, 26, 46, 0.95) 0%,
                rgba(45, 27, 78, 0.95) 30%,
                rgba(74, 25, 66, 0.95) 60%,
                rgba(31, 31, 58, 0.95) 100%
            );
            backdrop-filter: blur(20px);
            border-bottom: 2px solid rgba(139, 92, 246, 0.4);
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.15),
                        0 0 40px rgba(139, 92, 246, 0.1);
            padding: 12px 20px;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
            flex-wrap: wrap;
        }

        .beta-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg,
                transparent 0%,
                rgba(59, 130, 246, 0.05) 20%,
                rgba(139, 92, 246, 0.05) 50%,
                rgba(59, 130, 246, 0.05) 80%,
                transparent 100%
            );
            pointer-events: none;
            animation: shimmer 8s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }

        .beta-banner-content {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
            flex: 1;
            position: relative;
            z-index: 1;
        }

        .beta-banner-text {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .beta-banner-title {
            font-size: 16px;
            font-weight: 700;
            color: white;
        }

        .beta-banner-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .beta-banner-actions {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .beta-banner-btn {
            padding: 8px 20px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .beta-banner-btn.primary {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 50%, #6366f1 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3),
                        0 0 20px rgba(139, 92, 246, 0.2);
            position: relative;
            overflow: hidden;
        }

        .beta-banner-btn.primary::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg,
                transparent,
                rgba(255, 255, 255, 0.1),
                transparent
            );
            transform: rotate(45deg);
            animation: button-shine 3s ease-in-out infinite;
        }

        @keyframes button-shine {
            0%, 100% { transform: translateX(-100%) rotate(45deg); }
            50% { transform: translateX(100%) rotate(45deg); }
        }

        .beta-banner-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px rgba(59, 130, 246, 0.5),
                        0 0 40px rgba(139, 92, 246, 0.3);
            background: linear-gradient(135deg, #2563eb 0%, #7c3aed 50%, #4f46e5 100%);
        }

        .beta-banner-btn.secondary {
            background: rgba(139, 92, 246, 0.1);
            color: white;
            border: 1px solid rgba(139, 92, 246, 0.4);
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.1);
        }

        .beta-banner-btn.secondary:hover {
            background: rgba(139, 92, 246, 0.2);
            border-color: rgba(139, 92, 246, 0.6);
            box-shadow: 0 4px 16px rgba(139, 92, 246, 0.3);
        }

        @media (max-width: 768px) {
            body {
                padding-top: 120px;
            }
            .beta-banner {
                padding: 10px 16px;
            }

            .beta-banner-actions {
                width: 100%;
            }

            .beta-banner-btn {
                flex: 1;
                text-align: center;
            }
        }

        /* Navigation Bar - Below Beta Banner */
        .main-nav {
            position: fixed;
            top: 60px;
            left: 0;
            right: 0;
            background: rgba(26, 26, 46, 0.92);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(139, 92, 246, 0.2);
            z-index: 9998;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 20px;
        }

        .nav-links {
            display: flex;
            gap: 8px;
            list-style: none;
            padding: 8px 0;
        }

        .nav-link {
            padding: 10px 20px;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .nav-link:hover {
            background: rgba(139, 92, 246, 0.2);
            color: white;
            transform: translateY(-1px);
        }

        .nav-link.active {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(139, 92, 246, 0.3));
            color: white;
            border: 1px solid rgba(139, 92, 246, 0.4);
        }

        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 130px;
            right: 20px;
            z-index: 10000;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.9), rgba(139, 92, 246, 0.9));
            border: none;
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 24px;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
            transition: all 0.3s ease;
        }

        .mobile-menu-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(59, 130, 246, 0.6);
        }

        /* Mobile Drawer */
        .mobile-drawer {
            position: fixed;
            top: 0;
            right: -100%;
            width: 280px;
            height: 100vh;
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.98), rgba(45, 27, 78, 0.98));
            backdrop-filter: blur(20px);
            box-shadow: -4px 0 20px rgba(0, 0, 0, 0.5);
            z-index: 10001;
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 80px 20px 20px 20px;
            overflow-y: auto;
        }

        .mobile-drawer.open {
            right: 0;
        }

        .mobile-drawer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(139, 92, 246, 0.3);
        }

        .mobile-drawer-title {
            font-size: 20px;
            font-weight: 700;
            color: white;
        }

        .mobile-drawer-close {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mobile-nav-links {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .mobile-nav-link {
            display: block;
            padding: 16px 20px;
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            font-size: 16px;
            font-weight: 600;
            border-radius: 12px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.03);
        }

        .mobile-nav-link:hover {
            background: rgba(139, 92, 246, 0.2);
            transform: translateX(4px);
        }

        .mobile-nav-link.active {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(139, 92, 246, 0.3));
            border: 1px solid rgba(139, 92, 246, 0.4);
        }

        /* Mobile Backdrop */
        .mobile-backdrop {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .mobile-backdrop.visible {
            display: block;
            opacity: 1;
        }

        @media (max-width: 768px) {
            body {
                padding-top: 120px;
            }

            .beta-banner {
                padding: 10px 16px;
            }

            .beta-banner-actions {
                width: 100%;
            }

            .beta-banner-btn {
                flex: 1;
                text-align: center;
            }

            .main-nav {
                display: none;
            }

            .mobile-menu-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }

    </style>
</head>
<body>
    <!-- Beta Banner -->
    <div class="beta-banner">
        <div class="beta-banner-content">
            <div class="beta-banner-text">
                <div class="beta-banner-title">Ready to Experience ZerO Inbox?</div>
                <div class="beta-banner-subtitle">Join hundreds of beta testers achieving inbox zero every day</div>
            </div>
            <div class="beta-banner-actions">
                <a href="mailto:zerobeta@rationale.work?subject=Zero%20Beta%20Access%20Request" class="beta-banner-btn primary">
                    Request Beta Access
                </a>
                <a href="https://apps.apple.com/us/app/testflight/id899247664" target="_blank" class="beta-banner-btn secondary">
                    Download TestFlight
                </a>
            </div>
        </div>
    </div>

    <!-- Main Navigation (Desktop) -->
    <nav class="main-nav">
        <div class="nav-container">
            <ul class="nav-links">
                <li><a href="landing.html" class="nav-link">Home</a></li>
                <li><a href="app-demo.html" class="nav-link">Live Demo</a></li>
                <li><a href="zero-sequence-live.html" class="nav-link">Intent-Action Demo</a></li>
                <li><a href="action-modal-explorer.html" class="nav-link active">Actions</a></li>
                <li><a href="intent-action-explorer.html" class="nav-link">Intents</a></li>
                <li><a href="shopping-cart.html" class="nav-link">Shopping</a></li>
                <li><a href="architecture-visual.html" class="nav-link">System Architecture</a></li>
            </ul>
        </div>
    </nav>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Menu">
        ‚ò∞
    </button>

    <!-- Mobile Backdrop -->
    <div class="mobile-backdrop" id="mobileBackdrop" onclick="closeMobileMenu()"></div>

    <!-- Mobile Drawer -->
    <div class="mobile-drawer" id="mobileDrawer">
        <div class="mobile-drawer-header">
            <span class="mobile-drawer-title">Navigation</span>
            <button class="mobile-drawer-close" onclick="closeMobileMenu()" aria-label="Close">‚úï</button>
        </div>
        <ul class="mobile-nav-links">
            <li><a href="landing.html" class="mobile-nav-link">Home</a></li>
            <li><a href="app-demo.html" class="mobile-nav-link">Live Demo</a></li>
            <li><a href="zero-sequence-live.html" class="mobile-nav-link">Intent-Action Demo</a></li>
            <li><a href="action-modal-explorer.html" class="mobile-nav-link active">Actions</a></li>
            <li><a href="intent-action-explorer.html" class="mobile-nav-link">Intents</a></li>
            <li><a href="shopping-cart.html" class="mobile-nav-link">Shopping</a></li>
            <li><a href="architecture-visual.html" class="mobile-nav-link">System Architecture</a></li>
        </ul>
    </div>

    <div class="dashboard-container">
        <div class="dashboard-header">
            <div class="header-content">
                <h1>üì± Action & Modal Explorer</h1>
                <p>Browse all actions and their modal flows</p>
            </div>
        </div>

        <div class="dashboard-content">
            <div class="stats-bar">
                <div class="stat-item">
                    <div class="stat-value" id="total-actions">‚Äî</div>
                    <div class="stat-label">Total Actions</div>
                </div>
            </div>

            <div style="margin-top: 32px;">
                <h2 style="font-size: 20px; font-weight: 700; margin-bottom: 16px; color: #fff;">
                    Actions
                </h2>
            </div>

            <input
                type="text"
                class="search-box"
                id="action-search"
                placeholder="üîç Search actions by name, modal, or description..."
                oninput="handleSearch()"
            />

            <div class="filter-bar">
                <button class="compound-toggle" id="compound-toggle" onclick="toggleCompoundFilter()">
                    <span>üåÄ</span>
                    <span>Compound Actions Only</span>
                </button>

                <button class="compound-toggle" id="native-ios-toggle" onclick="toggleNativeIOSFilter()">
                    <span>üì±</span>
                    <span>Native iOS Only</span>
                </button>

                <div class="intent-dropdown">
                    <select class="intent-select" id="intent-select" onchange="handleIntentChange()">
                        <option value="all">All Intents</option>
                        <!-- Options will be populated dynamically -->
                    </select>
                </div>
            </div>

            <div class="action-grid" id="action-grid">
                <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.5);">
                    Loading actions...
                </div>
            </div>

            <div class="load-more-container" id="load-more-container" style="display: none;">
                <button class="load-more-btn" id="load-more-btn" onclick="loadMoreActions()">
                    Load More Actions
                </button>
                <div style="margin-top: 12px; font-size: 13px; opacity: 0.7;">
                    Showing <span id="showing-count">0</span> of <span id="total-count">0</span> actions
                </div>
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/graceful-degradation.js"></script>
    <script>
        // Modal flows copied from zero-sequence-live.html
        const MODAL_FLOWS = {
            'sign_form': {
                title: 'Sign Form',
                steps: [
                    {
                        label: '1. Form Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Permission Form</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Signature required</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úçÔ∏è</span> Sign</div>
                        </div>`
                    },
                    {
                        label: '2. Draw Signature',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úçÔ∏è Sign Form</div>
                            <div style="background: rgba(255,255,255,0.95); height: 80px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #999; font-style: italic;">
                                Draw your signature
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Confirm',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úçÔ∏è Confirm Signature</div>
                            <div style="background: rgba(147, 51, 234, 0.15); border: 2px solid rgba(147, 51, 234, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Field Trip Permission Form</div>
                                <div style="font-size: 14px; opacity: 0.8;">Ready to send with your signature</div>
                            </div>
                            <div style="background: rgba(147, 51, 234, 0.3); padding: 14px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Send Signed Form
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Signed',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Form Signed!</div>
                            <div style="opacity: 0.8;">Reply sent with signature</div>
                        </div>`
                    }
                ]
            },
            'pay_invoice': {
                title: 'Pay Invoice',
                steps: [
                    {
                        label: '1. Invoice Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Invoice #INV-2025-1234</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$599.00</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Due: Oct 30, 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üí≥</span> Pay Now</div>
                        </div>`
                    },
                    {
                        label: '2. Payment Method',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí≥ Pay Invoice</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="opacity: 0.7; font-size: 12px;">Amount Due</div>
                                <div style="font-size: 28px; font-weight: 700; color: #FFD700;">$599.00</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Pay with Apple Pay
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Processing',
                        html: `<div class="modal-preview-card" style="background: rgba(59, 130, 246, 0.15); border-color: rgba(59, 130, 246, 0.4);">
                            <div style="width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.2); border-top-color: #3B82F6; border-radius: 50%; margin: 0 auto 16px; animation: spin 1s linear infinite;"></div>
                            <div style="text-align: center; font-weight: 600;">Processing Payment...</div>
                        </div>`
                    },
                    {
                        label: '4. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Payment Sent!</div>
                            <div style="opacity: 0.8;">$599.00 paid to Acme Corp</div>
                        </div>`
                    }
                ]
            },
            'track_package': {
                title: 'Track Package',
                steps: [
                    {
                        label: '1. Shipping Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your order has shipped</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">UPS ‚Ä¢ Arrives Friday</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üì¶</span> Track</div>
                        </div>`
                    },
                    {
                        label: '2. Tracking Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì¶ Package Tracking</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 10px;">
                                <div style="font-size: 12px; opacity: 0.7;">Status</div>
                                <div style="font-weight: 600; color: #FFD700;">Out for Delivery</div>
                            </div>
                            <div style="display: flex; gap: 8px; margin-top: 12px;">
                                <div style="flex: 1; height: 4px; background: rgba(52, 199, 89, 0.8); border-radius: 2px;"></div>
                                <div style="flex: 1; height: 4px; background: rgba(52, 199, 89, 0.8); border-radius: 2px;"></div>
                                <div style="flex: 1; height: 4px; background: rgba(255,255,255,0.2); border-radius: 2px;"></div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Live Updates',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Tracking Active</div>
                            <div style="opacity: 0.8;">Push notifications enabled</div>
                        </div>`
                    }
                ]
            },
            'check_in_flight': {
                title: 'Check In Flight',
                steps: [
                    {
                        label: '1. Check-in Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">UA 1234 Ready for Check-in</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">SFO ‚Üí JFK ‚Ä¢ Tomorrow 9:00 AM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(59, 130, 246, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úàÔ∏è</span> Check In</div>
                        </div>`
                    },
                    {
                        label: '2. Seat Selection',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úàÔ∏è Check In</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 10px;">
                                <div style="font-weight: 600;">Flight UA 1234</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-top: 4px;">Seat 12A</div>
                            </div>
                            <div style="background: rgba(59, 130, 246, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Confirm Check-in
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Boarding Pass',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Checked In!</div>
                            <div style="opacity: 0.8;">Pass added to Wallet</div>
                        </div>`
                    }
                ]
            },
            'schedule_purchase': {
                title: 'Scheduled Purchase',
                steps: [
                    {
                        label: '1. Product',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Monthly Coffee Subscription</div>
                            <div style="font-size: 20px; font-weight: 700; margin: 10px 0;">$24.99/mo</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÖ</span> Schedule Purchase</div>
                        </div>`
                    },
                    {
                        label: '2. Schedule',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìÖ Schedule Recurring</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 10px;">
                                <div style="opacity: 0.7; font-size: 12px;">Frequency</div>
                                <div style="font-weight: 600;">Monthly</div>
                            </div>
                            <div style="background: rgba(147, 51, 234, 0.2); border: 2px solid rgba(147, 51, 234, 0.6); padding: 12px; border-radius: 10px;">
                                <div style="opacity: 0.7; font-size: 12px;">Next Charge</div>
                                <div style="font-weight: 600;">Nov 29, 2025</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Scheduled',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Subscription Active!</div>
                            <div style="opacity: 0.8;">$24.99 charged monthly</div>
                        </div>`
                    }
                ]
            },
            'add_to_calendar': {
                title: 'Add to Calendar',
                steps: [
                    {
                        label: '1. Event Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Field Trip - Oct 25th</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Science Museum Visit</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÖ</span> Add to Calendar</div>
                        </div>`
                    },
                    {
                        label: '2. Event Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìÖ Calendar Event</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 10px;">
                                <div style="font-weight: 600;">Field Trip</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-top: 4px;">October 25, 2025 at 9:00 AM</div>
                            </div>
                            <div style="background: rgba(0, 122, 255, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Add to Calendar
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Added',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Event Added!</div>
                            <div style="opacity: 0.8;">Reminder set for 1 day before</div>
                        </div>`
                    }
                ]
            },
            'pay_form_fee': {
                title: 'Pay Form Fee',
                steps: [
                    {
                        label: '1. Fee Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Field Trip Fee</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$15.00</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Per student</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üí≥</span> Pay Now</div>
                        </div>`
                    },
                    {
                        label: '2. Payment',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí≥ Pay Fee</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="opacity: 0.7; font-size: 12px;">Amount</div>
                                <div style="font-size: 28px; font-weight: 700; color: #FFD700;">$15.00</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Pay with Apple Pay
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Payment Sent!</div>
                            <div style="opacity: 0.8;">$15.00 paid</div>
                        </div>`
                    }
                ]
            },
            'view_order': {
                title: 'View Order',
                steps: [
                    {
                        label: '1. Order Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Order #112-8493829</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">3 items</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üì¶</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Order Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì¶ Order Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 10px;">
                                <div style="font-weight: 600;">Order #112-8493829</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-top: 4px;">Placed: Oct 20, 2025</div>
                                <div style="font-size: 13px; opacity: 0.7;">Total: $89.97</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'view_invoice': {
                title: 'View Invoice',
                steps: [
                    {
                        label: '1. Invoice Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Invoice #INV-2025-1234</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$599.00</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Due: Oct 30, 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÑ</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Invoice Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìÑ Invoice Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span>Invoice #</span>
                                    <span style="font-weight: 600;">INV-2025-1234</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span>Amount</span>
                                    <span style="font-weight: 600; color: #FFD700;">$599.00</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Due Date</span>
                                    <span style="font-weight: 600;">Oct 30, 2025</span>
                                </div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Pay Now
                            </div>
                        </div>`
                    }
                ]
            },
            'set_payment_reminder': {
                title: 'Set Payment Reminder',
                steps: [
                    {
                        label: '1. Invoice',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Invoice Due Oct 30</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$599.00</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>‚è∞</span> Remind Me</div>
                        </div>`
                    },
                    {
                        label: '2. Set Reminder',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚è∞ Payment Reminder</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 10px;">
                                <div style="opacity: 0.7; font-size: 12px;">Remind me</div>
                                <div style="font-weight: 600;">2 days before due date</div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Set Reminder
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Reminder Set',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reminder Set!</div>
                            <div style="opacity: 0.8;">You'll be notified on Oct 28</div>
                        </div>`
                    }
                ]
            },
            'contact_support': {
                title: 'Contact Support',
                steps: [
                    {
                        label: '1. Support Request',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Need Help?</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Get support for your order</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üí¨</span> Contact</div>
                        </div>`
                    },
                    {
                        label: '2. Send Message',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí¨ Contact Support</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 10px; text-align: center;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Message sent</div>
                                <div style="font-size: 13px; opacity: 0.7;">Expected response: 24 hours</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'add_to_wallet': {
                title: 'Add to Wallet',
                steps: [
                    {
                        label: '1. Boarding Pass',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Flight UA 1234</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">SFO ‚Üí JFK</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üì≤</span> Add to Wallet</div>
                        </div>`
                    },
                    {
                        label: '2. Pass Added',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Added to Wallet!</div>
                            <div style="opacity: 0.8;">Boarding pass ready</div>
                        </div>`
                    }
                ]
            },
            'quick_reply': {
                title: 'Quick Reply',
                steps: [
                    {
                        label: '1. Email Card',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Email Thread</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Reply requested</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üí¨</span> Reply</div>
                        </div>`
                    },
                    {
                        label: '2. Compose Reply',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí¨ Quick Reply</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px; min-height: 80px; color: rgba(255,255,255,0.5); font-style: italic;">
                                Type your reply...
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Send Reply
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Sent',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reply Sent!</div>
                            <div style="opacity: 0.8;">Message delivered</div>
                        </div>`
                    }
                ]
            },
            'confirm_appointment': {
                title: 'Confirm Appointment',
                steps: [
                    {
                        label: '1. Appointment Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Dr. Martinez</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Annual Physical ‚Ä¢ Oct 30, 2pm</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úì</span> Confirm</div>
                        </div>`
                    },
                    {
                        label: '2. Confirmation',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üè• Confirm Appointment</div>
                            <div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Annual Physical</div>
                                <div style="font-size: 14px; opacity: 0.8; margin-bottom: 4px;">Dr. Martinez</div>
                                <div style="font-size: 14px; opacity: 0.8;">Oct 30, 2025 at 2:00 PM</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 14px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Confirm Appointment
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Confirmed',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Appointment Confirmed!</div>
                            <div style="opacity: 0.8;">Calendar updated</div>
                        </div>`
                    }
                ]
            },
            'reply_to_thread': {
                title: 'Reply to Thread',
                steps: [
                    {
                        label: '1. Thread Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Re: Project Update</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">3 messages in thread</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>‚Ü©Ô∏è</span> Reply</div>
                        </div>`
                    },
                    {
                        label: '2. Compose Reply',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚Ü©Ô∏è Reply to Thread</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px; min-height: 80px; color: rgba(255,255,255,0.5); font-style: italic;">
                                Type your reply...
                            </div>
                            <div style="background: rgba(100, 149, 237, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Send to Thread
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Sent',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reply Sent!</div>
                            <div style="opacity: 0.8;">Added to thread</div>
                        </div>`
                    }
                ]
            },
            'save_for_later': {
                title: 'Save for Later',
                steps: [
                    {
                        label: '1. Email Card',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Important Email</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Save to review later</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üìå</span> Save</div>
                        </div>`
                    },
                    {
                        label: '2. Saved',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Saved!</div>
                            <div style="opacity: 0.8;">Moved to Saved folder</div>
                        </div>`
                    }
                ]
            },
            'view_details': {
                title: 'View Details',
                steps: [
                    {
                        label: '1. Email Card',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Email Summary</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Tap to view full details</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÑ</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Full Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìÑ Full Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Email Content</div>
                                <div style="font-size: 14px; opacity: 0.8; line-height: 1.5;">Full email body with all details, attachments, and metadata displayed here.</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'copy_promo_code': {
                title: 'Copy Promo Code',
                steps: [
                    {
                        label: '1. Promo Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Special Offer!</div>
                            <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin: 10px 0;">SAVE25</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">25% off your order</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üìã</span> Copy Code</div>
                        </div>`
                    },
                    {
                        label: '2. Copied',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Code Copied!</div>
                            <div style="opacity: 0.8;">SAVE25 copied to clipboard</div>
                        </div>`
                    }
                ]
            },
            'cancel_subscription': {
                title: 'Cancel Subscription',
                steps: [
                    {
                        label: '1. Subscription Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Premium Subscription</div>
                            <div style="font-size: 20px; font-weight: 700; margin: 10px 0;">$9.99/mo</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 59, 48, 0.3); border-radius: 10px; font-size: 13px;"><span>‚ùå</span> Cancel</div>
                        </div>`
                    },
                    {
                        label: '2. Confirm Cancel',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚ùå Cancel Subscription</div>
                            <div style="background: rgba(255, 59, 48, 0.15); border: 2px solid rgba(255, 59, 48, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Are you sure?</div>
                                <div style="font-size: 14px; opacity: 0.8;">Your subscription will end on the current billing date</div>
                            </div>
                            <div style="background: rgba(255, 59, 48, 0.3); padding: 14px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Confirm Cancellation
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Cancelled',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Subscription Cancelled</div>
                            <div style="opacity: 0.8;">No future charges</div>
                        </div>`
                    }
                ]
            },
            'rsvp_yes': {
                title: 'Accept Invitation',
                steps: [
                    {
                        label: '1. Invitation',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Event Invitation</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 15, 2025 at 6:00 PM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úÖ</span> Accept</div>
                        </div>`
                    },
                    {
                        label: '2. Accepted',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">RSVP Sent!</div>
                            <div style="opacity: 0.8;">Event added to calendar</div>
                        </div>`
                    }
                ]
            },
            'rsvp_no': {
                title: 'Decline Invitation',
                steps: [
                    {
                        label: '1. Invitation',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Event Invitation</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 15, 2025 at 6:00 PM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 59, 48, 0.3); border-radius: 10px; font-size: 13px;"><span>‚ùå</span> Decline</div>
                        </div>`
                    },
                    {
                        label: '2. Declined',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">RSVP Sent</div>
                            <div style="opacity: 0.8;">Organizer notified</div>
                        </div>`
                    }
                ]
            },
            'file_insurance_claim': {
                title: 'File Insurance Claim',
                steps: [
                    {
                        label: '1. Medical Bill',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Medical Bill</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$450.00</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Submit to insurance</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üè•</span> File Claim</div>
                        </div>`
                    },
                    {
                        label: '2. Review Claim',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üè• Insurance Claim</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="opacity: 0.7; font-size: 12px;">Claim Amount</div>
                                <div style="font-size: 28px; font-weight: 700; color: #FFD700;">$450.00</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-top: 8px;">Provider: Dr. Martinez</div>
                            </div>
                            <div style="background: rgba(0, 122, 255, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Submit Claim
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Submitted',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Claim Submitted!</div>
                            <div style="opacity: 0.8;">Processing in 7-10 days</div>
                        </div>`
                    }
                ]
            },
            'view_pickup_details': {
                title: 'View Pickup Details',
                steps: [
                    {
                        label: '1. Prescription Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Prescription Ready</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">CVS Pharmacy</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üíä</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Pickup Info',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üíä Pickup Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">CVS Pharmacy</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">123 Main St</div>
                                <div style="font-size: 13px; opacity: 0.7;">Ready for pickup</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'pickup_prescription': {
                title: 'Pickup Prescription',
                steps: [
                    {
                        label: '1. Prescription Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Prescription Ready</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">CVS Pharmacy</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üíä</span> Pickup</div>
                        </div>`
                    },
                    {
                        label: '2. Pickup Confirmed',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Ready for Pickup!</div>
                            <div style="opacity: 0.8;">Directions added to Maps</div>
                        </div>`
                    }
                ]
            },
            'view_practice_details': {
                title: 'View Practice Details',
                steps: [
                    {
                        label: '1. Practice Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Soccer Practice</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Saturday 10:00 AM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>‚öΩ</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Practice Info',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚öΩ Practice Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Soccer Practice</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Saturday, 10:00 AM</div>
                                <div style="font-size: 13px; opacity: 0.7;">Central Park Field 3</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'accept_school_event': {
                title: 'Accept School Event',
                steps: [
                    {
                        label: '1. Event Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Parent-Teacher Conference</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 20, 2025 at 3:00 PM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úì</span> Accept</div>
                        </div>`
                    },
                    {
                        label: '2. Add to Calendar',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üéì Accept Event</div>
                            <div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Parent-Teacher Conference</div>
                                <div style="font-size: 14px; opacity: 0.8;">Nov 20, 2025 at 3:00 PM</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 14px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Accept & Add to Calendar
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Accepted',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Event Accepted!</div>
                            <div style="opacity: 0.8;">Added to your calendar</div>
                        </div>`
                    }
                ]
            },
            'view_team_announcement': {
                title: 'View Team Announcement',
                steps: [
                    {
                        label: '1. Announcement Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Team Announcement</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Important update from coach</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üì£</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Announcement',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì£ Team Announcement</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Game Schedule Update</div>
                                <div style="font-size: 14px; opacity: 0.8; line-height: 1.5;">Saturday's game has been rescheduled to 2:00 PM due to field availability.</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'write_review': {
                title: 'Write Review',
                steps: [
                    {
                        label: '1. Review Request',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">How was your order?</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Share your feedback</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 204, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>‚≠ê</span> Write Review</div>
                        </div>`
                    },
                    {
                        label: '2. Rating & Review',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚≠ê Write Review</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="display: flex; gap: 8px; margin-bottom: 12px; justify-content: center;">
                                    <span style="font-size: 28px;">‚≠ê</span>
                                    <span style="font-size: 28px;">‚≠ê</span>
                                    <span style="font-size: 28px;">‚≠ê</span>
                                    <span style="font-size: 28px;">‚≠ê</span>
                                    <span style="font-size: 28px;">‚≠ê</span>
                                </div>
                                <div style="min-height: 60px; color: rgba(255,255,255,0.5); font-style: italic; text-align: center;">
                                    Write your review...
                                </div>
                            </div>
                            <div style="background: rgba(255, 204, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Submit Review
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Submitted',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Review Submitted!</div>
                            <div style="opacity: 0.8;">Thank you for your feedback</div>
                        </div>`
                    }
                ]
            },
            'rate_product': {
                title: 'Rate Product',
                steps: [
                    {
                        label: '1. Rating Request',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Rate your purchase</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Quick star rating</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 204, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>‚≠ê</span> Rate</div>
                        </div>`
                    },
                    {
                        label: '2. Star Rating',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚≠ê Rate Product</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 24px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="display: flex; gap: 12px; justify-content: center;">
                                    <span style="font-size: 36px;">‚≠ê</span>
                                    <span style="font-size: 36px;">‚≠ê</span>
                                    <span style="font-size: 36px;">‚≠ê</span>
                                    <span style="font-size: 36px;">‚≠ê</span>
                                    <span style="font-size: 36px;">‚≠ê</span>
                                </div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Rated',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Rating Submitted!</div>
                            <div style="opacity: 0.8;">5 stars</div>
                        </div>`
                    }
                ]
            },
            'set_reminder': {
                title: 'Set Reminder',
                steps: [
                    {
                        label: '1. Sale Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Flash Sale Tomorrow</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 1, 2025 at 9:00 AM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>‚è∞</span> Remind Me</div>
                        </div>`
                    },
                    {
                        label: '2. Reminder Set',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reminder Set!</div>
                            <div style="opacity: 0.8;">You'll be notified tomorrow at 9:00 AM</div>
                        </div>`
                    }
                ]
            },
            'set_price_alert': {
                title: 'Set Price Alert',
                steps: [
                    {
                        label: '1. Product Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Product Price Tracker</div>
                            <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin: 10px 0;">$99.99</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üí∞</span> Set Alert</div>
                        </div>`
                    },
                    {
                        label: '2. Alert Set',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Price Alert Set!</div>
                            <div style="opacity: 0.8;">Product saved for monitoring (coming soon)</div>
                        </div>`
                    }
                ]
            },
            'notify_restock': {
                title: 'Restock Notification',
                steps: [
                    {
                        label: '1. Out of Stock',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Item Currently Unavailable</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Get notified when back in stock</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üîî</span> Notify Me</div>
                        </div>`
                    },
                    {
                        label: '2. Notification Set',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Notification Set!</div>
                            <div style="opacity: 0.8;">We'll email you when restocked</div>
                        </div>`
                    }
                ]
            },
            'reply_to_ticket': {
                title: 'Reply to Ticket',
                steps: [
                    {
                        label: '1. Support Ticket',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Support Ticket #12345</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Reply from support team</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üí¨</span> Reply</div>
                        </div>`
                    },
                    {
                        label: '2. Compose Reply',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí¨ Reply to Ticket</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px; min-height: 80px; color: rgba(255,255,255,0.5); font-style: italic;">
                                Type your reply...
                            </div>
                            <div style="background: rgba(147, 51, 234, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Send Reply
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Sent',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reply Sent!</div>
                            <div style="opacity: 0.8;">Ticket updated</div>
                        </div>`
                    }
                ]
            },
            'contact_driver': {
                title: 'Contact Driver',
                steps: [
                    {
                        label: '1. Delivery Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Out for Delivery</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Contact your driver</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üìû</span> Contact</div>
                        </div>`
                    },
                    {
                        label: '2. Driver Info',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üöó Contact Driver</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Driver: John</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">ETA: 10 minutes</div>
                            </div>
                            <div style="display: flex; gap: 12px;">
                                <div style="flex: 1; background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                    üìû Call
                                </div>
                                <div style="flex: 1; background: rgba(0, 122, 255, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                    üí¨ Message
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'view_introduction': {
                title: 'View Introduction',
                steps: [
                    {
                        label: '1. Intro Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Introduction</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Someone wants to connect</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üëã</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Introduction',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üëã Introduction</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Sarah Johnson</div>
                                <div style="font-size: 14px; opacity: 0.8; line-height: 1.5;">Would like to connect with you regarding a potential collaboration opportunity.</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'schedule_payment': {
                title: 'Schedule Payment',
                steps: [
                    {
                        label: '1. Bill Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Monthly Bill</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$125.00</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Due Nov 15, 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÖ</span> Schedule</div>
                        </div>`
                    },
                    {
                        label: '2. Set Date',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìÖ Schedule Payment</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="opacity: 0.7; font-size: 12px;">Amount</div>
                                <div style="font-size: 28px; font-weight: 700; color: #FFD700; margin-bottom: 12px;">$125.00</div>
                                <div style="opacity: 0.7; font-size: 12px;">Payment Date</div>
                                <div style="font-weight: 600;">Nov 15, 2025</div>
                            </div>
                            <div style="background: rgba(147, 51, 234, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Schedule Automatic Payment
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Scheduled',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Payment Scheduled!</div>
                            <div style="opacity: 0.8;">Auto-pay on Nov 15, 2025</div>
                        </div>`
                    }
                ]
            },
            'view_benefits': {
                title: 'View Benefits',
                steps: [
                    {
                        label: '1. Subscription Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your Subscription Benefits</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">See what's included</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üéÅ</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Benefits List',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üéÅ Your Benefits</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="margin-bottom: 12px;">
                                    <div style="font-weight: 600; margin-bottom: 4px;">‚úì Free Shipping</div>
                                    <div style="font-size: 13px; opacity: 0.7;">On all orders</div>
                                </div>
                                <div style="margin-bottom: 12px;">
                                    <div style="font-weight: 600; margin-bottom: 4px;">‚úì Early Access</div>
                                    <div style="font-size: 13px; opacity: 0.7;">To new products</div>
                                </div>
                                <div>
                                    <div style="font-weight: 600; margin-bottom: 4px;">‚úì 20% Discount</div>
                                    <div style="font-size: 13px; opacity: 0.7;">On all purchases</div>
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'view_onboarding_info': {
                title: 'View Onboarding Info',
                steps: [
                    {
                        label: '1. Onboarding Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Welcome to the Team!</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Your first day info</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üëî</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Onboarding Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üëî Onboarding Information</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">First Day: Nov 1, 2025</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Location: Building A, Floor 3</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Time: 9:00 AM</div>
                                <div style="font-size: 13px; opacity: 0.7;">Manager: Sarah Johnson</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'view_mortgage_details': {
                title: 'View Mortgage Details',
                steps: [
                    {
                        label: '1. Mortgage Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Refinancing Offer</div>
                            <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin: 10px 0;">3.25% APR</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">See if you qualify</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üè†</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Mortgage Info',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üè† Mortgage Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span>Interest Rate</span>
                                    <span style="font-weight: 600; color: #FFD700;">3.25% APR</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span>Estimated Payment</span>
                                    <span style="font-weight: 600;">$1,850/mo</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Loan Term</span>
                                    <span style="font-weight: 600;">30 years</span>
                                </div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Check Eligibility
                            </div>
                        </div>`
                    }
                ]
            },
            'view_legal_document': {
                title: 'View Legal Document',
                steps: [
                    {
                        label: '1. Document Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Legal Document Received</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Terms of Service Update</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÑ</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Document Preview',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚öñÔ∏è Legal Document</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Terms of Service Update</div>
                                <div style="font-size: 14px; opacity: 0.8; line-height: 1.5; margin-bottom: 12px;">We've updated our terms to better serve you...</div>
                                <div style="font-size: 12px; opacity: 0.6;">Last updated: Oct 31, 2025</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'view_newsletter_summary': {
                title: 'Newsletter Summary',
                steps: [
                    {
                        label: '1. Newsletter Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Weekly Newsletter</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">AI-generated summary</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üì∞</span> View Summary</div>
                        </div>`
                    },
                    {
                        label: '2. AI Summary',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì∞ Newsletter Summary</div>
                            <div style="background: rgba(147, 51, 234, 0.15); border: 2px solid rgba(147, 51, 234, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                                    <span>‚ú®</span>
                                    <div style="font-weight: 600; font-size: 12px; text-transform: uppercase; opacity: 0.8;">AI Summary</div>
                                </div>
                                <div style="font-size: 14px; opacity: 0.9; line-height: 1.5;">
                                    ‚Ä¢ Top story: New product launch announced<br>
                                    ‚Ä¢ Industry update: Market trends analysis<br>
                                    ‚Ä¢ Expert tip: Best practices for growth
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'buy_again': {
                title: 'Buy Again',
                steps: [
                    {
                        label: '1. Order Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your Recent Order</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Loved it? Order again!</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üõí</span> Buy Again</div>
                        </div>`
                    },
                    {
                        label: '2. Add to Cart',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üõí Reorder Items</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Previous Order #12345</div>
                                <div style="font-size: 13px; opacity: 0.7;">3 items</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üõí Add to Cart
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Order Placed',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Order Placed!</div>
                            <div style="opacity: 0.8;">Items added to cart</div>
                        </div>`
                    }
                ]
            },
            'reorder_item': {
                title: 'Reorder Item',
                steps: [
                    {
                        label: '1. Restock Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Back in Stock!</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Your favorite item is available</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üîÑ</span> Reorder</div>
                        </div>`
                    },
                    {
                        label: '2. Confirm Order',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üîÑ Confirm Reorder</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Product Name</div>
                                <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin: 8px 0;">$29.99</div>
                                <div style="font-size: 13px; opacity: 0.7;">Qty: 1</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Confirm Reorder
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Ordered',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reorder Complete!</div>
                            <div style="opacity: 0.8;">Item ordered successfully</div>
                        </div>`
                    }
                ]
            },
            'return_item': {
                title: 'Return Item',
                steps: [
                    {
                        label: '1. Order Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your Order</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Need to return something?</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üì¶</span> Return</div>
                        </div>`
                    },
                    {
                        label: '2. Select Reason',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì¶ Return Reason</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(255, 149, 0, 0.4);">
                                <div style="font-weight: 600;">Wrong size</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div>Changed my mind</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div>Damaged/Defective</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Print Label',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì¶ Return Label</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Return label generated</div>
                                <div style="font-size: 13px; opacity: 0.7;">Tracking: 1Z999AA10123456784</div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üñ®Ô∏è Print Label
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Return Initiated',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Return Initiated!</div>
                            <div style="opacity: 0.8;">Ship within 30 days</div>
                        </div>`
                    }
                ]
            },
            'complete_cart': {
                title: 'Complete Cart',
                steps: [
                    {
                        label: '1. Cart Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Items in Your Cart</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Complete your purchase</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üõçÔ∏è</span> Checkout</div>
                        </div>`
                    },
                    {
                        label: '2. Review Cart',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üõçÔ∏è Review Order</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="margin-bottom: 8px;">
                                    <div style="font-weight: 600;">Subtotal</div>
                                    <div style="font-size: 20px; color: #FFD700;">$125.00</div>
                                </div>
                                <div style="font-size: 13px; opacity: 0.7;">3 items in cart</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üí≥ Proceed to Checkout
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Order Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Order Complete!</div>
                            <div style="opacity: 0.8;">Confirmation sent to email</div>
                        </div>`
                    }
                ]
            },
            'claim_deal': {
                title: 'Claim Deal (Shopping Automation)',
                steps: [
                    {
                        label: '1. Product Deal Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px; opacity: 0.7;">Amazon</div>
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">AirPods Pro (2nd Gen)</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$199 <span style="font-size: 14px; opacity: 0.7; text-decoration: line-through;">$249</span></div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Save $50 ‚Ä¢ Limited time</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 215, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üõí</span> Claim Deal</div>
                        </div>`
                    },
                    {
                        label: '2. Platform Detection',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üîç Detecting Platform...</div>
                            <div style="background: rgba(255, 153, 0, 0.15); border: 2px solid rgba(255, 153, 0, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px; text-align: center;">
                                <div style="font-size: 40px; margin-bottom: 8px;">üì¶</div>
                                <div style="font-weight: 600; margin-bottom: 4px;">Amazon Detected</div>
                                <div style="font-size: 13px; opacity: 0.8;">Preparing automation...</div>
                            </div>
                            <div style="font-size: 11px; opacity: 0.6; text-align: center;">Powered by Steel.dev</div>
                        </div>`
                    },
                    {
                        label: '3. Adding to Cart',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üõí Adding to Cart...</div>
                            <div style="background: rgba(100, 149, 237, 0.15); border: 2px solid rgba(100, 149, 237, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">AirPods Pro (2nd Generation)</div>
                                <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Finding "Add to Cart" button...</div>
                                <div style="display: flex; gap: 4px; align-items: center;">
                                    <div style="width: 60%; height: 4px; background: rgba(100, 149, 237, 0.5); border-radius: 2px; overflow: hidden;">
                                        <div style="width: 70%; height: 100%; background: #6495ED;"></div>
                                    </div>
                                    <div style="font-size: 12px; opacity: 0.7;">70%</div>
                                </div>
                            </div>
                            <div style="font-size: 11px; opacity: 0.6; text-align: center;">Powered by Steel.dev</div>
                        </div>`
                    },
                    {
                        label: '4. Navigating to Checkout',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úÖ Item Added!</div>
                            <div style="background: rgba(34, 197, 94, 0.15); border: 2px solid rgba(34, 197, 94, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">AirPods Pro added to cart</div>
                                <div style="font-size: 13px; opacity: 0.8;">Opening checkout page...</div>
                            </div>
                            <div style="background: rgba(34, 197, 94, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üöÄ Open Checkout
                            </div>
                            <div style="font-size: 11px; opacity: 0.6; text-align: center; margin-top: 8px;">Powered by Steel.dev</div>
                        </div>`
                    },
                    {
                        label: '5. Success',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Ready to Checkout!</div>
                            <div style="opacity: 0.8; margin-bottom: 4px;">AirPods Pro in your Amazon cart</div>
                            <div style="font-size: 11px; opacity: 0.5;">amazon.com/cart</div>
                        </div>`
                    }
                ]
            },
            'view_product': {
                title: 'View Product',
                steps: [
                    {
                        label: '1. Product Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">New Arrival</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Check out this product</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üëÄ</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Product Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üëÄ Product Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Premium Wireless Headphones</div>
                                <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 8px 0;">$199.99</div>
                                <div style="font-size: 13px; opacity: 0.7;">‚≠ê 4.8/5 (2,341 reviews)</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'redeem_rewards': {
                title: 'Redeem Rewards',
                steps: [
                    {
                        label: '1. Rewards Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Rewards Available</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">5,000 points</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Ready to redeem</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 215, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üéâ</span> Redeem</div>
                        </div>`
                    },
                    {
                        label: '2. Select Reward',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üéâ Choose Reward</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(255, 215, 0, 0.4);">
                                <div style="font-weight: 600;">$50 Gift Card</div>
                                <div style="font-size: 12px; opacity: 0.7;">5,000 points</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">$25 Gift Card</div>
                                <div style="font-size: 12px; opacity: 0.7;">2,500 points</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Confirm Redemption',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üéâ Confirm</div>
                            <div style="background: rgba(255, 215, 0, 0.15); border: 2px solid rgba(255, 215, 0, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">$50 Gift Card</div>
                                <div style="font-size: 13px; opacity: 0.8;">Cost: 5,000 points</div>
                            </div>
                            <div style="background: rgba(255, 215, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Redeem Reward
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Redeemed',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Redeemed!</div>
                            <div style="opacity: 0.8;">Gift card sent to email</div>
                        </div>`
                    }
                ]
            },
            'view_announcement': {
                title: 'View Announcement',
                steps: [
                    {
                        label: '1. Announcement Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Important Update</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">New features available</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üì¢</span> Read</div>
                        </div>`
                    },
                    {
                        label: '2. Announcement Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì¢ Brand Update</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">What's New</div>
                                <div style="font-size: 14px; opacity: 0.9; line-height: 1.5;">
                                    ‚Ä¢ New product features<br>
                                    ‚Ä¢ Improved performance<br>
                                    ‚Ä¢ Enhanced user experience
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'track_delivery': {
                title: 'Track Delivery',
                steps: [
                    {
                        label: '1. Delivery Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Out for Delivery</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Arriving today</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üöö</span> Track</div>
                        </div>`
                    },
                    {
                        label: '2. Live Tracking',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üöö Live Tracking</div>
                            <div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Driver is 5 min away</div>
                                <div style="font-size: 13px; opacity: 0.8;">Order #12345</div>
                            </div>
                            <div style="text-align: center; opacity: 0.7; font-size: 12px;">üó∫Ô∏è Map view</div>
                        </div>`
                    },
                    {
                        label: '3. Delivery Status',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Arriving Soon!</div>
                            <div style="opacity: 0.8;">ETA: 3:45 PM</div>
                        </div>`
                    }
                ]
            },
            'track_return': {
                title: 'Track Return',
                steps: [
                    {
                        label: '1. Return Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Return Shipped</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Track your return</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üì¶</span> Track</div>
                        </div>`
                    },
                    {
                        label: '2. Return Status',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì¶ Return Status</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">In Transit</div>
                                <div style="font-size: 13px; opacity: 0.7;">Tracking: 1Z999AA10123456784</div>
                                <div style="font-size: 13px; opacity: 0.7;">Expected: Nov 5, 2025</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Refund Timeline',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì¶ Refund Info</div>
                            <div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Refund Amount: $49.99</div>
                                <div style="font-size: 13px; opacity: 0.8;">Processing 3-5 business days after receipt</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'print_return_label': {
                title: 'Print Return Label',
                steps: [
                    {
                        label: '1. Return Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Return Approved</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Print your label</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üñ®Ô∏è</span> Print</div>
                        </div>`
                    },
                    {
                        label: '2. Generate Label',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üñ®Ô∏è Shipping Label</div>
                            <div style="background: rgba(255,255,255,0.95); padding: 16px; border-radius: 10px; margin-bottom: 12px; color: #000;">
                                <div style="font-weight: 600; margin-bottom: 4px;">USPS Priority Mail</div>
                                <div style="font-size: 11px; opacity: 0.7;">1Z999AA10123456784</div>
                                <div style="border: 1px dashed #ccc; padding: 8px; margin-top: 8px; font-size: 10px;">
                                    [Barcode]
                                </div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üñ®Ô∏è Print Label
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Ready to Ship',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Label Ready!</div>
                            <div style="opacity: 0.8;">Attach to package</div>
                        </div>`
                    }
                ]
            },
            'view_warranty': {
                title: 'View Warranty',
                steps: [
                    {
                        label: '1. Product Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Warranty Information</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Check coverage</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üõ°Ô∏è</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Warranty Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üõ°Ô∏è Warranty Coverage</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">2-Year Limited Warranty</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Expires: Nov 1, 2026</div>
                                <div style="font-size: 13px; opacity: 0.7;">Coverage: Parts & Labor</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'download_receipt': {
                title: 'Download Receipt',
                steps: [
                    {
                        label: '1. Payment Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Payment Received</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Download your receipt</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üì•</span> Download</div>
                        </div>`
                    },
                    {
                        label: '2. Receipt Preview',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì• Receipt</div>
                            <div style="background: rgba(255,255,255,0.95); padding: 16px; border-radius: 10px; margin-bottom: 12px; color: #000;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Receipt #R-2025-001</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Date: Nov 1, 2025</div>
                                <div style="font-size: 20px; font-weight: 700; color: #0066CC; margin-top: 8px;">$599.00</div>
                            </div>
                            <div style="background: rgba(100, 149, 237, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üì• Download PDF
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Downloaded',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Downloaded!</div>
                            <div style="opacity: 0.8;">Receipt saved</div>
                        </div>`
                    }
                ]
            },
            'view_statement': {
                title: 'View Statement',
                steps: [
                    {
                        label: '1. Statement Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Monthly Statement</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">October 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìä</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Statement Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìä Account Statement</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="margin-bottom: 12px;">
                                    <div style="font-size: 12px; opacity: 0.7;">Previous Balance</div>
                                    <div style="font-weight: 600;">$1,234.56</div>
                                </div>
                                <div style="margin-bottom: 12px;">
                                    <div style="font-size: 12px; opacity: 0.7;">New Charges</div>
                                    <div style="font-weight: 600;">$567.89</div>
                                </div>
                                <div style="border-top: 1px solid rgba(255,255,255,0.2); padding-top: 12px;">
                                    <div style="font-size: 12px; opacity: 0.7;">Current Balance</div>
                                    <div style="font-size: 24px; font-weight: 700; color: #FFD700;">$1,802.45</div>
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'update_payment': {
                title: 'Update Payment',
                steps: [
                    {
                        label: '1. Payment Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Update Payment Method</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Card ending in 1234 expires soon</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üí≥</span> Update</div>
                        </div>`
                    },
                    {
                        label: '2. Select Method',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí≥ Payment Method</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(100, 149, 237, 0.4);">
                                <div style="font-weight: 600;">üí≥ Credit Card</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">üè¶ Bank Account</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;"> Apple Pay</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Enter Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí≥ Card Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-size: 12px; opacity: 0.7; margin-bottom: 4px;">Card Number</div>
                                <div>‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 5678</div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 12px;">
                                <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px;">
                                    <div style="font-size: 12px; opacity: 0.7;">Expiry</div>
                                    <div>12/27</div>
                                </div>
                                <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px;">
                                    <div style="font-size: 12px; opacity: 0.7;">CVV</div>
                                    <div>‚Ä¢‚Ä¢‚Ä¢</div>
                                </div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Save Card
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Updated',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Payment Updated!</div>
                            <div style="opacity: 0.8;">Card saved successfully</div>
                        </div>`
                    }
                ]
            },
            'update_payment_method': {
                title: 'Update Payment Method',
                steps: [
                    {
                        label: '1. Account Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Payment Method Expiring</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Update to continue service</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üí≥</span> Update</div>
                        </div>`
                    },
                    {
                        label: '2. Choose Method',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí≥ Choose Payment</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(52, 199, 89, 0.4);">
                                <div style="font-weight: 600;"> Apple Pay</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">üí≥ New Card</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Confirm',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí≥ Confirm Change</div>
                            <div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">New Default Payment</div>
                                <div style="font-size: 13px; opacity: 0.8;"> Apple Pay</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Confirm
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Updated',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Method Updated!</div>
                            <div style="opacity: 0.8;">Default payment changed</div>
                        </div>`
                    }
                ]
            },
            'dispute_transaction': {
                title: 'Dispute Transaction',
                steps: [
                    {
                        label: '1. Transaction Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Unrecognized Transaction</div>
                            <div style="font-size: 20px; font-weight: 700; color: #FF3B30; margin: 10px 0;">$234.56</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 1, 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 59, 48, 0.3); border-radius: 10px; font-size: 13px;"><span>‚ö†Ô∏è</span> Dispute</div>
                        </div>`
                    },
                    {
                        label: '2. Select Reason',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚ö†Ô∏è Dispute Reason</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(255, 59, 48, 0.4);">
                                <div style="font-weight: 600;">Fraudulent Charge</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">Not Received</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">Wrong Amount</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Submit Evidence',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚ö†Ô∏è Additional Info</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-size: 12px; opacity: 0.7; margin-bottom: 8px;">Description (optional)</div>
                                <div style="font-size: 14px;">I did not authorize this transaction...</div>
                            </div>
                            <div style="background: rgba(255, 59, 48, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üì§ Submit Dispute
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Filed',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Dispute Filed!</div>
                            <div style="opacity: 0.8;">Review in 5-7 days</div>
                        </div>`
                    }
                ]
            },
            'view_credit_report': {
                title: 'View Credit Report',
                steps: [
                    {
                        label: '1. Report Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Credit Report Available</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Check your score</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üìà</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Verify Identity',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìà Verify Identity</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-size: 12px; opacity: 0.7; margin-bottom: 8px;">Last 4 of SSN</div>
                                <div>‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 1234</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Verify
                            </div>
                        </div>`
                    },
                    {
                        label: '3. View Report',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìà Credit Score</div>
                            <div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px; text-align: center;">
                                <div style="font-size: 48px; font-weight: 700; color: #34C759; margin-bottom: 8px;">750</div>
                                <div style="font-size: 14px; opacity: 0.8;">Good Credit</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'view_portfolio': {
                title: 'View Portfolio',
                steps: [
                    {
                        label: '1. Portfolio Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Portfolio Update</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">October 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üíº</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Portfolio Dashboard',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üíº Portfolio</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="margin-bottom: 12px;">
                                    <div style="font-size: 12px; opacity: 0.7;">Total Value</div>
                                    <div style="font-size: 28px; font-weight: 700; color: #FFD700;">$52,341.89</div>
                                </div>
                                <div style="font-size: 13px; opacity: 0.7; color: #34C759;">
                                    ‚Üë +$2,450.32 (4.9%)
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'verify_transaction': {
                title: 'Verify Transaction',
                steps: [
                    {
                        label: '1. Transaction Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Verify This Purchase?</div>
                            <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin: 10px 0;">$123.45</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 1, 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úÖ</span> Verify</div>
                        </div>`
                    },
                    {
                        label: '2. Confirm/Deny',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úÖ Was This You?</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Amazon.com</div>
                                <div style="font-size: 20px; color: #FFD700; margin: 8px 0;">$123.45</div>
                                <div style="font-size: 13px; opacity: 0.7;">Nov 1, 2025 3:42 PM</div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                                <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                    ‚úì Yes, It's Me
                                </div>
                                <div style="background: rgba(255, 59, 48, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                    ‚úó Not Me
                                </div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Verified',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Transaction Verified!</div>
                            <div style="opacity: 0.8;">Thank you for confirming</div>
                        </div>`
                    }
                ]
            },
            'view_refund_status': {
                title: 'View Refund',
                steps: [
                    {
                        label: '1. Refund Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Refund Processing</div>
                            <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin: 10px 0;">$49.99</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Track status</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üí∞</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Refund Timeline',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí∞ Refund Status</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 12px;">Processing</div>
                                <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin-bottom: 8px;">$49.99</div>
                                <div style="font-size: 13px; opacity: 0.7;">Expected: 3-5 business days</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'pay_property_tax': {
                title: 'Pay Property Tax',
                steps: [
                    {
                        label: '1. Tax Bill Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Property Tax Due</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$2,450.00</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Due: Dec 31, 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üè†</span> Pay</div>
                        </div>`
                    },
                    {
                        label: '2. Review Amount',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üè† Tax Payment</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">123 Main St, Anytown, CA</div>
                                <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 8px 0;">$2,450.00</div>
                                <div style="font-size: 13px; opacity: 0.7;">Tax Year: 2025</div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üí≥ Pay Now
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Payment Processing',
                        html: `<div class="modal-preview-card" style="background: rgba(59, 130, 246, 0.15); border-color: rgba(59, 130, 246, 0.4);">
                            <div style="width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.2); border-top-color: #3B82F6; border-radius: 50%; margin: 0 auto 16px; animation: spin 1s linear infinite;"></div>
                            <div style="text-align: center; font-weight: 600;">Processing Payment...</div>
                        </div>`
                    },
                    {
                        label: '4. Receipt',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Payment Complete!</div>
                            <div style="opacity: 0.8;">Receipt sent to email</div>
                        </div>`
                    }
                ]
            },
            'pay_utility_bill': {
                title: 'Pay Utility Bill',
                steps: [
                    {
                        label: '1. Bill Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Utility Bill Due</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">$145.67</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Due: Nov 15, 2025</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üí°</span> Pay</div>
                        </div>`
                    },
                    {
                        label: '2. Confirm Amount',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí° Pay Bill</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Electric Service</div>
                                <div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 8px 0;">$145.67</div>
                                <div style="font-size: 13px; opacity: 0.7;">Account: ****5678</div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üí≥ Pay with Apple Pay
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Processing',
                        html: `<div class="modal-preview-card" style="background: rgba(59, 130, 246, 0.15); border-color: rgba(59, 130, 246, 0.4);">
                            <div style="width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.2); border-top-color: #3B82F6; border-radius: 50%; margin: 0 auto 16px; animation: spin 1s linear infinite;"></div>
                            <div style="text-align: center; font-weight: 600;">Processing Payment...</div>
                        </div>`
                    },
                    {
                        label: '4. Paid',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Bill Paid!</div>
                            <div style="opacity: 0.8;">Confirmation sent</div>
                        </div>`
                    }
                ]
            },
            'download_tax_document': {
                title: 'Download Tax Form',
                steps: [
                    {
                        label: '1. Tax Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Tax Documents Available</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">2024 Forms Ready</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìë</span> Download</div>
                        </div>`
                    },
                    {
                        label: '2. Select Form',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìë Tax Documents</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(100, 149, 237, 0.4);">
                                <div style="font-weight: 600;">Form 1099-INT</div>
                                <div style="font-size: 12px; opacity: 0.7;">Tax Year 2024</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">Form 1099-DIV</div>
                                <div style="font-size: 12px; opacity: 0.7;">Tax Year 2024</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Downloaded',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Downloaded!</div>
                            <div style="opacity: 0.8;">Form 1099-INT.pdf</div>
                        </div>`
                    }
                ]
            },
            'manage_subscription': {
                title: 'Manage Subscription',
                steps: [
                    {
                        label: '1. Subscription Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your Subscription</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Manage settings</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>‚öôÔ∏è</span> Manage</div>
                        </div>`
                    },
                    {
                        label: '2. Subscription Settings',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚öôÔ∏è Subscription</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Premium Plan</div>
                                <div style="font-size: 20px; color: #FFD700; margin: 8px 0;">$9.99/mo</div>
                                <div style="font-size: 13px; opacity: 0.7;">Renews Dec 1, 2025</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">Change Plan</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">Update Payment</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Updated',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Settings Updated!</div>
                            <div style="opacity: 0.8;">Changes saved</div>
                        </div>`
                    }
                ]
            },
            'upgrade_subscription': {
                title: 'Upgrade Subscription',
                steps: [
                    {
                        label: '1. Upgrade Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Unlock Premium Features</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Upgrade today!</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 215, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>‚≠ê</span> Upgrade</div>
                        </div>`
                    },
                    {
                        label: '2. Select Plan',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚≠ê Choose Plan</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">Pro Plan</div>
                                <div style="font-size: 20px; color: #FFD700; margin: 8px 0;">$19.99/mo</div>
                            </div>
                            <div style="background: rgba(255, 215, 0, 0.15); border: 2px solid rgba(255, 215, 0, 0.4); padding: 16px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">Premium Plan</div>
                                <div style="font-size: 20px; color: #FFD700; margin: 8px 0;">$29.99/mo</div>
                                <div style="font-size: 12px; opacity: 0.8;">‚úì All features</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Payment',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚≠ê Confirm Upgrade</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Premium Plan</div>
                                <div style="font-size: 24px; color: #FFD700; margin: 8px 0;">$29.99/mo</div>
                                <div style="font-size: 13px; opacity: 0.7;">Billed monthly</div>
                            </div>
                            <div style="background: rgba(255, 215, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üí≥ Upgrade Now
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Upgraded',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Upgraded!</div>
                            <div style="opacity: 0.8;">Welcome to Premium</div>
                        </div>`
                    }
                ]
            },
            'view_reservation': {
                title: 'View Reservation',
                steps: [
                    {
                        label: '1. Confirmation Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Reservation Confirmed</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 15, 2025 at 7:00 PM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üçΩÔ∏è</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Reservation Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üçΩÔ∏è Your Reservation</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">The Italian Kitchen</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">üìÖ Nov 15, 2025 at 7:00 PM</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">üë• Party of 4</div>
                                <div style="font-size: 13px; opacity: 0.7;">Conf: #R-12345</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'modify_reservation': {
                title: 'Modify Reservation',
                steps: [
                    {
                        label: '1. Confirmation Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your Reservation</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 15, 2025 at 7:00 PM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úèÔ∏è</span> Modify</div>
                        </div>`
                    },
                    {
                        label: '2. Change Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úèÔ∏è Modify Reservation</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-size: 12px; opacity: 0.7;">Date & Time</div>
                                <div style="font-weight: 600;">Nov 15, 7:00 PM ‚Üí</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-size: 12px; opacity: 0.7;">Party Size</div>
                                <div style="font-weight: 600;">4 guests ‚Üí</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Confirm Changes',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úèÔ∏è Confirm</div>
                            <div style="background: rgba(255, 149, 0, 0.15); border: 2px solid rgba(255, 149, 0, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">New Time: Nov 16, 8:00 PM</div>
                                <div style="font-size: 13px; opacity: 0.8;">Party of 4</div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                ‚úì Confirm Changes
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Updated',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reservation Updated!</div>
                            <div style="opacity: 0.8;">Confirmation sent</div>
                        </div>`
                    }
                ]
            },
            'view_itinerary': {
                title: 'View Itinerary',
                steps: [
                    {
                        label: '1. Travel Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Trip Itinerary</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Conf: ABC123</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úàÔ∏è</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Full Itinerary',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úàÔ∏è Travel Itinerary</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="margin-bottom: 12px;">
                                    <div style="font-weight: 600;">‚úàÔ∏è Outbound Flight</div>
                                    <div style="font-size: 13px; opacity: 0.7;">AA 1234 ‚Ä¢ Nov 15, 9:00 AM</div>
                                </div>
                                <div style="margin-bottom: 12px;">
                                    <div style="font-weight: 600;">üè® Hotel Stay</div>
                                    <div style="font-size: 13px; opacity: 0.7;">Nov 15-18, 2025</div>
                                </div>
                                <div>
                                    <div style="font-weight: 600;">‚úàÔ∏è Return Flight</div>
                                    <div style="font-size: 13px; opacity: 0.7;">AA 5678 ‚Ä¢ Nov 18, 6:00 PM</div>
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'manage_booking': {
                title: 'Manage Booking',
                steps: [
                    {
                        label: '1. Booking Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your Booking</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Conf: XYZ789</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>‚öôÔ∏è</span> Manage</div>
                        </div>`
                    },
                    {
                        label: '2. Booking Options',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚öôÔ∏è Manage Booking</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">‚úèÔ∏è Modify Reservation</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">‚ùå Cancel Booking</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600;">üìß Resend Confirmation</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Action Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Booking Updated!</div>
                            <div style="opacity: 0.8;">Changes saved</div>
                        </div>`
                    }
                ]
            },
            'view_assignment': {
                title: 'View Assignment',
                steps: [
                    { label: '1. Assignment Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">New Assignment Posted</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Due Nov 20, 2025</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìù</span> View</div></div>` },
                    { label: '2. Assignment Details', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìù Assignment</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px;"><div style="font-weight: 600; margin-bottom: 8px;">Math Chapter 5 Problems</div><div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Due: Nov 20, 2025</div><div style="font-size: 13px; opacity: 0.7;">Points: 50</div></div></div>` }
                ]
            },
            'check_grade': {
                title: 'Check Grade',
                steps: [
                    { label: '1. Grade Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Grade Posted</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Math Test #3</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üìä</span> View</div></div>` },
                    { label: '2. Grade Breakdown', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìä Your Grade</div><div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; text-align: center;"><div style="font-size: 48px; font-weight: 700; color: #34C759;">92%</div><div style="font-size: 14px; opacity: 0.8;">Grade: A-</div></div></div>` }
                ]
            },
            'view_lms_message': {
                title: 'View Message',
                steps: [
                    { label: '1. Message Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">New Message from Teacher</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Ms. Johnson</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üí¨</span> Read</div></div>` },
                    { label: '2. Message Thread', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí¨ Message</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px;"><div style="font-weight: 600; margin-bottom: 8px;">From: Ms. Johnson</div><div style="font-size: 14px; opacity: 0.9;">Please review Chapter 5 before tomorrow's class...</div></div></div>` }
                ]
            },
            'reply_to_teacher': {
                title: 'Reply to Teacher',
                steps: [
                    { label: '1. Message Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Message from Ms. Johnson</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Question about assignment</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úâÔ∏è</span> Reply</div></div>` },
                    { label: '2. Compose Reply', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úâÔ∏è Reply</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;"><div style="font-size: 14px; opacity: 0.9;">Thank you for clarifying...</div></div><div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">üì§ Send Reply</div></div>` },
                    { label: '3. Sent', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reply Sent!</div><div style="opacity: 0.8;">Message delivered</div></div>` }
                ]
            },
            'submit_assignment': {
                title: 'Submit Assignment',
                steps: [
                    { label: '1. Assignment Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Assignment Due Soon</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Due Nov 20, 2025</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üì§</span> Submit</div></div>` },
                    { label: '2. Upload File', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì§ Submit Work</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;"><div style="font-weight: 600; margin-bottom: 8px;">Math_Assignment.pdf</div><div style="font-size: 13px; opacity: 0.7;">2.3 MB</div></div><div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">üì§ Submit Assignment</div></div>` },
                    { label: '3. Review', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì§ Confirm Submission</div><div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Math_Assignment.pdf</div><div style="font-size: 13px; opacity: 0.8;">Ready to submit</div></div><div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Confirm</div></div>` },
                    { label: '4. Submitted', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Submitted!</div><div style="opacity: 0.8;">Assignment received</div></div>` }
                ]
            },
            'rsvp_school_event': {
                title: 'RSVP School Event',
                steps: [
                    { label: '1. Event Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">School Play Invitation</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Dec 10, 2025 at 7:00 PM</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üéì</span> RSVP</div></div>` },
                    { label: '2. Confirm Attendance', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üéì RSVP</div><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;"><div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Attending</div><div style="background: rgba(255, 59, 48, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úó Not Attending</div></div></div>` },
                    { label: '3. Confirmed', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">RSVP Confirmed!</div><div style="opacity: 0.8;">See you there</div></div>` }
                ]
            },
            'view_game_schedule': {
                title: 'View Schedule',
                steps: [
                    { label: '1. Schedule Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Basketball Schedule</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Fall 2025 Season</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üèÄ</span> View</div></div>` },
                    { label: '2. Game Calendar', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üèÄ Season Schedule</div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div style="font-weight: 600;">vs. Eagles</div><div style="font-size: 13px; opacity: 0.7;">Nov 15 @ 6:00 PM</div></div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div style="font-weight: 600;">vs. Tigers</div><div style="font-size: 13px; opacity: 0.7;">Nov 22 @ 5:30 PM</div></div></div>` }
                ]
            },
            'rsvp_game': {
                title: 'RSVP Game',
                steps: [
                    { label: '1. Game Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Upcoming Soccer Game</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Saturday @ 10:00 AM</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>‚öΩ</span> RSVP</div></div>` },
                    { label: '2. Confirm Attendance', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚öΩ Will You Attend?</div><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;"><div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Yes</div><div style="background: rgba(255, 59, 48, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úó No</div></div></div>` },
                    { label: '3. Confirmed', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">RSVP Received!</div><div style="opacity: 0.8;">Coach notified</div></div>` }
                ]
            },        // Compound Action Flows (Multi-Step Wizards)
            'check_in_appointment': {title: 'Check In', steps: [{label: '1. Appointment Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Appointment Tomorrow</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">10:00 AM</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úÖ</span> Check In</div></div>`}, {label: '2. Confirm Info', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úÖ Check-In</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;"><div style="font-weight: 600;">Dr. Smith</div><div style="font-size: 13px; opacity: 0.7;">Nov 15, 10:00 AM</div></div><div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Check In Now</div></div>`}, {label: '3. Checked In', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Checked In!</div><div style="opacity: 0.8;">Please arrive 10 min early</div></div>`}]},
            'get_directions': {title: 'Get Directions', steps: [{label: '1. Appointment Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Dr. Smith Appointment</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">123 Medical Plaza</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üó∫Ô∏è</span> Directions</div></div>`}, {label: '2. Opening Maps', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üó∫Ô∏è Directions</div><div style="background: rgba(100, 149, 237, 0.15); border: 2px solid rgba(100, 149, 237, 0.4); padding: 16px; border-radius: 12px;"><div style="font-weight: 600; margin-bottom: 4px;">123 Medical Plaza</div><div style="font-size: 13px; opacity: 0.8;">Opening in Maps...</div></div></div>`}]},
            'view_results': {title: 'View Results', steps: [{label: '1. Results Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Lab Results Available</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Blood Test - Complete</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üìã</span> View</div></div>`}, {label: '2. Verify Identity', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìã Secure Access</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;"><div style="font-size: 12px; opacity: 0.7;">DOB</div><div>MM/DD/YYYY</div></div><div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Verify</div></div>`}, {label: '3. View Results', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìã Lab Results</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px;"><div style="font-weight: 600; margin-bottom: 8px;">Blood Test - Complete</div><div style="font-size: 13px; opacity: 0.7;">All values normal</div></div></div>`}]},
            'download_results': {title: 'Download Results', steps: [{label: '1. Results Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Lab Results Ready</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Download PDF</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üì•</span> Download</div></div>`}, {label: '2. PDF Preview', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì• Results PDF</div><div style="background: rgba(255,255,255,0.95); padding: 16px; border-radius: 10px; margin-bottom: 12px; color: #000;"><div style="font-weight: 600;">Lab_Results_11-01-2025.pdf</div><div style="font-size: 12px; opacity: 0.7;">854 KB</div></div><div style="background: rgba(100, 149, 237, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">üì• Download</div></div>`}, {label: '3. Downloaded', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Downloaded!</div><div style="opacity: 0.8;">Results saved</div></div>`}]},
            'reschedule_appointment': {title: 'Reschedule', steps: [{label: '1. Appointment Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your Appointment</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 15 @ 10:00 AM</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÖ</span> Reschedule</div></div>`}, {label: '2. Select Date', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìÖ New Date</div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(255, 149, 0, 0.4);"><div style="font-weight: 600;">Nov 16 @ 2:00 PM</div></div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div>Nov 17 @ 10:00 AM</div></div></div>`}, {label: '3. Confirm', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìÖ Confirm</div><div style="background: rgba(255, 149, 0, 0.15); border: 2px solid rgba(255, 149, 0, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">New: Nov 16 @ 2:00 PM</div></div><div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Confirm</div></div>`}, {label: '4. Rescheduled', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Rescheduled!</div><div style="opacity: 0.8;">Confirmation sent</div></div>`}]},
            'view_referral': {title: 'View Referral', steps: [{label: '1. Referral Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Specialist Referral</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Dr. Johnson - Cardiology</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üë®‚Äç‚öïÔ∏è</span> View</div></div>`}, {label: '2. Referral Details', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üë®‚Äç‚öïÔ∏è Referral</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px;"><div style="font-weight: 600; margin-bottom: 8px;">Dr. Sarah Johnson</div><div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Cardiology</div><div style="font-size: 13px; opacity: 0.7;">üìû (555) 123-4567</div></div></div>`}]},
            'schedule_test': {title: 'Schedule Test', steps: [{label: '1. Test Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Lab Work Ordered</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Blood Test Required</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üß™</span> Schedule</div></div>`}, {label: '2. Select Time', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üß™ Available Times</div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(147, 51, 234, 0.4);"><div style="font-weight: 600;">Nov 15 @ 8:00 AM</div></div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div>Nov 16 @ 9:00 AM</div></div></div>`}, {label: '3. Confirm', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üß™ Confirm</div><div style="background: rgba(147, 51, 234, 0.15); border: 2px solid rgba(147, 51, 234, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Blood Test</div><div style="font-size: 13px; opacity: 0.8;">Nov 15 @ 8:00 AM</div></div><div style="background: rgba(147, 51, 234, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Schedule</div></div>`}, {label: '4. Scheduled', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Test Scheduled!</div><div style="opacity: 0.8;">Reminder sent</div></div>`}]},
            'view_claim_status': {title: 'View Claim', steps: [{label: '1. Claim Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Insurance Claim Update</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Claim #C-12345</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üíº</span> View</div></div>`}, {label: '2. Claim Tracker', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üíº Claim Status</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px;"><div style="font-weight: 600; margin-bottom: 8px;">Claim #C-12345</div><div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Status: Under Review</div><div style="font-size: 13px; opacity: 0.7;">Est. Decision: 5-7 days</div></div></div>`}]},
            'schedule_interview': {title: 'Schedule Interview', steps: [{label: '1. Interview Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Interview Invitation</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Acme Corp - Software Engineer</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>ü§ù</span> Schedule</div></div>`}, {label: '2. Select Time', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">ü§ù Available Slots</div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(52, 199, 89, 0.4);"><div style="font-weight: 600;">Nov 18 @ 2:00 PM</div></div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div>Nov 19 @ 10:00 AM</div></div></div>`}, {label: '3. Confirm', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">ü§ù Confirm</div><div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Software Engineer Interview</div><div style="font-size: 13px; opacity: 0.8;">Nov 18 @ 2:00 PM</div></div><div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Schedule Interview</div></div>`}, {label: '4. Scheduled', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Interview Scheduled!</div><div style="opacity: 0.8;">Calendar invite sent</div></div>`}]},
            'accept_offer': {title: 'Accept Offer', steps: [{label: '1. Offer Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Job Offer</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Software Engineer @ Acme Corp</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 215, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üéâ</span> Review</div></div>`}, {label: '2. Review Terms', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üéâ Job Offer</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;"><div style="font-weight: 600; margin-bottom: 8px;">Software Engineer</div><div style="font-size: 20px; color: #FFD700; margin: 8px 0;">$120,000/year</div><div style="font-size: 13px; opacity: 0.7;">Start: Dec 1, 2025</div></div></div>`}, {label: '3. Accept', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üéâ Accept Offer</div><div style="background: rgba(255, 215, 0, 0.15); border: 2px solid rgba(255, 215, 0, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Ready to accept?</div><div style="font-size: 13px; opacity: 0.8;">This action is binding</div></div><div style="background: rgba(255, 215, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Accept Offer</div></div>`}, {label: '4. Accepted', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Offer Accepted!</div><div style="opacity: 0.8;">Welcome aboard!</div></div>`}]},
            'view_job_details': {title: 'View Job Details', steps: [{label: '1. Job Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Job Opening</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Software Engineer</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üíº</span> View</div></div>`}, {label: '2. Full Description', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üíº Job Details</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px;"><div style="font-weight: 600; margin-bottom: 8px;">Software Engineer</div><div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">üìç San Francisco, CA</div><div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">üí∞ $100k-150k</div><div style="font-size: 13px; opacity: 0.7;">‚è∞ Full-time</div></div></div>`}]},
            'check_application_status': {title: 'Check Status', steps: [{label: '1. Application Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Application Update</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Software Engineer @ Acme</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìä</span> Check</div></div>`}, {label: '2. Status Tracker', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìä Application Status</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px;"><div style="font-weight: 600; margin-bottom: 8px;">Software Engineer</div><div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Status: Under Review</div><div style="font-size: 13px; opacity: 0.7;">Applied: Oct 25, 2025</div></div></div>`}]},
            'schedule_meeting': {title: 'Schedule Meeting', steps: [{label: '1. Meeting Request', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Meeting Request</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Project Discussion</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÖ</span> Schedule</div></div>`}, {label: '2. Select Time', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìÖ Available Times</div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(100, 149, 237, 0.4);"><div style="font-weight: 600;">Nov 15 @ 2:00 PM</div></div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div>Nov 16 @ 10:00 AM</div></div></div>`}, {label: '3. Confirm', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìÖ Confirm</div><div style="background: rgba(100, 149, 237, 0.15); border: 2px solid rgba(100, 149, 237, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Project Discussion</div><div style="font-size: 13px; opacity: 0.8;">Nov 15 @ 2:00 PM (30 min)</div></div><div style="background: rgba(100, 149, 237, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Schedule</div></div>`}, {label: '4. Scheduled', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Meeting Scheduled!</div><div style="opacity: 0.8;">Calendar invite sent</div></div>`}]},
            'register_to_vote': {title: 'Register to Vote', steps: [{label: '1. Registration Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Voter Registration</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Deadline: Nov 30, 2025</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üó≥Ô∏è</span> Register</div></div>`}, {label: '2. Fill Form', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üó≥Ô∏è Registration</div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div style="font-size: 12px; opacity: 0.7;">Name</div><div>John Smith</div></div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div style="font-size: 12px; opacity: 0.7;">Address</div><div>123 Main St</div></div></div>`}, {label: '3. Verify', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üó≥Ô∏è Verify</div><div style="background: rgba(100, 149, 237, 0.15); border: 2px solid rgba(100, 149, 237, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Review & Submit</div><div style="font-size: 13px; opacity: 0.8;">All information correct?</div></div><div style="background: rgba(100, 149, 237, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Submit</div></div>`}, {label: '4. Registered', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Registered!</div><div style="opacity: 0.8;">Confirmation mailed</div></div>`}]},
            'renew_license': {title: 'Renew License', steps: [{label: '1. Renewal Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">License Expiring</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Expires: Dec 31, 2025</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>ü™™</span> Renew</div></div>`}, {label: '2. Upload Photo', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">ü™™ New Photo</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;"><div style="font-weight: 600; margin-bottom: 8px;">üì∏ Upload Photo</div><div style="font-size: 13px; opacity: 0.7;">Max 5MB, JPG/PNG</div></div><div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">üì∏ Take Photo</div></div>`}, {label: '3. Pay Fee', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">ü™™ Pay Fee</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;"><div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 8px 0;">$35.00</div><div style="font-size: 13px; opacity: 0.7;">License Renewal Fee</div></div><div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">üí≥ Pay Now</div></div>`}, {label: '4. Renewed', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">License Renewed!</div><div style="opacity: 0.8;">Arrives in 7-10 days</div></div>`}]},
            'apply_for_permit': {title: 'Apply for Permit', steps: [{label: '1. Permit Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Permit Application</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Building Permit</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìã</span> Apply</div></div>`}, {label: '2. Application Form', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìã Application</div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div style="font-size: 12px; opacity: 0.7;">Property Address</div><div>123 Main St</div></div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div style="font-size: 12px; opacity: 0.7;">Project Type</div><div>Deck Addition</div></div></div>`}, {label: '3. Submit', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìã Submit</div><div style="background: rgba(100, 149, 237, 0.15); border: 2px solid rgba(100, 149, 237, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Application Fee: $150</div><div style="font-size: 13px; opacity: 0.8;">Review time: 2-4 weeks</div></div><div style="background: rgba(100, 149, 237, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">üì§ Submit & Pay</div></div>`}, {label: '4. Submitted', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Application Submitted!</div><div style="opacity: 0.8;">Tracking #P-12345</div></div>`}]},
            'view_ballot': {title: 'View Ballot', steps: [{label: '1. Ballot Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Sample Ballot Available</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 5, 2025 Election</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üó≥Ô∏è</span> View</div></div>`}, {label: '2. Ballot Preview', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üó≥Ô∏è Sample Ballot</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px;"><div style="font-weight: 600; margin-bottom: 8px;">Nov 5, 2025 Election</div><div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">‚Ä¢ Federal Offices</div><div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">‚Ä¢ State Propositions</div><div style="font-size: 13px; opacity: 0.7;">‚Ä¢ Local Measures</div></div></div>`}]},
            'confirm_court_appearance': {title: 'Confirm Appearance', steps: [{label: '1. Court Notice', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Court Appearance</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Dec 1, 2025 @ 9:00 AM</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>‚öñÔ∏è</span> Confirm</div></div>`}, {label: '2. Confirm Attendance', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚öñÔ∏è Confirm</div><div style="background: rgba(100, 149, 237, 0.15); border: 2px solid rgba(100, 149, 237, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Courtroom 4A</div><div style="font-size: 13px; opacity: 0.8;">Dec 1 @ 9:00 AM</div></div><div style="background: rgba(100, 149, 237, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Confirm Appearance</div></div>`}, {label: '3. Confirmed', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Appearance Confirmed!</div><div style="opacity: 0.8;">Arrive 15 min early</div></div>`}]},
            'schedule_inspection': {title: 'Schedule Inspection', steps: [{label: '1. Inspection Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Inspection Required</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Home Inspection</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üè†</span> Schedule</div></div>`}, {label: '2. Select Date', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üè† Available Dates</div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px; border: 2px solid rgba(147, 51, 234, 0.4);"><div style="font-weight: 600;">Nov 18 @ 10:00 AM</div></div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div>Nov 19 @ 2:00 PM</div></div></div>`}, {label: '3. Confirm', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üè† Confirm</div><div style="background: rgba(147, 51, 234, 0.15); border: 2px solid rgba(147, 51, 234, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Home Inspection</div><div style="font-size: 13px; opacity: 0.8;">Nov 18 @ 10:00 AM</div></div><div style="background: rgba(147, 51, 234, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Schedule</div></div>`}, {label: '4. Scheduled', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Inspection Scheduled!</div><div style="opacity: 0.8;">Confirmation sent</div></div>`}]},
            'reset_password': {title: 'Reset Password', steps: [{label: '1. Reset Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Reset Password</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Click to reset</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üîë</span> Reset</div></div>`}, {label: '2. New Password', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üîë New Password</div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div style="font-size: 12px; opacity: 0.7;">Password</div><div>‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div></div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 12px;"><div style="font-size: 12px; opacity: 0.7;">Confirm</div><div>‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div></div><div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Save Password</div></div>`}, {label: '3. Confirm', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üîë Confirm</div><div style="background: rgba(255, 149, 0, 0.15); border: 2px solid rgba(255, 149, 0, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Password meets requirements</div><div style="font-size: 13px; opacity: 0.8;">‚úì At least 8 characters</div></div><div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Confirm</div></div>`}, {label: '4. Reset Complete', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Password Reset!</div><div style="opacity: 0.8;">You can now log in</div></div>`}]},
            'verify_account': {title: 'Verify Account', steps: [{label: '1. Verification Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Verify Your Account</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Click to verify</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úÖ</span> Verify</div></div>`}, {label: '2. Click Verify', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úÖ Verify Email</div><div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Confirm your email address</div><div style="font-size: 13px; opacity: 0.8;">john@example.com</div></div><div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Verify Email</div></div>`}, {label: '3. Verified', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Account Verified!</div><div style="opacity: 0.8;">You're all set</div></div>`}]},
            'verify_device': {title: 'Verify Device', steps: [{label: '1. Device Alert', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">New Device Login</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Was this you?</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üì±</span> Verify</div></div>`}, {label: '2. Approve Device', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì± New Device</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;"><div style="font-weight: 600; margin-bottom: 4px;">iPhone 15 Pro</div><div style="font-size: 13px; opacity: 0.7;">San Francisco, CA</div></div><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;"><div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Approve</div><div style="background: rgba(255, 59, 48, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úó Deny</div></div></div>`}, {label: '3. Verified', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Device Verified!</div><div style="opacity: 0.8;">Login approved</div></div>`}]},
            'review_security': {title: 'Review Security', steps: [{label: '1. Security Alert', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Security Update</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Review recent activity</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üõ°Ô∏è</span> Review</div></div>`}, {label: '2. Activity Log', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üõ°Ô∏è Recent Activity</div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div style="font-weight: 600;">Login - Nov 1, 3:00 PM</div><div style="font-size: 12px; opacity: 0.7;">San Francisco, CA</div></div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div style="font-weight: 600;">Password Changed - Oct 28</div></div></div>`}, {label: '3. Review Complete', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Security OK!</div><div style="opacity: 0.8;">All activity verified</div></div>`}]},
            'revoke_secret': {title: 'Revoke Secret', steps: [{label: '1. Security Alert', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Exposed API Key</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Found in public repo</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 59, 48, 0.3); border-radius: 10px; font-size: 13px;"><span>üîê</span> Revoke</div></div>`}, {label: '2. Confirm Revoke', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üîê Revoke Key</div><div style="background: rgba(255, 59, 48, 0.15); border: 2px solid rgba(255, 59, 48, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">API Key: sk-‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div><div style="font-size: 13px; opacity: 0.8;">This will stop all access</div></div><div style="background: rgba(255, 59, 48, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">üîê Revoke Now</div></div>`}, {label: '3. Revoked', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Key Revoked!</div><div style="opacity: 0.8;">Generate new key</div></div>`}]},
            'verify_social_account': {title: 'Verify Account', steps: [{label: '1. Verification Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Verify Social Account</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Confirm connection</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úÖ</span> Verify</div></div>`}, {label: '2. Confirm', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úÖ Verify</div><div style="background: rgba(100, 149, 237, 0.15); border: 2px solid rgba(100, 149, 237, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Link @username?</div><div style="font-size: 13px; opacity: 0.8;">This will connect your accounts</div></div><div style="background: rgba(100, 149, 237, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Confirm</div></div>`}, {label: '3. Verified', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Account Verified!</div><div style="opacity: 0.8;">Successfully linked</div></div>`}]},
            'accept_social_invitation': {title: 'Accept Invitation', steps: [{label: '1. Invitation Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Network Invitation</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">From @username</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>ü§ù</span> Accept</div></div>`}, {label: '2. Confirm', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">ü§ù Accept?</div><div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Connect with @username?</div></div><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;"><div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Accept</div><div style="background: rgba(255, 59, 48, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úó Decline</div></div></div>`}, {label: '3. Connected', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Invitation Accepted!</div><div style="opacity: 0.8;">Now connected</div></div>`}]},
            'view_social_message': {title: 'View Message', steps: [{label: '1. Message Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">New Message</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">From @username</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üí¨</span> Read</div></div>`}, {label: '2. Message View', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí¨ Message</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px;"><div style="font-weight: 600; margin-bottom: 8px;">From: @username</div><div style="font-size: 14px; opacity: 0.9;">Hey, I wanted to connect about...</div></div></div>`}]},
            'join_meeting': {title: 'Join Meeting', steps: [{label: '1. Meeting Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Meeting Starting</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Nov 15 @ 2:00 PM</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üìπ</span> Join</div></div>`}, {label: '2. Joining...', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìπ Joining Meeting</div><div style="background: rgba(52, 199, 89, 0.15); border: 2px solid rgba(52, 199, 89, 0.4); padding: 16px; border-radius: 12px;"><div style="font-weight: 600; margin-bottom: 4px;">Opening Zoom...</div><div style="font-size: 13px; opacity: 0.8;">Meeting ID: 123-456-789</div></div></div>`}]},
            'view_incident': {title: 'View Incident', steps: [{label: '1. Incident Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Service Incident</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Status: Investigating</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üö®</span> View</div></div>`}, {label: '2. Incident Details', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üö® Incident #12345</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px;"><div style="font-weight: 600; margin-bottom: 8px;">API Performance Degradation</div><div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Status: Investigating</div><div style="font-size: 13px; opacity: 0.7;">Started: 2:30 PM</div></div></div>`}]},
            'register_event': {title: 'Register Event', steps: [{label: '1. Event Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Conference Registration</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Dec 10-12, 2025</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üé´</span> Register</div></div>`}, {label: '2. Registration Form', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üé´ Register</div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div style="font-size: 12px; opacity: 0.7;">Name</div><div>John Smith</div></div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div style="font-size: 12px; opacity: 0.7;">Email</div><div>john@example.com</div></div></div>`}, {label: '3. Review', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üé´ Review</div><div style="background: rgba(147, 51, 234, 0.15); border: 2px solid rgba(147, 51, 234, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Conference Pass</div><div style="font-size: 13px; opacity: 0.8;">Dec 10-12, 2025</div></div><div style="background: rgba(147, 51, 234, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Complete Registration</div></div>`}, {label: '4. Registered', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Registered!</div><div style="opacity: 0.8;">Ticket sent to email</div></div>`}]},
            'register_for_sports': {title: 'Register Sports', steps: [{label: '1. Registration Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Youth Soccer Registration</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Spring 2026 Season</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>‚öΩ</span> Register</div></div>`}, {label: '2. Player Info', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚öΩ Player Info</div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div style="font-size: 12px; opacity: 0.7;">Player Name</div><div>Sarah Smith</div></div><div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin-bottom: 8px;"><div style="font-size: 12px; opacity: 0.7;">Age Group</div><div>U-10</div></div></div>`}, {label: '3. Pay Fee', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚öΩ Registration Fee</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;"><div style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 8px 0;">$150.00</div><div style="font-size: 13px; opacity: 0.7;">Season Registration</div></div><div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">üí≥ Pay & Register</div></div>`}, {label: '4. Registered', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Registered!</div><div style="opacity: 0.8;">Practice starts March 1</div></div>`}]},
            'unsubscribe': {title: 'Unsubscribe', steps: [{label: '1. Newsletter Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Marketing Newsletter</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Don't want these?</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 59, 48, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úâÔ∏è</span> Unsubscribe</div></div>`}, {label: '2. Confirm', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚úâÔ∏è Unsubscribe?</div><div style="background: rgba(255, 59, 48, 0.15); border: 2px solid rgba(255, 59, 48, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Stop receiving emails?</div><div style="font-size: 13px; opacity: 0.8;">You can resubscribe anytime</div></div><div style="background: rgba(255, 59, 48, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Unsubscribe</div></div>`}, {label: '3. Unsubscribed', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Unsubscribed!</div><div style="opacity: 0.8;">You won't receive more emails</div></div>`}]},
            'take_survey': {title: 'Take Survey', steps: [{label: '1. Survey Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Customer Survey</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">2 minutes</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìù</span> Start</div></div>`}, {label: '2. Answer Questions', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìù Survey</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;"><div style="font-weight: 600; margin-bottom: 8px;">How was your experience?</div><div style="font-size: 24px;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div></div><div style="background: rgba(100, 149, 237, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">Next ‚Üí</div></div>`}, {label: '3. Review', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìù Review</div><div style="background: rgba(100, 149, 237, 0.15); border: 2px solid rgba(100, 149, 237, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">3 questions answered</div></div><div style="background: rgba(100, 149, 237, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">üì§ Submit Survey</div></div>`}, {label: '4. Submitted', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Survey Complete!</div><div style="opacity: 0.8;">Thank you for your feedback</div></div>`}]},
            'cancel_subscription_service': {title: 'Cancel Service', steps: [{label: '1. Subscription Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your Subscription</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">$9.99/month</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 59, 48, 0.3); border-radius: 10px; font-size: 13px;"><span>‚ùå</span> Cancel</div></div>`}, {label: '2. Confirm Cancel', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚ùå Cancel Subscription?</div><div style="background: rgba(255, 59, 48, 0.15); border: 2px solid rgba(255, 59, 48, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">Premium Plan</div><div style="font-size: 13px; opacity: 0.8;">Active until Dec 1, 2025</div></div><div style="background: rgba(255, 59, 48, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Confirm Cancellation</div></div>`}, {label: '3. Cancelled', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Subscription Cancelled</div><div style="opacity: 0.8;">Access until Dec 1</div></div>`}]},
            'extend_trial': {title: 'Extend Trial', steps: [{label: '1. Trial Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Trial Ending Soon</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Expires in 3 days</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 215, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>‚è∞</span> Extend</div></div>`}, {label: '2. Extend Options', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚è∞ Extend Trial</div><div style="background: rgba(255, 215, 0, 0.15); border: 2px solid rgba(255, 215, 0, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;"><div style="font-weight: 600;">7 More Days Free</div><div style="font-size: 13px; opacity: 0.8;">No credit card required</div></div><div style="background: rgba(255, 215, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì Extend Trial</div></div>`}, {label: '3. Extended', html: `<div class="modal-success-state"><div class="modal-success-icon">‚úì</div><div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Trial Extended!</div><div style="opacity: 0.8;">New end date: Nov 22</div></div>`}]},
            'view_usage': {title: 'View Usage', steps: [{label: '1. Usage Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Monthly Usage Report</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">October 2025</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üìä</span> View</div></div>`}, {label: '2. Usage Dashboard', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìä Usage</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px;"><div style="margin-bottom: 12px;"><div style="font-size: 12px; opacity: 0.7;">API Calls</div><div style="font-weight: 600;">12,450 / 15,000</div></div><div style="margin-bottom: 12px;"><div style="font-size: 12px; opacity: 0.7;">Storage</div><div style="font-weight: 600;">8.2 GB / 10 GB</div></div><div><div style="font-size: 12px; opacity: 0.7;">Bandwidth</div><div style="font-weight: 600;">45 GB / 100 GB</div></div></div></div>`}]},
            'view_task': {title: 'View Task', steps: [{label: '1. Task Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Task Assignment</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Due Tomorrow</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üìã</span> View</div></div>`}, {label: '2. Task Details', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìã Task Details</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px;"><div style="font-weight: 600; margin-bottom: 8px;">Complete Q4 Report</div><div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Due: Nov 15, 2025</div><div style="font-size: 13px; opacity: 0.7;">Priority: High</div></div></div>`}]},
            'view_ticket': {title: 'View Ticket', steps: [{label: '1. Ticket Email', html: `<div class="modal-email-card"><div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Support Ticket Update</div><div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Ticket #T-12345</div><div style="display: inline-flex; padding: 8px 14px; background: rgba(100, 149, 237, 0.3); border-radius: 10px; font-size: 13px;"><span>üé´</span> View</div></div>`}, {label: '2. Ticket Details', html: `<div class="modal-preview-card"><div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üé´ Ticket #T-12345</div><div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px;"><div style="font-weight: 600; margin-bottom: 8px;">Login Issue</div><div style="font-size: 13px; opacity: 0.7; margin-bottom: 4px;">Status: In Progress</div><div style="font-size: 13px; opacity: 0.7;">Updated: 2 hours ago</div></div></div>`}]}
        };

        const COMPOUND_FLOWS = {
            'sign_form_with_payment': {
                title: 'Sign & Pay Permission Form',
                isPremium: true,
                requiresResponse: true,
                endBehavior: 'emailComposer',
                steps: [
                    {
                        label: '1. Permission Form',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Field Trip Permission & Fee</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 8px;">Fee: $45.00</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úçÔ∏èüí≥</span> Sign & Pay</div>
                        </div>`
                    },
                    {
                        label: '2. Draw Signature',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚úçÔ∏è Step 1 of 3</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Sign Permission Form</div>
                            <div style="background: rgba(255,255,255,0.95); height: 80px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #999; font-style: italic;">
                                Draw signature here
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Pay Fee',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üí≥ Step 2 of 3</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Pay Form Fee</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-size: 24px; font-weight: 700; color: #FFD700;">$45.00</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Pay with Apple Pay
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Email Confirmation',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚úâÔ∏è Step 3 of 3</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Send Confirmation</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-size: 12px; opacity: 0.7; margin-bottom: 4px;">To: teacher@school.edu</div>
                                <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">Re: Permission Form - Signed & Paid</div>
                                <div style="font-size: 13px; opacity: 0.8;">I've signed the permission form and completed the $45.00 payment via Apple Pay.</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '5. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">All Done!</div>
                            <div style="opacity: 0.8;">Form signed, paid & confirmed</div>
                        </div>`
                    }
                ]
            },
            'sign_form_with_calendar': {
                title: 'Sign Form & Add to Calendar',
                isPremium: true,
                requiresResponse: true,
                endBehavior: 'emailComposer',
                steps: [
                    {
                        label: '1. Permission Form',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Field Trip - Nov 15, 2025</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 8px;">Science Museum</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úçÔ∏èüìÖ</span> Sign & Calendar</div>
                        </div>`
                    },
                    {
                        label: '2. Sign Form',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚úçÔ∏è Step 1 of 3</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Sign Permission Form</div>
                            <div style="background: rgba(255,255,255,0.95); height: 60px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #999; font-style: italic;">
                                Signature applied
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Add to Calendar',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üìÖ Step 2 of 3</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Add Event to Calendar</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Field Trip - Science Museum</div>
                                <div style="font-size: 13px; opacity: 0.8;">Friday, Nov 15, 2025 ‚Ä¢ 9:00 AM</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Send Confirmation',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚úâÔ∏è Step 3 of 3</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Confirm with Teacher</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">Re: Field Trip - Signed & Calendar Updated</div>
                                <div style="font-size: 13px; opacity: 0.8;">I've signed the form and added the event to my calendar for Nov 15.</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '5. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">All Set!</div>
                            <div style="opacity: 0.8;">Signed, scheduled & confirmed</div>
                        </div>`
                    }
                ]
            },
            'pay_invoice_with_confirmation': {
                title: 'Pay Invoice & Send Confirmation',
                isPremium: true,
                requiresResponse: true,
                endBehavior: 'emailComposer',
                steps: [
                    {
                        label: '1. Invoice Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Invoice #INV-2025-1234</div>
                            <div style="font-size: 24px; font-weight: 700; color: #FFD700;">$1,299.00</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üí≥‚úâÔ∏è</span> Pay & Confirm</div>
                        </div>`
                    },
                    {
                        label: '2. Complete Payment',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üí≥ Step 1 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Pay Invoice</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-size: 28px; font-weight: 700; color: #FFD700;">$1,299.00</div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Pay with Apple Pay
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Email Receipt',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚úâÔ∏è Step 2 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Send Payment Confirmation</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">Re: Invoice INV-2025-1234 - Payment Sent</div>
                                <div style="font-size: 13px; opacity: 0.8;">I've completed payment of $1,299.00 for invoice INV-2025-1234 via Apple Pay. Please confirm receipt.</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Payment Sent!</div>
                            <div style="opacity: 0.8;">Paid & confirmation sent</div>
                        </div>`
                    }
                ]
            },
            'track_with_calendar': {
                title: 'Track Package & Schedule Delivery',
                isPremium: true,
                requiresResponse: false,
                endBehavior: 'returnToApp',
                steps: [
                    {
                        label: '1. Shipping Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your order has shipped</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 8px;">Delivers Friday, Nov 1</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üì¶üìÖ</span> Track & Schedule</div>
                        </div>`
                    },
                    {
                        label: '2. Track Package',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üì¶ Step 1 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Package Tracking</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px; margin-bottom: 8px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Order #819-4873290-1892885</div>
                                <div style="font-size: 13px; opacity: 0.8;">üìç Out for delivery</div>
                                <div style="font-size: 13px; opacity: 0.8; margin-top: 8px;">üöö Arrives: Friday, Nov 1 by 8:00 PM</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Add to Calendar',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üìÖ Step 2 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Schedule Delivery</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Package Delivery</div>
                                <div style="font-size: 13px; opacity: 0.8;">Friday, Nov 1, 2025 ‚Ä¢ 8:00 PM</div>
                                <div style="font-size: 12px; opacity: 0.7; margin-top: 8px;">Reminder: 30 minutes before</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">All Set!</div>
                            <div style="opacity: 0.8;">Delivery scheduled in calendar</div>
                        </div>`
                    }
                ]
            },
            'check_in_with_wallet': {
                title: 'Check In & Add Boarding Pass',
                isPremium: true,
                requiresResponse: false,
                endBehavior: 'returnToApp',
                steps: [
                    {
                        label: '1. Check-In Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Check in now - Flight UA 123</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 8px;">Tomorrow at 9:00 AM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(59, 130, 246, 0.3); border-radius: 10px; font-size: 13px;"><span>‚úàÔ∏èüì≤</span> Check In</div>
                        </div>`
                    },
                    {
                        label: '2. Check In Online',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚úàÔ∏è Step 1 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Check In for Flight</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">United Airlines UA 123</div>
                                <div style="font-size: 13px; opacity: 0.8;">SFO ‚Üí NYC</div>
                                <div style="font-size: 13px; opacity: 0.8;">Seat: 12A (Window)</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Add to Wallet',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üì≤ Step 2 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Add Boarding Pass to Wallet</div>
                            <div style="background: rgba(59, 130, 246, 0.15); border: 2px solid rgba(59, 130, 246, 0.4); padding: 16px; border-radius: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">üé´ Boarding Pass Added</div>
                                <div style="font-size: 13px; opacity: 0.8;">Ready in Apple Wallet</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Ready to Fly!</div>
                            <div style="opacity: 0.8;">Checked in & boarding pass saved</div>
                        </div>`
                    }
                ]
            },
            'cancel_with_confirmation': {
                title: 'Cancel Subscription & Confirm',
                isPremium: false,
                requiresResponse: true,
                endBehavior: 'emailComposer',
                steps: [
                    {
                        label: '1. Subscription Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your subscription renews soon</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 8px;">$29.99/month</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 59, 48, 0.3); border-radius: 10px; font-size: 13px;"><span>‚ùå</span> Cancel</div>
                        </div>`
                    },
                    {
                        label: '2. Confirm Cancellation',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚ùå Step 1 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Cancel Subscription</div>
                            <div style="background: rgba(255, 59, 48, 0.15); border: 2px solid rgba(255, 59, 48, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Cancel Premium Plan?</div>
                                <div style="font-size: 13px; opacity: 0.8;">You'll lose access after Nov 30</div>
                            </div>
                            <div style="background: rgba(255, 59, 48, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Confirm Cancellation
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Email Confirmation',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚úâÔ∏è Step 2 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Request Confirmation</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">Re: Subscription Cancellation Request</div>
                                <div style="font-size: 13px; opacity: 0.8;">I'd like to cancel my subscription as discussed. Please confirm the cancellation.</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Cancellation Requested</div>
                            <div style="opacity: 0.8;">Confirmation email sent</div>
                        </div>`
                    }
                ]
            },
            'schedule_purchase_with_reminder': {
                title: 'Schedule Purchase & Set Reminder',
                isPremium: true,
                requiresResponse: false,
                endBehavior: 'returnToApp',
                steps: [
                    {
                        label: '1. Promotion Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Black Friday Sale - Nov 24</div>
                            <div style="font-size: 20px; font-weight: 700; color: #FFD700; margin-bottom: 8px;">60% OFF</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üõíüìÖ</span> Schedule & Remind</div>
                        </div>`
                    },
                    {
                        label: '2. Schedule Purchase',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üõí Step 1 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Schedule Shopping Time</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Black Friday Shopping</div>
                                <div style="font-size: 13px; opacity: 0.8;">Friday, Nov 24, 2025</div>
                                <div style="font-size: 13px; opacity: 0.8;">12:00 AM (Sale starts)</div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.2); border: 2px solid rgba(255, 149, 0, 0.4); padding: 12px; border-radius: 10px; text-align: center;">
                                <div style="font-weight: 600; font-size: 18px; color: #FFD700;">60% OFF</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Set Reminder',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚è∞ Step 2 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Set Sale Reminder</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">üîî Reminder Set</div>
                                <div style="font-size: 13px; opacity: 0.8;">Friday, Nov 24 at 12:00 AM</div>
                                <div style="font-size: 12px; opacity: 0.7; margin-top: 8px;">Alert: 15 minutes before sale</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">All Set!</div>
                            <div style="opacity: 0.8;">Sale scheduled & reminder set</div>
                        </div>`
                    }
                ]
            },
            'calendar_with_reminder': {
                title: 'Add to Calendar & Set Reminder',
                isPremium: false,
                requiresResponse: false,
                endBehavior: 'returnToApp',
                steps: [
                    {
                        label: '1. Appointment Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Doctor Appointment Confirmed</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 8px;">Oct 30, 2025 at 2:00 PM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(59, 130, 246, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÖ‚è∞</span> Calendar & Reminder</div>
                        </div>`
                    },
                    {
                        label: '2. Add to Calendar',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üìÖ Step 1 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Add Appointment to Calendar</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Doctor's Appointment</div>
                                <div style="font-size: 13px; opacity: 0.8;">Wednesday, Oct 30, 2025</div>
                                <div style="font-size: 13px; opacity: 0.8;">2:00 PM - 3:00 PM</div>
                                <div style="font-size: 12px; opacity: 0.7; margin-top: 8px;">üìç 123 Medical Plaza</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Set Reminder',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚è∞ Step 2 of 2</div>
                            <div style="font-size: 14px; opacity: 0.7; margin-bottom: 16px;">Set Appointment Reminder</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">üîî Reminder Set</div>
                                <div style="font-size: 13px; opacity: 0.8;">1 hour before appointment</div>
                                <div style="font-size: 12px; opacity: 0.7; margin-top: 8px;">Alert: Oct 30 at 1:00 PM</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '4. Complete',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">All Set!</div>
                            <div style="opacity: 0.8;">Event added & reminder set</div>
                        </div>`
                    }
                ]
            },

            // ===== UTILITY SERVICES =====

            'prepare_for_outage': {
                title: 'Prepare for Outage',
                actionType: 'IN_APP',
                actionCategory: 'utilities',
                modalComponent: 'PrepareForOutageModal',
                steps: [
                    {
                        label: '1. Outage Notice',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Planned Power Outage</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Tomorrow 9AM - 3PM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>‚ö†Ô∏è</span> Prepare</div>
                        </div>`
                    },
                    {
                        label: '2. Preparation Guide',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚ö†Ô∏è Outage Preparation</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 12px;">Scheduled Outage</div>
                                <div style="font-size: 14px; opacity: 0.8; margin-bottom: 8px;">üìÖ Tomorrow, 9:00 AM - 3:00 PM</div>
                                <div style="font-size: 14px; opacity: 0.8;">‚è±Ô∏è Duration: 6 hours</div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.15); border: 1px solid rgba(255, 149, 0, 0.4); padding: 14px; border-radius: 10px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Preparation Tips:</div>
                                <div style="font-size: 13px; opacity: 0.9;">‚Ä¢ Charge all devices</div>
                                <div style="font-size: 13px; opacity: 0.9;">‚Ä¢ Fill bathtub with water</div>
                                <div style="font-size: 13px; opacity: 0.9;">‚Ä¢ Store perishables in cooler</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Add to Calendar',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reminder Set!</div>
                            <div style="opacity: 0.8;">Added to calendar</div>
                        </div>`
                    }
                ]
            },
            'set_outage_reminder': {
                title: 'Set Outage Reminder',
                actionType: 'IN_APP',
                actionCategory: 'utilities',
                modalComponent: 'SetOutageReminderModal',
                steps: [
                    {
                        label: '1. Outage Notice',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Upcoming Power Outage</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Friday 9AM - 3PM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>‚è∞</span> Remind Me</div>
                        </div>`
                    },
                    {
                        label: '2. Set Reminder',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">‚è∞ Outage Reminder</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Remind me</div>
                                <div style="font-size: 14px; opacity: 0.8;">30 minutes before outage</div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Set Reminder
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Reminder Set',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reminder Set!</div>
                            <div style="opacity: 0.8;">You'll be notified at 8:30 AM</div>
                        </div>`
                    }
                ]
            },
            'view_outage_details': {
                title: 'View Outage Details',
                actionType: 'IN_APP',
                actionCategory: 'utilities',
                modalComponent: 'ViewOutageDetailsModal',
                steps: [
                    {
                        label: '1. Outage Alert',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Power Outage in Your Area</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Restoration by 6:00 PM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 59, 48, 0.3); border-radius: 10px; font-size: 13px;"><span>üìç</span> View Details</div>
                        </div>`
                    },
                    {
                        label: '2. Outage Map',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìç Outage Details</div>
                            <div style="background: rgba(255, 59, 48, 0.15); border: 1px solid rgba(255, 59, 48, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Active Outage</div>
                                <div style="font-size: 14px; opacity: 0.8; margin-bottom: 4px;">‚ö° Power ‚Ä¢ üì° Internet</div>
                                <div style="font-size: 14px; opacity: 0.8;">üìç Affected: 1,247 customers</div>
                                <div style="font-size: 14px; opacity: 0.8;">üïê Est. Restoration: 6:00 PM</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'change_delivery_preferences': {
                title: 'Change Delivery Preferences',
                actionType: 'GO_TO',
                actionCategory: 'utilities',
                steps: [
                    {
                        label: '1. Delivery Notice',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Delivery Arriving Soon</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Update delivery preferences</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üì¶</span> Update</div>
                        </div>`
                    },
                    {
                        label: '2. Opens Carrier Portal',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üåê Opens in Safari</div>
                            <div style="background: rgba(0, 122, 255, 0.15); border: 1px solid rgba(0, 122, 255, 0.4); padding: 20px; border-radius: 12px; text-align: center;">
                                <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Opening Carrier Website</div>
                                <div style="font-size: 14px; opacity: 0.8;">Manage delivery time & location</div>
                            </div>
                        </div>`
                    }
                ]
            },

            // ===== REAL ESTATE =====

            'save_properties': {
                title: 'Save Properties',
                actionType: 'IN_APP',
                actionCategory: 'real_estate',
                modalComponent: 'SavePropertiesModal',
                steps: [
                    {
                        label: '1. Property Listing',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">New Listings in SF</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">3 properties match your criteria</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üè†</span> Save</div>
                        </div>`
                    },
                    {
                        label: '2. Property Grid',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üè† Save Properties</div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                                <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px;">
                                    <div style="font-weight: 600; margin-bottom: 4px;">3BR House</div>
                                    <div style="font-size: 13px; opacity: 0.8;">$850K</div>
                                    <div style="margin-top: 8px;">‚ù§Ô∏è Save</div>
                                </div>
                                <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px;">
                                    <div style="font-weight: 600; margin-bottom: 4px;">2BR Condo</div>
                                    <div style="font-size: 13px; opacity: 0.8;">$695K</div>
                                    <div style="margin-top: 8px;">‚ù§Ô∏è Save</div>
                                </div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Saved',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Properties Saved!</div>
                            <div style="opacity: 0.8;">2 properties added to favorites</div>
                        </div>`
                    }
                ]
            },
            'view_property_listings': {
                title: 'View Property Listings',
                actionType: 'GO_TO',
                actionCategory: 'real_estate',
                steps: [
                    {
                        label: '1. Listing Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">New Homes in Your Area</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">12 properties available</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üèòÔ∏è</span> View All</div>
                        </div>`
                    },
                    {
                        label: '2. Opens Zillow/Redfin',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üåê Opens in Safari</div>
                            <div style="background: rgba(147, 51, 234, 0.15); border: 1px solid rgba(147, 51, 234, 0.4); padding: 20px; border-radius: 12px; text-align: center;">
                                <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Opening Property Portal</div>
                                <div style="font-size: 14px; opacity: 0.8;">Browse listings on Zillow</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'schedule_showing': {
                title: 'Schedule Showing',
                actionType: 'GO_TO',
                actionCategory: 'real_estate',
                steps: [
                    {
                        label: '1. Property Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Beautiful 3BR Home</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Schedule a showing</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üóìÔ∏è</span> Schedule</div>
                        </div>`
                    },
                    {
                        label: '2. Opens Booking Portal',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üåê Opens in Safari</div>
                            <div style="background: rgba(0, 122, 255, 0.15); border: 1px solid rgba(0, 122, 255, 0.4); padding: 20px; border-radius: 12px; text-align: center;">
                                <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Opening Booking Portal</div>
                                <div style="font-size: 14px; opacity: 0.8;">Select date & time for showing</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'schedule_delivery_time': {
                title: 'Schedule Delivery Time',
                actionType: 'IN_APP',
                actionCategory: 'real_estate',
                modalComponent: 'ScheduleDeliveryTimeModal',
                steps: [
                    {
                        label: '1. Delivery Notice',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Your Furniture Delivery</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Choose delivery window</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 149, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üöö</span> Schedule</div>
                        </div>`
                    },
                    {
                        label: '2. Select Time',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üöö Choose Delivery Window</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 14px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Select Date</div>
                                <div style="font-size: 14px; opacity: 0.8;">üìÖ Friday, November 8</div>
                            </div>
                            <div style="background: rgba(255, 149, 0, 0.15); border: 1px solid rgba(255, 149, 0, 0.4); padding: 14px; border-radius: 10px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Time Window</div>
                                <div style="font-size: 14px; opacity: 0.8;">üïê 9:00 AM - 12:00 PM</div>
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Confirmed',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Delivery Scheduled!</div>
                            <div style="opacity: 0.8;">Friday 9AM - 12PM</div>
                        </div>`
                    }
                ]
            },

            // ===== SOCIAL/COMMUNITY =====

            'read_community_post': {
                title: 'Read Community Post',
                actionType: 'IN_APP',
                actionCategory: 'social',
                modalComponent: 'ReadCommunityPostModal',
                steps: [
                    {
                        label: '1. Post Notification',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">New Post in Your Community</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Sarah posted an update</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üì∞</span> Read</div>
                        </div>`
                    },
                    {
                        label: '2. Full Post',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üì∞ Community Post</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                                    <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700;">S</div>
                                    <div>
                                        <div style="font-weight: 600;">Sarah Johnson</div>
                                        <div style="font-size: 12px; opacity: 0.7;">2 hours ago</div>
                                    </div>
                                </div>
                                <div style="font-size: 14px; line-height: 1.6; opacity: 0.9;">
                                    Great neighborhood meeting today! Thanks everyone for coming...
                                </div>
                                <div style="margin-top: 12px; display: flex; gap: 16px; font-size: 13px; opacity: 0.7;">
                                    <span>‚ù§Ô∏è 12</span>
                                    <span>üí¨ 5 comments</span>
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'reply_to_post': {
                title: 'Reply to Post',
                actionType: 'IN_APP',
                actionCategory: 'social',
                modalComponent: 'ReplyToPostModal',
                steps: [
                    {
                        label: '1. Post Card',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Sarah mentioned you</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Reply to the conversation</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üí¨</span> Reply</div>
                        </div>`
                    },
                    {
                        label: '2. Compose Reply',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí¨ Reply to Post</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px; min-height: 100px; color: rgba(255,255,255,0.5); font-style: italic;">
                                Write your reply...
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Post Reply
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Posted',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Reply Posted!</div>
                            <div style="opacity: 0.8;">Your comment is live</div>
                        </div>`
                    }
                ]
            },
            'view_post_comments': {
                title: 'View Comments',
                actionType: 'IN_APP',
                actionCategory: 'social',
                modalComponent: 'ViewPostCommentsModal',
                steps: [
                    {
                        label: '1. Post with Comments',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">5 new comments on your post</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">People are discussing</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üí≠</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Comments Thread',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üí≠ Comments (5)</div>
                            <div style="display: flex; flex-direction: column; gap: 12px;">
                                <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px;">
                                    <div style="font-weight: 600; font-size: 13px; margin-bottom: 4px;">John D.</div>
                                    <div style="font-size: 13px; opacity: 0.8;">Great point!</div>
                                </div>
                                <div style="background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px;">
                                    <div style="font-weight: 600; font-size: 13px; margin-bottom: 4px;">Maria S.</div>
                                    <div style="font-size: 13px; opacity: 0.8;">I agree completely</div>
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'share_achievement': {
                title: 'Share Achievement',
                actionType: 'IN_APP',
                actionCategory: 'social',
                modalComponent: 'ShareAchievementModal',
                steps: [
                    {
                        label: '1. Achievement Card',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">You earned a badge!</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Share your achievement</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 215, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üèÜ</span> Share</div>
                        </div>`
                    },
                    {
                        label: '2. Share Options',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üèÜ Share Achievement</div>
                            <div style="background: rgba(255, 215, 0, 0.15); border: 1px solid rgba(255, 215, 0, 0.4); padding: 16px; border-radius: 12px; margin-bottom: 12px; text-align: center;">
                                <div style="font-size: 32px; margin-bottom: 8px;">üèÜ</div>
                                <div style="font-weight: 600; margin-bottom: 4px;">Top Contributor</div>
                                <div style="font-size: 13px; opacity: 0.8;">100 helpful posts</div>
                            </div>
                            <div style="background: rgba(0, 122, 255, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üì± Share via iOS
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Shared',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Achievement Shared!</div>
                            <div style="opacity: 0.8;">Posted to your feed</div>
                        </div>`
                    }
                ]
            },

            // ===== ACTIVITIES/EVENTS =====

            'book_activity_tickets': {
                title: 'Book Activity Tickets',
                actionType: 'GO_TO',
                actionCategory: 'activities',
                steps: [
                    {
                        label: '1. Event Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Concert Tickets Available</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Saturday, Dec 15 at 8PM</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(147, 51, 234, 0.3); border-radius: 10px; font-size: 13px;"><span>üé´</span> Book Now</div>
                        </div>`
                    },
                    {
                        label: '2. Opens Ticketmaster',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üåê Opens in Safari</div>
                            <div style="background: rgba(147, 51, 234, 0.15); border: 1px solid rgba(147, 51, 234, 0.4); padding: 20px; border-radius: 12px; text-align: center;">
                                <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Opening Ticketmaster</div>
                                <div style="font-size: 14px; opacity: 0.8;">Select seats & purchase tickets</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'view_activity': {
                title: 'View Activity',
                actionType: 'IN_APP',
                actionCategory: 'activities',
                modalComponent: 'ViewActivityModal',
                steps: [
                    {
                        label: '1. Activity Invite',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Group Hike This Weekend</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Saturday 9AM ‚Ä¢ Mt. Tam</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(52, 199, 89, 0.3); border-radius: 10px; font-size: 13px;"><span>üéØ</span> View</div>
                        </div>`
                    },
                    {
                        label: '2. Activity Details',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üéØ Activity Details</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Group Hike</div>
                                <div style="font-size: 14px; opacity: 0.8; margin-bottom: 4px;">üìÖ Saturday, Nov 9 at 9:00 AM</div>
                                <div style="font-size: 14px; opacity: 0.8; margin-bottom: 4px;">üìç Mt. Tamalpais State Park</div>
                                <div style="font-size: 14px; opacity: 0.8;">üë• 12 people attending</div>
                            </div>
                            <div style="display: flex; gap: 12px;">
                                <div style="flex: 1; background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úì RSVP Yes</div>
                                <div style="flex: 1; background: rgba(255,255,255,0.1); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">‚úó RSVP No</div>
                            </div>
                        </div>`
                    }
                ]
            },
            'view_activity_details': {
                title: 'View Activity Details',
                actionType: 'IN_APP',
                actionCategory: 'activities',
                modalComponent: 'ViewActivityDetailsModal',
                steps: [
                    {
                        label: '1. Activity Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Trip Itinerary Ready</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Weekend Camping Trip</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üìã</span> View Details</div>
                        </div>`
                    },
                    {
                        label: '2. Full Itinerary',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìã Full Itinerary</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 12px;">Weekend Camping</div>
                                <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">
                                    <div style="font-weight: 600; margin-bottom: 4px;">Saturday</div>
                                    <div style="opacity: 0.8;">‚Ä¢ 8:00 AM - Depart</div>
                                    <div style="opacity: 0.8;">‚Ä¢ 12:00 PM - Setup camp</div>
                                    <div style="opacity: 0.8;">‚Ä¢ 6:00 PM - Dinner</div>
                                </div>
                                <div style="font-size: 14px; opacity: 0.9;">
                                    <div style="font-weight: 600; margin-bottom: 4px;">What to Bring</div>
                                    <div style="opacity: 0.8;">‚úì Tent & sleeping bag</div>
                                    <div style="opacity: 0.8;">‚úì Food & water</div>
                                    <div style="opacity: 0.8;">‚úì Hiking boots</div>
                                </div>
                            </div>
                        </div>`
                    }
                ]
            },
            'add_activity_to_calendar': {
                title: 'Add Activity to Calendar',
                actionType: 'IN_APP',
                actionCategory: 'activities',
                modalComponent: 'AddActivityToCalendarModal',
                steps: [
                    {
                        label: '1. Activity Invite',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Yoga Class Tomorrow</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">6:00 PM at Studio</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üìÖ</span> Add to Calendar</div>
                        </div>`
                    },
                    {
                        label: '2. Calendar Event',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìÖ Add to Calendar</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Yoga Class</div>
                                <div style="font-size: 14px; opacity: 0.8; margin-bottom: 4px;">üìÖ Tomorrow at 6:00 PM</div>
                                <div style="font-size: 14px; opacity: 0.8; margin-bottom: 4px;">‚è±Ô∏è 1 hour</div>
                                <div style="font-size: 14px; opacity: 0.8;">üìç Zen Yoga Studio</div>
                            </div>
                            <div style="background: rgba(0, 122, 255, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                Add to iOS Calendar
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Added',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Event Added!</div>
                            <div style="opacity: 0.8;">Reminder set for 30 min before</div>
                        </div>`
                    }
                ]
            },

            // ===== COMMUNICATION =====

            'reply_thanks': {
                title: 'Reply Thanks',
                actionType: 'IN_APP',
                actionCategory: 'communication',
                modalComponent: 'ReplyThanksModal',
                steps: [
                    {
                        label: '1. Message',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Someone helped you</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Send a thank you</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 215, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üôè</span> Say Thanks</div>
                        </div>`
                    },
                    {
                        label: '2. Thank You Template',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üôè Send Thanks</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-size: 14px; line-height: 1.6; opacity: 0.9;">
                                    Thank you so much for your help! I really appreciate it.
                                </div>
                            </div>
                            <div style="background: rgba(52, 199, 89, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Send Reply
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Sent',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Thank You Sent!</div>
                            <div style="opacity: 0.8;">Message delivered</div>
                        </div>`
                    }
                ]
            },
            'provide_access_code': {
                title: 'Provide Access Code',
                actionType: 'IN_APP',
                actionCategory: 'communication',
                modalComponent: 'ProvideAccessCodeModal',
                steps: [
                    {
                        label: '1. Access Request',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Access Code Required</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Delivery driver needs gate code</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üîë</span> Provide Code</div>
                        </div>`
                    },
                    {
                        label: '2. Access Code Display',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üîë Access Code</div>
                            <div style="background: rgba(0, 122, 255, 0.15); border: 2px solid rgba(0, 122, 255, 0.4); padding: 24px; border-radius: 12px; margin-bottom: 12px; text-align: center;">
                                <div style="font-size: 32px; font-weight: 700; letter-spacing: 8px; margin-bottom: 8px;">4 8 2 1</div>
                                <div style="font-size: 13px; opacity: 0.8;">Gate Access Code</div>
                            </div>
                            <div style="background: rgba(0, 122, 255, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                üìã Copy Code
                            </div>
                        </div>`
                    }
                ]
            },

            // ===== NOTES =====

            'add_to_notes': {
                title: 'Add to Notes',
                actionType: 'IN_APP',
                actionCategory: 'notes',
                modalComponent: 'AddToNotesModal',
                steps: [
                    {
                        label: '1. Email Content',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Important Information</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Save to Notes for later</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(255, 215, 0, 0.3); border-radius: 10px; font-size: 13px;"><span>üìù</span> Save to Notes</div>
                        </div>`
                    },
                    {
                        label: '2. Note Editor',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üìù Save to Notes</div>
                            <div style="background: rgba(255,255,255,0.08); padding: 16px; border-radius: 10px; margin-bottom: 12px;">
                                <div style="font-weight: 600; margin-bottom: 8px;">Important Information</div>
                                <div style="font-size: 14px; opacity: 0.8; line-height: 1.6; margin-bottom: 12px;">
                                    Email content will be saved here...
                                </div>
                                <div style="font-size: 13px; opacity: 0.7;">
                                    üìÅ Email Notes folder
                                </div>
                            </div>
                            <div style="background: rgba(255, 215, 0, 0.3); padding: 12px; border-radius: 10px; text-align: center; font-weight: 600;">
                                 Save to iOS Notes
                            </div>
                        </div>`
                    },
                    {
                        label: '3. Saved',
                        html: `<div class="modal-success-state">
                            <div class="modal-success-icon">‚úì</div>
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">Note Saved!</div>
                            <div style="opacity: 0.8;">Added to iOS Notes app</div>
                        </div>`
                    }
                ]
            },

            // ===== GENERIC =====

            'open_link': {
                title: 'Open Link',
                actionType: 'GO_TO',
                actionCategory: 'generic',
                steps: [
                    {
                        label: '1. Link Email',
                        html: `<div class="modal-email-card">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Link Shared With You</div>
                            <div style="font-size: 13px; opacity: 0.8; margin-bottom: 12px;">Click to open</div>
                            <div style="display: inline-flex; padding: 8px 14px; background: rgba(0, 122, 255, 0.3); border-radius: 10px; font-size: 13px;"><span>üîó</span> Open</div>
                        </div>`
                    },
                    {
                        label: '2. Opens in Safari',
                        html: `<div class="modal-preview-card">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 16px;">üåê Opens in Safari</div>
                            <div style="background: rgba(0, 122, 255, 0.15); border: 1px solid rgba(0, 122, 255, 0.4); padding: 20px; border-radius: 12px; text-align: center;">
                                <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Opening Link</div>
                                <div style="font-size: 14px; opacity: 0.8;">Link will open in Safari</div>
                            </div>
                        </div>`
                    }
                ]
            }
        };

        let allActions = [];
        let showCompoundOnly = false;
        let showNativeIOSOnly = false;
        let selectedIntent = 'all';
        let currentSearchTerm = '';
        let currentPage = 0;
        const ACTIONS_PER_PAGE = 25;
        let corpusEmails = [];
        let emailsByIntent = {};

        // Handle search input
        function handleSearch() {
            currentSearchTerm = document.getElementById('action-search').value.toLowerCase();
            currentPage = 0; // Reset to first page on search
            document.getElementById('load-more-btn').textContent = 'Load More Actions';
            renderActions();
        }

        // Toggle compound filter
        function toggleCompoundFilter() {
            showCompoundOnly = !showCompoundOnly;
            const btn = document.getElementById('compound-toggle');
            if (showCompoundOnly) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
            currentPage = 0;
            document.getElementById('load-more-btn').textContent = 'Load More Actions';
            renderActions();
        }

        function toggleNativeIOSFilter() {
            showNativeIOSOnly = !showNativeIOSOnly;
            const btn = document.getElementById('native-ios-toggle');
            if (showNativeIOSOnly) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
            currentPage = 0;
            document.getElementById('load-more-btn').textContent = 'Load More Actions';
            renderActions();
        }

        // Handle intent dropdown change
        function handleIntentChange() {
            selectedIntent = document.getElementById('intent-select').value;
            console.log('üîÑ Intent changed to:', selectedIntent);
            currentPage = 0;
            document.getElementById('load-more-btn').textContent = 'Load More Actions';
            renderActions();
        }

        // Load more actions
        function loadMoreActions() {
            currentPage++;
            renderActions(true); // true = append mode
        }

        // Comprehensive Action-Intent Matrix
        // Maps which actions are applicable for each intent category
        function getApplicableActions(intent) {
            const actionIds = new Set();

            // Universal actions that work with most intents
            const universalActions = ['quick_reply', 'save_for_later', 'share', 'add_to_notes'];
            universalActions.forEach(a => actionIds.add(a));

            // E-commerce intents
            if (intent.startsWith('e-commerce.')) {
                actionIds.add('unsubscribe');
                actionIds.add('browse_shopping');

                if (intent.includes('return') || intent.includes('shipping') || intent.includes('backorder')) {
                    actionIds.add('track_package');
                }
                if (intent.includes('refund') || intent.includes('payment')) {
                    actionIds.add('pay_invoice');
                }
                if (intent.includes('review')) {
                    actionIds.add('write_review');
                }
                if (intent.includes('pickup') || intent.includes('delivery')) {
                    actionIds.add('pickup_details');
                    actionIds.add('contact_driver');
                    actionIds.add('schedule_delivery_time');
                }
            }

            // Finance intents
            if (intent.startsWith('finance.')) {
                if (intent.includes('payment') || intent.includes('bill') || intent.includes('invoice')) {
                    actionIds.add('pay_invoice');
                    actionIds.add('add_to_calendar');
                    actionIds.add('add_reminder');
                }
                if (intent.includes('fraud') || intent.includes('alert')) {
                    actionIds.add('add_reminder');
                }
                if (intent.includes('investment') || intent.includes('mortgage')) {
                    actionIds.add('add_to_calendar');
                }
            }

            // Healthcare intents
            if (intent.startsWith('healthcare.')) {
                actionIds.add('add_to_calendar');
                actionIds.add('save_contact');

                if (intent.includes('appointment')) {
                    actionIds.add('add_reminder');
                }
                if (intent.includes('billing') || intent.includes('claim')) {
                    actionIds.add('pay_invoice');
                }
                if (intent.includes('results') || intent.includes('referral')) {
                    actionIds.add('add_to_notes');
                }
            }

            // Travel intents
            if (intent.startsWith('travel.')) {
                actionIds.add('add_to_calendar');
                actionIds.add('add_to_wallet');
                actionIds.add('reservation');

                if (intent.includes('reservation') || intent.includes('confirmation')) {
                    actionIds.add('add_reminder');
                }
            }

            // Career intents
            if (intent.startsWith('career.')) {
                actionIds.add('add_to_calendar');
                actionIds.add('save_contact');

                if (intent.includes('interview') || intent.includes('onboarding')) {
                    actionIds.add('add_reminder');
                }
            }

            // Education intents
            if (intent.startsWith('education.')) {
                actionIds.add('add_to_calendar');
                actionIds.add('add_to_notes');

                if (intent.includes('event') || intent.includes('assignment')) {
                    actionIds.add('add_reminder');
                }
            }

            // Event intents
            if (intent.startsWith('event.')) {
                actionIds.add('add_to_calendar');
                actionIds.add('schedule_meeting');
                actionIds.add('add_reminder');
            }

            // Communication intents
            if (intent.startsWith('communication.')) {
                actionIds.add('save_contact');

                if (intent.includes('introduction') || intent.includes('inquiry')) {
                    actionIds.add('add_to_calendar');
                }
            }

            // Social intents
            if (intent.startsWith('social.')) {
                if (intent.includes('invitation')) {
                    actionIds.add('add_to_calendar');
                    actionIds.add('add_reminder');
                }
            }

            // Marketing intents
            if (intent.startsWith('marketing.')) {
                actionIds.add('unsubscribe');
                actionIds.add('browse_shopping');
            }

            // Content/Newsletter intents
            if (intent.startsWith('content.newsletter')) {
                actionIds.add('unsubscribe');
                actionIds.add('newsletter_summary');
            }

            // Subscription intents
            if (intent.startsWith('subscription.')) {
                actionIds.add('cancel_subscription');
                actionIds.add('add_to_calendar');
            }

            // Legal/Civic intents
            if (intent.startsWith('legal.') || intent.startsWith('civic.')) {
                actionIds.add('add_to_calendar');
                actionIds.add('add_reminder');
                actionIds.add('add_to_notes');

                if (intent.includes('document')) {
                    actionIds.add('sign_form');
                    actionIds.add('document_viewer');
                }
            }

            // Account intents
            if (intent.startsWith('account.')) {
                actionIds.add('add_reminder');

                if (intent.includes('login') || intent.includes('device')) {
                    actionIds.add('add_to_notes');
                }
            }

            // Support intents
            if (intent.startsWith('support.')) {
                actionIds.add('add_to_calendar');
                actionIds.add('add_reminder');
            }

            // Real estate intents
            if (intent.startsWith('real-estate.')) {
                actionIds.add('save_properties');
                actionIds.add('add_to_calendar');
                actionIds.add('save_contact');
            }

            // Youth sports intents
            if (intent.startsWith('youth.sports')) {
                actionIds.add('add_to_calendar');
                actionIds.add('add_reminder');
            }

            return Array.from(actionIds);
        }

        // Check if action is applicable to intent
        function isActionApplicableToIntent(action, intent) {
            const applicableActionIds = getApplicableActions(intent);
            return applicableActionIds.includes(action.actionId);
        }

        // Populate intent dropdown
        // Load corpus emails to get dynamic intent list (but don't display emails)
        async function loadCorpusEmails() {
            const loadingIndicator = showLoadingIndicator('Loading intent data...');

            try {
                const response = await fetch('/data/comprehensive-corpus.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                corpusEmails = await response.json();

                // Group emails by intent
                emailsByIntent = {};
                corpusEmails.forEach(email => {
                    if (!emailsByIntent[email.intent]) {
                        emailsByIntent[email.intent] = [];
                    }
                    emailsByIntent[email.intent].push(email);
                });

                console.log('‚úÖ Loaded corpus emails:', corpusEmails.length, 'total emails');
                console.log('‚úÖ Grouped into', Object.keys(emailsByIntent).length, 'intents');
                hideLoadingIndicator(loadingIndicator);
            } catch (error) {
                console.error('‚ùå Error loading corpus emails:', error);
                emailsByIntent = {};
                hideLoadingIndicator(loadingIndicator);
                showErrorMessage(
                    'Failed to load intent data (comprehensive-corpus.json). The dropdown will only show "All Intents". This may happen if the file is missing or the server has restricted access.',
                    () => location.reload()
                );
            }
        }

        // Show loading indicator
        function showLoadingIndicator(message) {
            const indicator = document.createElement('div');
            indicator.id = 'loading-indicator';
            indicator.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: rgba(59, 130, 246, 0.95);
                color: white;
                padding: 16px 24px;
                border-radius: 12px;
                font-size: 14px;
                font-weight: 600;
                box-shadow: 0 4px 20px rgba(59, 130, 246, 0.4);
                z-index: 10000;
                display: flex;
                align-items: center;
                gap: 12px;
                backdrop-filter: blur(10px);
            `;
            indicator.innerHTML = `
                <div style="width: 20px; height: 20px; border: 3px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                <span>${message}</span>
                <style>
                    @keyframes spin {
                        to { transform: rotate(360deg); }
                    }
                </style>
            `;
            document.body.appendChild(indicator);
            return indicator;
        }

        // Hide loading indicator
        function hideLoadingIndicator(indicator) {
            if (indicator && indicator.parentElement) {
                indicator.remove();
            }
        }

        // Show error message with retry option
        function showErrorMessage(message, onRetry) {
            const errorDiv = document.createElement('div');
            errorDiv.id = 'error-message';
            errorDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: rgba(255, 69, 0, 0.95);
                color: white;
                padding: 20px 24px;
                border-radius: 12px;
                font-size: 14px;
                max-width: 400px;
                box-shadow: 0 4px 20px rgba(255, 69, 0, 0.4);
                z-index: 10000;
                backdrop-filter: blur(10px);
            `;
            errorDiv.innerHTML = `
                <div style="display: flex; align-items: flex-start; gap: 12px;">
                    <div style="font-size: 24px; line-height: 1;">‚ö†Ô∏è</div>
                    <div style="flex: 1;">
                        <div style="font-weight: 600; margin-bottom: 8px;">Data Loading Error</div>
                        <div style="margin-bottom: 12px; opacity: 0.95; line-height: 1.4;">${message}</div>
                        <div style="display: flex; gap: 8px;">
                            <button onclick="this.parentElement.parentElement.parentElement.parentElement.remove()" style="
                                background: rgba(255, 255, 255, 0.2);
                                border: none;
                                color: white;
                                padding: 8px 16px;
                                border-radius: 6px;
                                cursor: pointer;
                                font-weight: 600;
                                font-size: 13px;
                            ">Dismiss</button>
                            <button id="retry-button" style="
                                background: white;
                                border: none;
                                color: #ff4500;
                                padding: 8px 16px;
                                border-radius: 6px;
                                cursor: pointer;
                                font-weight: 600;
                                font-size: 13px;
                            ">Retry</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(errorDiv);

            if (onRetry) {
                document.getElementById('retry-button').addEventListener('click', onRetry);
            }

            // Auto-dismiss after 10 seconds
            setTimeout(() => {
                if (errorDiv.parentElement) {
                    errorDiv.remove();
                }
            }, 10000);
        }

        function populateIntentDropdown() {
            const dropdown = document.getElementById('intent-select');

            console.log('üìã populateIntentDropdown called, emailsByIntent has', Object.keys(emailsByIntent).length, 'intents');

            // Clear existing options
            dropdown.innerHTML = '<option value="all">All Intents</option>';

            // Get intents from corpus (dynamic)
            const intents = Object.keys(emailsByIntent).sort();

            // Add intent options with counts
            intents.forEach(intent => {
                const option = document.createElement('option');
                option.value = intent;

                // Format intent label nicely
                const intentLabel = intent.charAt(0).toUpperCase() + intent.slice(1).replace(/_/g, ' ').replace(/\./g, ' ‚Ä∫ ');

                // Count actions applicable to this intent using the matrix
                const applicableActionIds = getApplicableActions(intent);
                const actionCount = allActions.filter(a => applicableActionIds.includes(a.actionId)).length;

                if (actionCount > 0) {
                    option.textContent = `${intentLabel} (${actionCount} actions)`;
                } else {
                    option.textContent = intentLabel;
                }

                dropdown.appendChild(option);
            });

            console.log('‚úÖ Populated dropdown with', intents.length, 'intents from corpus');
        }

        // Convert compound flows to action-like objects
        function getCompoundActions() {
            return Object.keys(COMPOUND_FLOWS).map(flowId => {
                const flow = COMPOUND_FLOWS[flowId];
                return {
                    actionId: flowId,
                    displayName: flow.title,
                    description: `${flow.steps.length} step compound flow`,
                    modalComponent: 'CompoundFlow',
                    isCompound: true,
                    isPremium: flow.isPremium,
                    requiresResponse: flow.requiresResponse,
                    steps: flow.steps
                };
            });
        }

        // Fetch actions from API
        async function loadActions() {
            try {
                // Load corpus emails first to get intent list
                await loadCorpusEmails();

                const response = await fetch(`${DashboardConfig.services.actions}/api/actions/catalog`);
                const data = await response.json();

                // Merge regular actions with compound actions
                const regularActions = Object.values(data.actions);
                const compoundActions = getCompoundActions();
                allActions = [...compoundActions, ...regularActions];

                // Populate intent dropdown (after corpus is loaded to show counts)
                populateIntentDropdown();

                updateStats();
                renderActions();
            } catch (error) {
                console.error('Error loading actions:', error);

                // Environment-specific error message
                const isDev = DashboardConfig.environment === 'development';
                const errorMessage = isDev
                    ? `<p style="margin-bottom: 12px;">Failed to load actions from the Actions service.</p>
                       <p style="margin-bottom: 12px;"><strong>Environment:</strong> ${DashboardConfig.environment} mode</p>
                       <p style="margin-bottom: 12px;">Make sure the Actions service is running on <code style="background: rgba(255,255,255,0.1); padding: 2px 8px; border-radius: 4px;">localhost:8089</code></p>
                       <p style="font-size: 13px; margin-top: 16px;">Check service status: <code style="background: rgba(255,255,255,0.1); padding: 2px 8px; border-radius: 4px;">lsof -ti:8089</code></p>`
                    : `<p style="margin-bottom: 12px;">Could not load actions data from the backend service.</p>
                       <p style="margin-bottom: 12px;">The service may be temporarily unavailable. Please try again in a moment.</p>
                       <p style="font-size: 13px; margin-top: 16px; color: rgba(255,255,255,0.5);">Error: ${error.message}</p>`;

                document.getElementById('action-grid').innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: rgba(255,69,0,0.8);">
                        <div style="font-size: 18px; font-weight: 600; margin-bottom: 12px;">‚ö†Ô∏è Error loading actions</div>
                        <div style="font-size: 14px; opacity: 0.9; max-width: 600px; margin: 0 auto; line-height: 1.6;">
                            ${errorMessage}
                        </div>
                    </div>
                `;
            }
        }

        function updateStats() {
            const withModals = allActions.filter(a => a.modalComponent).length;
            const withFlows = allActions.filter(a => a.modalComponent && MODAL_FLOWS[a.actionId]).length;
            const pendingFlows = allActions.filter(a => a.modalComponent && !MODAL_FLOWS[a.actionId]).length;

            const totalActionsEl = document.getElementById('total-actions');
            if (totalActionsEl) totalActionsEl.textContent = allActions.length;

            const withModalsEl = document.getElementById('with-modals');
            if (withModalsEl) withModalsEl.textContent = withModals;

            const withFlowsEl = document.getElementById('with-flows');
            if (withFlowsEl) withFlowsEl.textContent = withFlows;

            const pendingFlowsEl = document.getElementById('pending-flows');
            if (pendingFlowsEl) pendingFlowsEl.textContent = pendingFlows;
        }

        function renderActions(appendMode = false) {
            const grid = document.getElementById('action-grid');
            const loadMoreContainer = document.getElementById('load-more-container');
            const loadMoreBtn = document.getElementById('load-more-btn');

            let filtered = allActions;
            console.log('üé® Rendering actions - total:', allActions.length, 'intent:', selectedIntent);

            // Apply compound filter
            if (showCompoundOnly) {
                filtered = filtered.filter(a => a.isCompound);
            }

            // Apply native iOS filter
            if (showNativeIOSOnly) {
                filtered = filtered.filter(a => a.usesNativeIOS === true);
            }

            // Apply intent filter using action-intent matrix
            if (selectedIntent !== 'all') {
                filtered = filtered.filter(a => {
                    // Use the matrix to check if action is applicable to this intent
                    return isActionApplicableToIntent(a, selectedIntent);
                });
                console.log('üîç Filtered to', filtered.length, 'actions for intent:', selectedIntent);
            }

            // Apply search filter
            if (currentSearchTerm) {
                filtered = filtered.filter(a => {
                    const searchableText = [
                        a.actionId,
                        a.displayName || '',
                        a.description || '',
                        a.modalComponent || '',
                        a.category || '',
                        a.intent || ''
                    ].join(' ').toLowerCase();
                    return searchableText.includes(currentSearchTerm);
                });
            }

            // Sort alphabetically by display name
            filtered.sort((a, b) => {
                const nameA = (a.displayName || a.actionId).toLowerCase();
                const nameB = (b.displayName || b.actionId).toLowerCase();
                return nameA.localeCompare(nameB);
            });

            if (filtered.length === 0) {
                grid.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.5);">
                        No actions match this filter
                    </div>
                `;
                loadMoreContainer.style.display = 'none';
                return;
            }

            // Calculate pagination
            const totalActions = filtered.length;
            const startIdx = 0;
            const endIdx = (currentPage + 1) * ACTIONS_PER_PAGE;
            const paginatedActions = filtered.slice(startIdx, endIdx);
            const hasMore = endIdx < totalActions;

            // Update counts
            document.getElementById('showing-count').textContent = paginatedActions.length;
            document.getElementById('total-count').textContent = totalActions;

            // Show/hide load more button
            if (hasMore) {
                loadMoreContainer.style.display = 'block';
                loadMoreBtn.disabled = false;
            } else if (totalActions > ACTIONS_PER_PAGE) {
                loadMoreContainer.style.display = 'block';
                loadMoreBtn.disabled = true;
                loadMoreBtn.textContent = 'All Actions Loaded';
            } else {
                loadMoreContainer.style.display = 'none';
            }

            grid.innerHTML = paginatedActions.map(action => {
                // Handle compound actions
                if (action.isCompound) {
                    const flow = COMPOUND_FLOWS[action.actionId];
                    const premiumBadge = flow.isPremium
                        ? '<span style="background: linear-gradient(135deg, #FFD700, #FFA500); color: #1a1a2e; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 700; margin-left: 8px;">PREMIUM</span>'
                        : '<span style="background: rgba(52, 199, 89, 0.3); color: #34C759; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 700; margin-left: 8px;">FREE</span>';

                    const endBehaviorIcon = flow.requiresResponse ? '‚úâÔ∏è' : '‚Ü©Ô∏è';
                    const endBehaviorText = flow.requiresResponse ? 'Email Response' : 'Return to App';

                    let stepsHTML = '';
                    flow.steps.forEach((step, index) => {
                        stepsHTML += `
                            <div class="modal-flow-step">
                                <div class="modal-flow-label">${step.label}</div>
                                ${step.html}
                            </div>
                        `;
                        if (index < flow.steps.length - 1) {
                            stepsHTML += '<div class="modal-flow-arrow">‚Üí</div>';
                        }
                    });

                    const inlineFlowHTML = `
                        <div class="inline-flow-container" id="compound-flow-${action.actionId}">
                            <div class="inline-flow-content">
                                <div class="inline-flow-header">
                                    <div class="inline-flow-title">${flow.title}</div>
                                    <button class="collapse-btn" onclick="event.stopPropagation(); toggleCompoundFlow('${action.actionId}')">Collapse</button>
                                </div>
                                <div class="modal-flow-horizontal">
                                    ${stepsHTML}
                                </div>
                            </div>
                        </div>
                    `;

                    return `
                        <div class="action-row">
                            <div class="action-item has-flow" id="compound-card-${action.actionId}" onclick="toggleCompoundFlow('${action.actionId}')">
                                <div class="action-header">
                                    <div class="action-name" style="display: flex; align-items: center;">
                                        ${flow.title}
                                        ${premiumBadge}
                                    </div>
                                    <div class="action-badge badge-has-flow">Compound Flow</div>
                                </div>
                                <div class="action-id">${action.actionId}</div>
                                <div style="font-size: 13px; opacity: 0.7; margin-top: 8px;">
                                    ${flow.steps.length} Steps ‚Ä¢ ${endBehaviorIcon} ${endBehaviorText}
                                </div>
                            </div>
                            ${inlineFlowHTML}
                        </div>
                    `;
                }

                // Handle regular actions
                const hasModal = !!action.modalComponent;
                const hasFlow = !!MODAL_FLOWS[action.actionId];

                let badgeClass = 'badge-no-modal';
                let badgeText = 'No Modal';
                let itemClass = 'no-modal';

                if (hasModal && hasFlow) {
                    badgeClass = 'badge-has-flow';
                    badgeText = 'Has Flow';
                    itemClass = 'has-flow';
                } else if (hasModal && !hasFlow) {
                    badgeClass = 'badge-pending';
                    badgeText = 'Flow Pending';
                    itemClass = '';
                }

                const onclick = hasFlow ? `onclick="toggleInlineFlow('${action.actionId}')"` : '';

                // Generate inline flow content
                let inlineFlowHTML = '';
                if (hasFlow) {
                    const flow = MODAL_FLOWS[action.actionId];
                    let stepsHTML = '';
                    flow.steps.forEach((step, index) => {
                        stepsHTML += `
                            <div class="modal-flow-step">
                                <div class="modal-flow-label">${step.label}</div>
                                ${step.html}
                            </div>
                        `;
                        if (index < flow.steps.length - 1) {
                            stepsHTML += '<div class="modal-flow-arrow">‚Üí</div>';
                        }
                    });

                    inlineFlowHTML = `
                        <div class="inline-flow-container" id="flow-${action.actionId}">
                            <div class="inline-flow-content">
                                <div class="inline-flow-header">
                                    <div class="inline-flow-title">${flow.title}</div>
                                    <button class="collapse-btn" onclick="event.stopPropagation(); toggleInlineFlow('${action.actionId}')">Collapse</button>
                                </div>
                                <div class="modal-flow-horizontal">
                                    ${stepsHTML}
                                </div>
                            </div>
                        </div>
                    `;
                }

                // Add native iOS badge if applicable
                const nativeIOSBadge = action.usesNativeIOS
                    ? '<span style="background: linear-gradient(135deg, #007AFF, #5856D6); color: white; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 700; margin-left: 8px; display: inline-flex; align-items: center; gap: 4px;"><span>üì±</span><span>Native iOS</span></span>'
                    : '';

                return `
                    <div class="action-row">
                        <div class="action-item ${itemClass}" id="action-${action.actionId}" ${onclick}>
                            <div class="action-header">
                                <div class="action-name" style="display: flex; align-items: center;">
                                    ${action.displayName}
                                    ${nativeIOSBadge}
                                </div>
                                <div class="action-badge ${badgeClass}">${badgeText}</div>
                            </div>
                            <div class="action-id">${action.actionId}</div>
                            ${hasModal ? `<div class="action-modal">Modal: ${action.modalComponent}</div>` : ''}
                        </div>
                        ${inlineFlowHTML}
                    </div>
                `;
            }).join('');
        }

        let currentExpandedFlow = null;
        let currentExpandedCompoundFlow = null;

        function toggleInlineFlow(actionId) {
            const flowContainer = document.getElementById(`flow-${actionId}`);
            const actionCard = document.getElementById(`action-${actionId}`);

            if (!flowContainer || !actionCard) return;

            // If clicking the same action, collapse it
            if (currentExpandedFlow === actionId) {
                flowContainer.classList.remove('expanded');
                actionCard.classList.remove('active');
                currentExpandedFlow = null;
                return;
            }

            // Collapse any currently expanded flow
            if (currentExpandedFlow) {
                const prevFlow = document.getElementById(`flow-${currentExpandedFlow}`);
                const prevAction = document.getElementById(`action-${currentExpandedFlow}`);
                if (prevFlow) prevFlow.classList.remove('expanded');
                if (prevAction) prevAction.classList.remove('active');
            }

            // Expand the new flow
            flowContainer.classList.add('expanded');
            actionCard.classList.add('active');
            currentExpandedFlow = actionId;

            // Scroll to show the expanded flow
            setTimeout(() => {
                flowContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }

        function toggleCompoundFlow(flowId) {
            const flowContainer = document.getElementById(`compound-flow-${flowId}`);
            const actionCard = document.getElementById(`compound-card-${flowId}`);

            if (!flowContainer || !actionCard) return;

            // If clicking the same compound flow, collapse it
            if (currentExpandedCompoundFlow === flowId) {
                flowContainer.classList.remove('expanded');
                actionCard.classList.remove('active');
                currentExpandedCompoundFlow = null;
                return;
            }

            // Collapse any currently expanded compound flow
            if (currentExpandedCompoundFlow) {
                const prevFlow = document.getElementById(`compound-flow-${currentExpandedCompoundFlow}`);
                const prevAction = document.getElementById(`compound-card-${currentExpandedCompoundFlow}`);
                if (prevFlow) prevFlow.classList.remove('expanded');
                if (prevAction) prevAction.classList.remove('active');
            }

            // Expand the new compound flow
            flowContainer.classList.add('expanded');
            actionCard.classList.add('active');
            currentExpandedCompoundFlow = flowId;

            // Scroll to show the expanded flow
            setTimeout(() => {
                flowContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }

        // Load on page load
        loadActions();

        // Mobile Menu Functions
        function toggleMobileMenu() {
            const drawer = document.getElementById('mobileDrawer');
            const backdrop = document.getElementById('mobileBackdrop');
            drawer.classList.toggle('open');
            backdrop.classList.toggle('visible');
        }

        function closeMobileMenu() {
            const drawer = document.getElementById('mobileDrawer');
            const backdrop = document.getElementById('mobileBackdrop');
            drawer.classList.remove('open');
            backdrop.classList.remove('visible');
        }

        // Close mobile menu on link click
        document.querySelectorAll('.mobile-nav-link').forEach(link => {
            link.addEventListener('click', () => {
                setTimeout(closeMobileMenu, 300);
            });
        });
    </script>
</body>
</html>
