<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Issue Resolution - Zero Email Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #fff;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .header-left h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .header-left p {
            opacity: 0.9;
            font-size: 15px;
        }

        .header-right {
            display: flex;
            gap: 12px;
        }

        .btn {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: #fff;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .btn-primary {
            background: rgba(76, 175, 80, 0.6);
            border-color: rgba(76, 175, 80, 0.8);
        }

        /* Summary Cards */
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .summary-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 25px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .summary-number {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .summary-label {
            font-size: 13px;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .summary-card.critical {
            border-color: rgba(244, 67, 54, 0.5);
        }

        .summary-card.warning {
            border-color: rgba(255, 152, 0, 0.5);
        }

        .summary-card.info {
            border-color: rgba(33, 150, 243, 0.5);
        }

        /* Issues List */
        .issues-list {
            display: grid;
            gap: 20px;
        }

        .issue-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 30px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .issue-card.critical {
            border-color: rgba(244, 67, 54, 0.5);
            background: rgba(244, 67, 54, 0.05);
        }

        .issue-card.warning {
            border-color: rgba(255, 152, 0, 0.5);
            background: rgba(255, 152, 0, 0.05);
        }

        .issue-card.info {
            border-color: rgba(33, 150, 243, 0.5);
            background: rgba(33, 150, 243, 0.05);
        }

        .issue-card.resolved {
            opacity: 0.6;
            border-color: rgba(76, 175, 80, 0.5);
        }

        .issue-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 20px;
        }

        .issue-title-section {
            flex: 1;
        }

        .issue-badges {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .severity-badge {
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-critical {
            background: rgba(244, 67, 54, 0.8);
        }

        .badge-warning {
            background: rgba(255, 152, 0, 0.8);
        }

        .badge-info {
            background: rgba(33, 150, 243, 0.8);
        }

        .badge-resolved {
            background: rgba(76, 175, 80, 0.8);
        }

        .issue-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .issue-subtitle {
            font-size: 14px;
            opacity: 0.8;
        }

        .issue-icon {
            font-size: 48px;
        }

        .issue-body {
            margin-bottom: 20px;
        }

        .issue-description {
            font-size: 15px;
            line-height: 1.6;
            opacity: 0.9;
            margin-bottom: 16px;
        }

        .issue-details {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .detail-item {
            display: flex;
            gap: 12px;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .detail-label {
            opacity: 0.7;
            min-width: 100px;
        }

        .detail-value {
            font-weight: 600;
        }

        /* Resolution Steps */
        .resolution-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .resolution-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .resolution-steps {
            display: grid;
            gap: 12px;
        }

        .resolution-step {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            gap: 15px;
            align-items: start;
        }

        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-weight: 600;
            margin-bottom: 4px;
            font-size: 14px;
        }

        .step-description {
            font-size: 13px;
            opacity: 0.8;
        }

        .step-action {
            margin-top: 10px;
        }

        .step-btn {
            padding: 8px 16px;
            background: rgba(76, 175, 80, 0.6);
            border: 1px solid rgba(76, 175, 80, 0.8);
            border-radius: 8px;
            color: #fff;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .step-btn:hover {
            background: rgba(76, 175, 80, 0.8);
        }

        .step-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Issue Actions */
        .issue-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .action-btn {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: #fff;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .action-btn.primary {
            background: rgba(76, 175, 80, 0.6);
            border-color: rgba(76, 175, 80, 0.8);
        }

        .action-btn.danger {
            background: rgba(244, 67, 54, 0.6);
            border-color: rgba(244, 67, 54, 0.8);
        }

        /* Empty State */
        .empty-state {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 80px 40px;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .empty-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .empty-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .empty-description {
            font-size: 15px;
            opacity: 0.8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            body {
                padding-top: 120px;
            }
            .issue-header {
                flex-direction: column;
                gap: 20px;
            }

            .issue-actions {
                flex-direction: column;
            }

            .action-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-left">
                <h1>üîß Issue Resolution Center</h1>
                <p>Proactive issue detection with guided resolution workflows</p>
            </div>
            <div class="header-right">
                <a href="index.html" class="btn">
                    <span>‚Üê</span>
                    <span>Back to Dashboard</span>
                </a>
                <button class="btn btn-primary" onclick="detectIssues()">
                    <span>üîç</span>
                    <span>Scan for Issues</span>
                </button>
            </div>
        </div>

        <!-- Summary Cards -->
        <div class="summary-grid">
            <div class="summary-card critical">
                <div class="summary-number" id="critical-count">0</div>
                <div class="summary-label">Critical Issues</div>
            </div>
            <div class="summary-card warning">
                <div class="summary-number" id="warning-count">2</div>
                <div class="summary-label">Warnings</div>
            </div>
            <div class="summary-card info">
                <div class="summary-number" id="info-count">1</div>
                <div class="summary-label">Recommendations</div>
            </div>
            <div class="summary-card">
                <div class="summary-number" id="resolved-count">5</div>
                <div class="summary-label">Resolved Today</div>
            </div>
        </div>

        <!-- Issues List -->
        <div class="issues-list" id="issues-list">
            <!-- Issue: Smart Replies Service Down -->
            <div class="issue-card warning">
                <div class="issue-header">
                    <div class="issue-title-section">
                        <div class="issue-badges">
                            <span class="severity-badge badge-warning">WARNING</span>
                            <span class="severity-badge" style="background: rgba(158, 158, 158, 0.6);">OPTIONAL SERVICE</span>
                        </div>
                        <div class="issue-title">Smart Replies Service Not Responding</div>
                        <div class="issue-subtitle">Detected 2 minutes ago ‚Ä¢ Port 8084</div>
                    </div>
                    <div class="issue-icon">‚ö†Ô∏è</div>
                </div>

                <div class="issue-body">
                    <div class="issue-description">
                        The Smart Replies service (port 8084) is not responding to health checks. This is an optional service and won't affect core email functionality, but users won't see AI-generated reply suggestions.
                    </div>

                    <div class="issue-details">
                        <div class="detail-item">
                            <span class="detail-label">Service:</span>
                            <span class="detail-value">Smart Replies (Optional)</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Port:</span>
                            <span class="detail-value">8084</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Last Seen:</span>
                            <span class="detail-value">2 minutes ago</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Impact:</span>
                            <span class="detail-value">Low - Optional feature unavailable</span>
                        </div>
                    </div>
                </div>

                <div class="resolution-section">
                    <div class="resolution-title">
                        <span>üîß</span>
                        <span>Guided Resolution Steps</span>
                    </div>

                    <div class="resolution-steps">
                        <div class="resolution-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-title">Check Service Status</div>
                                <div class="step-description">Verify the service process is not running</div>
                                <div class="step-action">
                                    <button class="step-btn" onclick="checkServiceStatus('smart-replies', 8084)">Check Status</button>
                                </div>
                            </div>
                        </div>

                        <div class="resolution-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-title">Restart Service</div>
                                <div class="step-description">Start the Smart Replies service</div>
                                <div class="step-action">
                                    <button class="step-btn" onclick="restartService('smart-replies', 8084)">Start Service</button>
                                </div>
                            </div>
                        </div>

                        <div class="resolution-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-title">Verify Resolution</div>
                                <div class="step-description">Confirm service is healthy and responding</div>
                                <div class="step-action">
                                    <button class="step-btn" onclick="verifyService('smart-replies', 8084)">Verify</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="issue-actions">
                    <button class="action-btn primary" onclick="autoResolveIssue('smart-replies-down')">
                        ‚ö° Auto-Resolve
                    </button>
                    <button class="action-btn" onclick="viewServiceLogs('smart-replies')">
                        üìù View Logs
                    </button>
                    <button class="action-btn" onclick="dismissIssue('smart-replies-down')">
                        ‚úï Dismiss
                    </button>
                </div>
            </div>

            <!-- Issue: Shopping Agent Slow Startup -->
            <div class="issue-card warning">
                <div class="issue-header">
                    <div class="issue-title-section">
                        <div class="issue-badges">
                            <span class="severity-badge badge-warning">WARNING</span>
                            <span class="severity-badge" style="background: rgba(158, 158, 158, 0.6);">PERFORMANCE</span>
                        </div>
                        <div class="issue-title">Shopping Agent Slow Startup Time</div>
                        <div class="issue-subtitle">Takes 5+ seconds to initialize ‚Ä¢ Port 8086</div>
                    </div>
                    <div class="issue-icon">üêå</div>
                </div>

                <div class="issue-body">
                    <div class="issue-description">
                        The Shopping Agent service is taking longer than expected to start up (5+ seconds). This may indicate heavy dependency loading or configuration issues.
                    </div>

                    <div class="issue-details">
                        <div class="detail-item">
                            <span class="detail-label">Service:</span>
                            <span class="detail-value">Shopping Agent</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Startup Time:</span>
                            <span class="detail-value">5.2 seconds (expected: <2s)</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Impact:</span>
                            <span class="detail-value">Medium - Slower deployment times</span>
                        </div>
                    </div>
                </div>

                <div class="resolution-section">
                    <div class="resolution-title">
                        <span>üí°</span>
                        <span>Optimization Suggestions</span>
                    </div>

                    <div class="resolution-steps">
                        <div class="resolution-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-title">Profile Dependencies</div>
                                <div class="step-description">Identify slow-loading dependencies (OpenAI, Stripe SDK)</div>
                            </div>
                        </div>

                        <div class="resolution-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-title">Implement Lazy Loading</div>
                                <div class="step-description">Load heavy dependencies only when needed</div>
                            </div>
                        </div>

                        <div class="resolution-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-title">Cache Initialization</div>
                                <div class="step-description">Cache OpenAI client and Stripe SDK instances</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="issue-actions">
                    <button class="action-btn" onclick="viewServiceConfig('shopping-agent')">
                        ‚öôÔ∏è View Config
                    </button>
                    <button class="action-btn" onclick="dismissIssue('shopping-agent-slow')">
                        ‚úï Dismiss
                    </button>
                </div>
            </div>

            <!-- Issue: Gateway Proxy Not Configured -->
            <div class="issue-card info">
                <div class="issue-header">
                    <div class="issue-title-section">
                        <div class="issue-badges">
                            <span class="severity-badge badge-info">INFO</span>
                            <span class="severity-badge" style="background: rgba(158, 158, 158, 0.6);">RECOMMENDATION</span>
                        </div>
                        <div class="issue-title">Gateway‚ÜíClassifier Proxy Not Implemented</div>
                        <div class="issue-subtitle">Optional enhancement for centralized routing</div>
                    </div>
                    <div class="issue-icon">‚ÑπÔ∏è</div>
                </div>

                <div class="issue-body">
                    <div class="issue-description">
                        Services are currently called directly rather than through the Gateway proxy. While functional, implementing proxy routing would enable centralized load balancing, rate limiting, and circuit breaking.
                    </div>

                    <div class="issue-details">
                        <div class="detail-item">
                            <span class="detail-label">Current:</span>
                            <span class="detail-value">Direct service calls</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Recommended:</span>
                            <span class="detail-value">Proxy through Gateway</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Priority:</span>
                            <span class="detail-value">Low - Enhancement only</span>
                        </div>
                    </div>
                </div>

                <div class="issue-actions">
                    <button class="action-btn" onclick="dismissIssue('gateway-proxy')">
                        ‚úï Dismiss
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Detect issues
        async function detectIssues() {
            console.log('Scanning for issues...');
            alert('Scanning system for issues...\n\nThis would:\n- Check service health\n- Validate configuration\n- Detect performance issues\n- Identify optimization opportunities');
        }

        // Check service status
        async function checkServiceStatus(service, port) {
            console.log(`Checking ${service} status on port ${port}...`);
            alert(`Checking ${service} status...\n\nPort: ${port}\nCommand: curl http://localhost:${port}/health`);
        }

        // Restart service
        async function restartService(service, port) {
            if (!confirm(`Restart ${service} service?`)) return;

            console.log(`Restarting ${service}...`);
            alert(`Restarting ${service}...\n\nThis would:\n1. Stop the service gracefully\n2. Wait for cleanup\n3. Start service on port ${port}\n4. Verify health endpoint`);
        }

        // Verify service
        async function verifyService(service, port) {
            console.log(`Verifying ${service}...`);
            alert(`Verifying ${service}...\n\nChecking:\n- Health endpoint responds\n- Service is operational\n- No error logs`);
        }

        // Auto-resolve issue
        async function autoResolveIssue(issueId) {
            if (!confirm('Automatically resolve this issue?')) return;

            console.log(`Auto-resolving issue: ${issueId}`);
            alert('Auto-resolving issue...\n\nThis would:\n1. Run all resolution steps\n2. Verify each step succeeded\n3. Mark issue as resolved\n4. Update dashboard');
        }

        // View service logs
        function viewServiceLogs(service) {
            console.log(`Opening logs for ${service}`);
            window.location.href = `service-monitor.html#${service}`;
        }

        // View service config
        function viewServiceConfig(service) {
            console.log(`Opening config for ${service}`);
            alert(`Service Configuration:\n\nThis would display:\n- Environment variables\n- Service settings\n- Dependency versions\n- Port configuration`);
        }

        // Dismiss issue
        function dismissIssue(issueId) {
            if (!confirm('Dismiss this issue?')) return;

            console.log(`Dismissing issue: ${issueId}`);
            alert('Issue dismissed. It will be hidden from the list.');
            // In production, this would update the UI and persist the dismissal
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Issue Resolution Center initialized');
        });
    </script>
</body>
</html>
